/*!
 * jQuery JavaScript Library v1.7.2
 * http://jquery.com/
 *
 * Copyright 2011, John Resig
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 * Copyright 2011, The Dojo Foundation
 * Released under the MIT, BSD, and GPL Licenses.
 *
 * Date: Wed Mar 21 12:46:34 2012 -0700
 */
(function(e,t){function u(e){var t=o[e]={},n,r;e=e.split(/\s+/);for(n=0,r=e.length;n<r;n++)t[e[n]]=!0;return t}function c(e,n,r){if(r===t&&e.nodeType===1){var i="data-"+n.replace(l,"-$1").toLowerCase();r=e.getAttribute(i);if(typeof r=="string"){try{r=r==="true"?!0:r==="false"?!1:r==="null"?null:s.isNumeric(r)?+r:f.test(r)?s.parseJSON(r):r}catch(o){}s.data(e,n,r)}else r=t}return r}function h(e){for(var t in e){if(t==="data"&&s.isEmptyObject(e[t]))continue;if(t!=="toJSON")return!1}return!0}function p(e,t,n){var r=t+"defer",i=t+"queue",o=t+"mark",u=s._data(e,r);u&&(n==="queue"||!s._data(e,i))&&(n==="mark"||!s._data(e,o))&&setTimeout(function(){!s._data(e,i)&&!s._data(e,o)&&(s.removeData(e,r,!0),u.fire())},0)}function H(){return!1}function B(){return!0}function W(e){return!e||!e.parentNode||e.parentNode.nodeType===11}function X(e,t,n){t=t||0;if(s.isFunction(t))return s.grep(e,function(e,r){var i=!!t.call(e,r,e);return i===n});if(t.nodeType)return s.grep(e,function(e,r){return e===t===n});if(typeof t=="string"){var r=s.grep(e,function(e){return e.nodeType===1});if(q.test(t))return s.filter(t,r,!n);t=s.filter(t,r)}return s.grep(e,function(e,r){return s.inArray(e,t)>=0===n})}function V(e){var t=$.split("|"),n=e.createDocumentFragment();if(n.createElement)while(t.length)n.createElement(t.pop());return n}function at(e,t){return s.nodeName(e,"table")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function ft(e,t){if(t.nodeType!==1||!s.hasData(e))return;var n,r,i,o=s._data(e),u=s._data(t,o),a=o.events;if(a){delete u.handle,u.events={};for(n in a)for(r=0,i=a[n].length;r<i;r++)s.event.add(t,n,a[n][r])}u.data&&(u.data=s.extend({},u.data))}function lt(e,t){var n;if(t.nodeType!==1)return;t.clearAttributes&&t.clearAttributes(),t.mergeAttributes&&t.mergeAttributes(e),n=t.nodeName.toLowerCase(),n==="object"?t.outerHTML=e.outerHTML:n!=="input"||e.type!=="checkbox"&&e.type!=="radio"?n==="option"?t.selected=e.defaultSelected:n==="input"||n==="textarea"?t.defaultValue=e.defaultValue:n==="script"&&t.text!==e.text&&(t.text=e.text):(e.checked&&(t.defaultChecked=t.checked=e.checked),t.value!==e.value&&(t.value=e.value)),t.removeAttribute(s.expando),t.removeAttribute("_submit_attached"),t.removeAttribute("_change_attached")}function ct(e){return typeof e.getElementsByTagName!="undefined"?e.getElementsByTagName("*"):typeof e.querySelectorAll!="undefined"?e.querySelectorAll("*"):[]}function ht(e){if(e.type==="checkbox"||e.type==="radio")e.defaultChecked=e.checked}function pt(e){var t=(e.nodeName||"").toLowerCase();t==="input"?ht(e):t!=="script"&&typeof e.getElementsByTagName!="undefined"&&s.grep(e.getElementsByTagName("input"),ht)}function dt(e){var t=n.createElement("div");return ut.appendChild(t),t.innerHTML=e.outerHTML,t.firstChild}function kt(e,t,n){var r=t==="width"?e.offsetWidth:e.offsetHeight,i=t==="width"?1:0,o=4;if(r>0){if(n!=="border")for(;i<o;i+=2)n||(r-=parseFloat(s.css(e,"padding"+xt[i]))||0),n==="margin"?r+=parseFloat(s.css(e,n+xt[i]))||0:r-=parseFloat(s.css(e,"border"+xt[i]+"Width"))||0;return r+"px"}r=Tt(e,t);if(r<0||r==null)r=e.style[t];if(bt.test(r))return r;r=parseFloat(r)||0;if(n)for(;i<o;i+=2)r+=parseFloat(s.css(e,"padding"+xt[i]))||0,n!=="padding"&&(r+=parseFloat(s.css(e,"border"+xt[i]+"Width"))||0),n==="margin"&&(r+=parseFloat(s.css(e,n+xt[i]))||0);return r+"px"}function Qt(e){return function(t,n){typeof t!="string"&&(n=t,t="*");if(s.isFunction(n)){var r=t.toLowerCase().split(qt),i=0,o=r.length,u,a,f;for(;i<o;i++)u=r[i],f=/^\+/.test(u),f&&(u=u.substr(1)||"*"),a=e[u]=e[u]||[],a[f?"unshift":"push"](n)}}}function Gt(e,n,r,i,s,o){s=s||n.dataTypes[0],o=o||{},o[s]=!0;var u=e[s],a=0,f=u?u.length:0,l=e===Wt,c;for(;a<f&&(l||!c);a++)c=u[a](n,r,i),typeof c=="string"&&(!l||o[c]?c=t:(n.dataTypes.unshift(c),c=Gt(e,n,r,i,c,o)));return(l||!c)&&!o["*"]&&(c=Gt(e,n,r,i,"*",o)),c}function Yt(e,n){var r,i,o=s.ajaxSettings.flatOptions||{};for(r in n)n[r]!==t&&((o[r]?e:i||(i={}))[r]=n[r]);i&&s.extend(!0,e,i)}function Zt(e,t,n,r){if(s.isArray(t))s.each(t,function(t,i){n||At.test(e)?r(e,i):Zt(e+"["+(typeof i=="object"?t:"")+"]",i,n,r)});else if(!n&&s.type(t)==="object")for(var i in t)Zt(e+"["+i+"]",t[i],n,r);else r(e,t)}function en(e,n,r){var i=e.contents,s=e.dataTypes,o=e.responseFields,u,a,f,l;for(a in o)a in r&&(n[o[a]]=r[a]);while(s[0]==="*")s.shift(),u===t&&(u=e.mimeType||n.getResponseHeader("content-type"));if(u)for(a in i)if(i[a]&&i[a].test(u)){s.unshift(a);break}if(s[0]in r)f=s[0];else{for(a in r){if(!s[0]||e.converters[a+" "+s[0]]){f=a;break}l||(l=a)}f=f||l}if(f)return f!==s[0]&&s.unshift(f),r[f]}function tn(e,n){e.dataFilter&&(n=e.dataFilter(n,e.dataType));var r=e.dataTypes,i={},o,u,a=r.length,f,l=r[0],c,h,p,d,v;for(o=1;o<a;o++){if(o===1)for(u in e.converters)typeof u=="string"&&(i[u.toLowerCase()]=e.converters[u]);c=l,l=r[o];if(l==="*")l=c;else if(c!=="*"&&c!==l){h=c+" "+l,p=i[h]||i["* "+l];if(!p){v=t;for(d in i){f=d.split(" ");if(f[0]===c||f[0]==="*"){v=i[f[1]+" "+l];if(v){d=i[d],d===!0?p=v:v===!0&&(p=d);break}}}}!p&&!v&&s.error("No conversion from "+h.replace(" "," to ")),p!==!0&&(n=p?p(n):v(d(n)))}}return n}function an(){try{return new e.XMLHttpRequest}catch(t){}}function fn(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function yn(){return setTimeout(bn,0),gn=s.now()}function bn(){gn=t}function wn(e,t){var n={};return s.each(mn.concat.apply([],mn.slice(0,t)),function(){n[this]=e}),n}function En(e){if(!ln[e]){var t=n.body,r=s("<"+e+">").appendTo(t),i=r.css("display");r.remove();if(i==="none"||i===""){cn||(cn=n.createElement("iframe"),cn.frameBorder=cn.width=cn.height=0),t.appendChild(cn);if(!hn||!cn.createElement)hn=(cn.contentWindow||cn.contentDocument).document,hn.write((s.support.boxModel?"<!doctype html>":"")+"<html><body>"),hn.close();r=hn.createElement(e),hn.body.appendChild(r),i=s.css(r,"display"),t.removeChild(cn)}ln[e]=i}return ln[e]}function Nn(e){return s.isWindow(e)?e:e.nodeType===9?e.defaultView||e.parentWindow:!1}var n=e.document,r=e.navigator,i=e.location,s=function(){function H(){if(i.isReady)return;try{n.documentElement.doScroll("left")}catch(e){setTimeout(H,1);return}i.ready()}var i=function(e,t){return new i.fn.init(e,t,u)},s=e.jQuery,o=e.$,u,a=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,f=/\S/,l=/^\s+/,c=/\s+$/,h=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,p=/^[\],:{}\s]*$/,d=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,v=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,m=/(?:^|:|,)(?:\s*\[)+/g,g=/(webkit)[ \/]([\w.]+)/,y=/(opera)(?:.*version)?[ \/]([\w.]+)/,b=/(msie) ([\w.]+)/,w=/(mozilla)(?:.*? rv:([\w.]+))?/,E=/-([a-z]|[0-9])/ig,S=/^-ms-/,x=function(e,t){return(t+"").toUpperCase()},T=r.userAgent,N,C,k,L=Object.prototype.toString,A=Object.prototype.hasOwnProperty,O=Array.prototype.push,M=Array.prototype.slice,_=String.prototype.trim,D=Array.prototype.indexOf,P={};return i.fn=i.prototype={constructor:i,init:function(e,r,s){var o,u,f,l;if(!e)return this;if(e.nodeType)return this.context=this[0]=e,this.length=1,this;if(e==="body"&&!r&&n.body)return this.context=n,this[0]=n.body,this.selector=e,this.length=1,this;if(typeof e=="string"){e.charAt(0)==="<"&&e.charAt(e.length-1)===">"&&e.length>=3?o=[null,e,null]:o=a.exec(e);if(o&&(o[1]||!r)){if(o[1])return r=r instanceof i?r[0]:r,l=r?r.ownerDocument||r:n,f=h.exec(e),f?i.isPlainObject(r)?(e=[n.createElement(f[1])],i.fn.attr.call(e,r,!0)):e=[l.createElement(f[1])]:(f=i.buildFragment([o[1]],[l]),e=(f.cacheable?i.clone(f.fragment):f.fragment).childNodes),i.merge(this,e);u=n.getElementById(o[2]);if(u&&u.parentNode){if(u.id!==o[2])return s.find(e);this.length=1,this[0]=u}return this.context=n,this.selector=e,this}return!r||r.jquery?(r||s).find(e):this.constructor(r).find(e)}return i.isFunction(e)?s.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),i.makeArray(e,this))},selector:"",jquery:"1.7.2",length:0,size:function(){return this.length},toArray:function(){return M.call(this,0)},get:function(e){return e==null?this.toArray():e<0?this[this.length+e]:this[e]},pushStack:function(e,t,n){var r=this.constructor();return i.isArray(e)?O.apply(r,e):i.merge(r,e),r.prevObject=this,r.context=this.context,t==="find"?r.selector=this.selector+(this.selector?" ":"")+n:t&&(r.selector=this.selector+"."+t+"("+n+")"),r},each:function(e,t){return i.each(this,e,t)},ready:function(e){return i.bindReady(),C.add(e),this},eq:function(e){return e=+e,e===-1?this.slice(e):this.slice(e,e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(M.apply(this,arguments),"slice",M.call(arguments).join(","))},map:function(e){return this.pushStack(i.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:O,sort:[].sort,splice:[].splice},i.fn.init.prototype=i.fn,i.extend=i.fn.extend=function(){var e,n,r,s,o,u,a=arguments[0]||{},f=1,l=arguments.length,c=!1;typeof a=="boolean"&&(c=a,a=arguments[1]||{},f=2),typeof a!="object"&&!i.isFunction(a)&&(a={}),l===f&&(a=this,--f);for(;f<l;f++)if((e=arguments[f])!=null)for(n in e){r=a[n],s=e[n];if(a===s)continue;c&&s&&(i.isPlainObject(s)||(o=i.isArray(s)))?(o?(o=!1,u=r&&i.isArray(r)?r:[]):u=r&&i.isPlainObject(r)?r:{},a[n]=i.extend(c,u,s)):s!==t&&(a[n]=s)}return a},i.extend({noConflict:function(t){return e.$===i&&(e.$=o),t&&e.jQuery===i&&(e.jQuery=s),i},isReady:!1,readyWait:1,holdReady:function(e){e?i.readyWait++:i.ready(!0)},ready:function(e){if(e===!0&&!--i.readyWait||e!==!0&&!i.isReady){if(!n.body)return setTimeout(i.ready,1);i.isReady=!0;if(e!==!0&&--i.readyWait>0)return;C.fireWith(n,[i]),i.fn.trigger&&i(n).trigger("ready").off("ready")}},bindReady:function(){if(C)return;C=i.Callbacks("once memory");if(n.readyState==="complete")return setTimeout(i.ready,1);if(n.addEventListener)n.addEventListener("DOMContentLoaded",k,!1),e.addEventListener("load",i.ready,!1);else if(n.attachEvent){n.attachEvent("onreadystatechange",k),e.attachEvent("onload",i.ready);var t=!1;try{t=e.frameElement==null}catch(r){}n.documentElement.doScroll&&t&&H()}},isFunction:function(e){return i.type(e)==="function"},isArray:Array.isArray||function(e){return i.type(e)==="array"},isWindow:function(e){return e!=null&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return e==null?String(e):P[L.call(e)]||"object"},isPlainObject:function(e){if(!e||i.type(e)!=="object"||e.nodeType||i.isWindow(e))return!1;try{if(e.constructor&&!A.call(e,"constructor")&&!A.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}var r;for(r in e);return r===t||A.call(e,r)},isEmptyObject:function(e){for(var t in e)return!1;return!0},error:function(e){throw new Error(e)},parseJSON:function(t){if(typeof t!="string"||!t)return null;t=i.trim(t);if(e.JSON&&e.JSON.parse)return e.JSON.parse(t);if(p.test(t.replace(d,"@").replace(v,"]").replace(m,"")))return(new Function("return "+t))();i.error("Invalid JSON: "+t)},parseXML:function(n){if(typeof n!="string"||!n)return null;var r,s;try{e.DOMParser?(s=new DOMParser,r=s.parseFromString(n,"text/xml")):(r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(n))}catch(o){r=t}return(!r||!r.documentElement||r.getElementsByTagName("parsererror").length)&&i.error("Invalid XML: "+n),r},noop:function(){},globalEval:function(t){t&&f.test(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(S,"ms-").replace(E,x)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toUpperCase()===t.toUpperCase()},each:function(e,n,r){var s,o=0,u=e.length,a=u===t||i.isFunction(e);if(r){if(a){for(s in e)if(n.apply(e[s],r)===!1)break}else for(;o<u;)if(n.apply(e[o++],r)===!1)break}else if(a){for(s in e)if(n.call(e[s],s,e[s])===!1)break}else for(;o<u;)if(n.call(e[o],o,e[o++])===!1)break;return e},trim:_?function(e){return e==null?"":_.call(e)}:function(e){return e==null?"":e.toString().replace(l,"").replace(c,"")},makeArray:function(e,t){var n=t||[];if(e!=null){var r=i.type(e);e.length==null||r==="string"||r==="function"||r==="regexp"||i.isWindow(e)?O.call(n,e):i.merge(n,e)}return n},inArray:function(e,t,n){var r;if(t){if(D)return D.call(t,e,n);r=t.length,n=n?n<0?Math.max(0,r+n):n:0;for(;n<r;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var r=e.length,i=0;if(typeof n.length=="number")for(var s=n.length;i<s;i++)e[r++]=n[i];else while(n[i]!==t)e[r++]=n[i++];return e.length=r,e},grep:function(e,t,n){var r=[],i;n=!!n;for(var s=0,o=e.length;s<o;s++)i=!!t(e[s],s),n!==i&&r.push(e[s]);return r},map:function(e,n,r){var s,o,u=[],a=0,f=e.length,l=e instanceof i||f!==t&&typeof f=="number"&&(f>0&&e[0]&&e[f-1]||f===0||i.isArray(e));if(l)for(;a<f;a++)s=n(e[a],a,r),s!=null&&(u[u.length]=s);else for(o in e)s=n(e[o],o,r),s!=null&&(u[u.length]=s);return u.concat.apply([],u)},guid:1,proxy:function(e,n){if(typeof n=="string"){var r=e[n];n=e,e=r}if(!i.isFunction(e))return t;var s=M.call(arguments,2),o=function(){return e.apply(n,s.concat(M.call(arguments)))};return o.guid=e.guid=e.guid||o.guid||i.guid++,o},access:function(e,n,r,s,o,u,a){var f,l=r==null,c=0,h=e.length;if(r&&typeof r=="object"){for(c in r)i.access(e,n,c,r[c],1,u,s);o=1}else if(s!==t){f=a===t&&i.isFunction(s),l&&(f?(f=n,n=function(e,t,n){return f.call(i(e),n)}):(n.call(e,s),n=null));if(n)for(;c<h;c++)n(e[c],r,f?s.call(e[c],c,n(e[c],r)):s,a);o=1}return o?e:l?n.call(e):h?n(e[0],r):u},now:function(){return(new Date).getTime()},uaMatch:function(e){e=e.toLowerCase();var t=g.exec(e)||y.exec(e)||b.exec(e)||e.indexOf("compatible")<0&&w.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},sub:function(){function e(t,n){return new e.fn.init(t,n)}i.extend(!0,e,this),e.superclass=this,e.fn=e.prototype=this(),e.fn.constructor=e,e.sub=this.sub,e.fn.init=function(r,s){return s&&s instanceof i&&!(s instanceof e)&&(s=e(s)),i.fn.init.call(this,r,s,t)},e.fn.init.prototype=e.fn;var t=e(n);return e},browser:{}}),i.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(e,t){P["[object "+t+"]"]=t.toLowerCase()}),N=i.uaMatch(T),N.browser&&(i.browser[N.browser]=!0,i.browser.version=N.version),i.browser.webkit&&(i.browser.safari=!0),f.test("Â ")&&(l=/^[\s\xA0]+/,c=/[\s\xA0]+$/),u=i(n),n.addEventListener?k=function(){n.removeEventListener("DOMContentLoaded",k,!1),i.ready()}:n.attachEvent&&(k=function(){n.readyState==="complete"&&(n.detachEvent("onreadystatechange",k),i.ready())}),i}(),o={};s.Callbacks=function(e){e=e?o[e]||u(e):{};var n=[],r=[],i,a,f,l,c,h,p=function(t){var r,i,o,u,a;for(r=0,i=t.length;r<i;r++)o=t[r],u=s.type(o),u==="array"?p(o):u==="function"&&(!e.unique||!v.has(o))&&n.push(o)},d=function(t,s){s=s||[],i=!e.memory||[t,s],a=!0,f=!0,h=l||0,l=0,c=n.length;for(;n&&h<c;h++)if(n[h].apply(t,s)===!1&&e.stopOnFalse){i=!0;break}f=!1,n&&(e.once?i===!0?v.disable():n=[]:r&&r.length&&(i=r.shift(),v.fireWith(i[0],i[1])))},v={add:function(){if(n){var e=n.length;p(arguments),f?c=n.length:i&&i!==!0&&(l=e,d(i[0],i[1]))}return this},remove:function(){if(n){var t=arguments,r=0,i=t.length;for(;r<i;r++)for(var s=0;s<n.length;s++)if(t[r]===n[s]){f&&s<=c&&(c--,s<=h&&h--),n.splice(s--,1);if(e.unique)break}}return this},has:function(e){if(n){var t=0,r=n.length;for(;t<r;t++)if(e===n[t])return!0}return!1},empty:function(){return n=[],this},disable:function(){return n=r=i=t,this},disabled:function(){return!n},lock:function(){return r=t,(!i||i===!0)&&v.disable(),this},locked:function(){return!r},fireWith:function(t,n){return r&&(f?e.once||r.push([t,n]):(!e.once||!i)&&d(t,n)),this},fire:function(){return v.fireWith(this,arguments),this},fired:function(){return!!a}};return v};var a=[].slice;s.extend({Deferred:function(e){var t=s.Callbacks("once memory"),n=s.Callbacks("once memory"),r=s.Callbacks("memory"),i="pending",o={resolve:t,reject:n,notify:r},u={done:t.add,fail:n.add,progress:r.add,state:function(){return i},isResolved:t.fired,isRejected:n.fired,then:function(e,t,n){return a.done(e).fail(t).progress(n),this},always:function(){return a.done.apply(a,arguments).fail.apply(a,arguments),this},pipe:function(e,t,n){return s.Deferred(function(r){s.each({done:[e,"resolve"],fail:[t,"reject"],progress:[n,"notify"]},function(e,t){var n=t[0],i=t[1],o;s.isFunction(n)?a[e](function(){o=n.apply(this,arguments),o&&s.isFunction(o.promise)?o.promise().then(r.resolve,r.reject,r.notify):r[i+"With"](this===a?r:this,[o])}):a[e](r[i])})}).promise()},promise:function(e){if(e==null)e=u;else for(var t in u)e[t]=u[t];return e}},a=u.promise({}),f;for(f in o)a[f]=o[f].fire,a[f+"With"]=o[f].fireWith;return a.done(function(){i="resolved"},n.disable,r.lock).fail(function(){i="rejected"},t.disable,r.lock),e&&e.call(a,a),a},when:function(e){function c(e){return function(n){t[e]=arguments.length>1?a.call(arguments,0):n,--o||f.resolveWith(f,t)}}function h(e){return function(t){i[e]=arguments.length>1?a.call(arguments,0):t,f.notifyWith(l,i)}}var t=a.call(arguments,0),n=0,r=t.length,i=new Array(r),o=r,u=r,f=r<=1&&e&&s.isFunction(e.promise)?e:s.Deferred(),l=f.promise();if(r>1){for(;n<r;n++)t[n]&&t[n].promise&&s.isFunction(t[n].promise)?t[n].promise().then(c(n),f.reject,h(n)):--o;o||f.resolveWith(f,t)}else f!==e&&f.resolveWith(f,r?[e]:[]);return l}}),s.support=function(){var t,r,i,o,u,a,f,l,c,h,p,d,v=n.createElement("div"),m=n.documentElement;v.setAttribute("className","t"),v.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>",r=v.getElementsByTagName("*"),i=v.getElementsByTagName("a")[0];if(!r||!r.length||!i)return{};o=n.createElement("select"),u=o.appendChild(n.createElement("option")),a=v.getElementsByTagName("input")[0],t={leadingWhitespace:v.firstChild.nodeType===3,tbody:!v.getElementsByTagName("tbody").length,htmlSerialize:!!v.getElementsByTagName("link").length,style:/top/.test(i.getAttribute("style")),hrefNormalized:i.getAttribute("href")==="/a",opacity:/^0.55/.test(i.style.opacity),cssFloat:!!i.style.cssFloat,checkOn:a.value==="on",optSelected:u.selected,getSetAttribute:v.className!=="t",enctype:!!n.createElement("form").enctype,html5Clone:n.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,pixelMargin:!0},s.boxModel=t.boxModel=n.compatMode==="CSS1Compat",a.checked=!0,t.noCloneChecked=a.cloneNode(!0).checked,o.disabled=!0,t.optDisabled=!u.disabled;try{delete v.test}catch(g){t.deleteExpando=!1}!v.addEventListener&&v.attachEvent&&v.fireEvent&&(v.attachEvent("onclick",function(){t.noCloneEvent=!1}),v.cloneNode(!0).fireEvent("onclick")),a=n.createElement("input"),a.value="t",a.setAttribute("type","radio"),t.radioValue=a.value==="t",a.setAttribute("checked","checked"),a.setAttribute("name","t"),v.appendChild(a),f=n.createDocumentFragment(),f.appendChild(v.lastChild),t.checkClone=f.cloneNode(!0).cloneNode(!0).lastChild.checked,t.appendChecked=a.checked,f.removeChild(a),f.appendChild(v);if(v.attachEvent)for(p in{submit:1,change:1,focusin:1})h="on"+p,d=h in v,d||(v.setAttribute(h,"return;"),d=typeof v[h]=="function"),t[p+"Bubbles"]=d;return f.removeChild(v),f=o=u=v=a=null,s(function(){var r,i,o,u,a,f,c,h,p,m,g,y,b,w=n.getElementsByTagName("body")[0];if(!w)return;h=1,b="padding:0;margin:0;border:",g="position:absolute;top:0;left:0;width:1px;height:1px;",y=b+"0;visibility:hidden;",p="style='"+g+b+"5px solid #000;",m="<div "+p+"display:block;'><div style='"+b+"0;display:block;overflow:hidden;'></div></div>"+"<table "+p+"' cellpadding='0' cellspacing='0'>"+"<tr><td></td></tr></table>",r=n.createElement("div"),r.style.cssText=y+"width:0;height:0;position:static;top:0;margin-top:"+h+"px",w.insertBefore(r,w.firstChild),v=n.createElement("div"),r.appendChild(v),v.innerHTML="<table><tr><td style='"+b+"0;display:none'></td><td>t</td></tr></table>",l=v.getElementsByTagName("td"),d=l[0].offsetHeight===0,l[0].style.display="",l[1].style.display="none",t.reliableHiddenOffsets=d&&l[0].offsetHeight===0,e.getComputedStyle&&(v.innerHTML="",c=n.createElement("div"),c.style.width="0",c.style.marginRight="0",v.style.width="2px",v.appendChild(c),t.reliableMarginRight=(parseInt((e.getComputedStyle(c,null)||{marginRight:0}).marginRight,10)||0)===0),typeof v.style.zoom!="undefined"&&(v.innerHTML="",v.style.width=v.style.padding="1px",v.style.border=0,v.style.overflow="hidden",v.style.display="inline",v.style.zoom=1,t.inlineBlockNeedsLayout=v.offsetWidth===3,v.style.display="block",v.style.overflow="visible",v.innerHTML="<div style='width:5px;'></div>",t.shrinkWrapBlocks=v.offsetWidth!==3),v.style.cssText=g+y,v.innerHTML=m,i=v.firstChild,o=i.firstChild,a=i.nextSibling.firstChild.firstChild,f={doesNotAddBorder:o.offsetTop!==5,doesAddBorderForTableAndCells:a.offsetTop===5},o.style.position="fixed",o.style.top="20px",f.fixedPosition=o.offsetTop===20||o.offsetTop===15,o.style.position=o.style.top="",i.style.overflow="hidden",i.style.position="relative",f.subtractsBorderForOverflowNotVisible=o.offsetTop===-5,f.doesNotIncludeMarginInBodyOffset=w.offsetTop!==h,e.getComputedStyle&&(v.style.marginTop="1%",t.pixelMargin=(e.getComputedStyle(v,null)||{marginTop:0}).marginTop!=="1%"),typeof r.style.zoom!="undefined"&&(r.style.zoom=1),w.removeChild(r),c=v=r=null,s.extend(t,f)}),t}();var f=/^(?:\{.*\}|\[.*\])$/,l=/([A-Z])/g;s.extend({cache:{},uuid:0,expando:"jQuery"+(s.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return e=e.nodeType?s.cache[e[s.expando]]:e[s.expando],!!e&&!h(e)},data:function(e,n,r,i){if(!s.acceptData(e))return;var o,u,a,f=s.expando,l=typeof n=="string",c=e.nodeType,h=c?s.cache:e,p=c?e[f]:e[f]&&f,d=n==="events";if((!p||!h[p]||!d&&!i&&!h[p].data)&&l&&r===t)return;p||(c?e[f]=p=++s.uuid:p=f),h[p]||(h[p]={},c||(h[p].toJSON=s.noop));if(typeof n=="object"||typeof n=="function")i?h[p]=s.extend(h[p],n):h[p].data=s.extend(h[p].data,n);return o=u=h[p],i||(u.data||(u.data={}),u=u.data),r!==t&&(u[s.camelCase(n)]=r),d&&!u[n]?o.events:(l?(a=u[n],a==null&&(a=u[s.camelCase(n)])):a=u,a)},removeData:function(e,t,n){if(!s.acceptData(e))return;var r,i,o,u=s.expando,a=e.nodeType,f=a?s.cache:e,l=a?e[u]:u;if(!f[l])return;if(t){r=n?f[l]:f[l].data;if(r){s.isArray(t)||(t in r?t=[t]:(t=s.camelCase(t),t in r?t=[t]:t=t.split(" ")));for(i=0,o=t.length;i<o;i++)delete r[t[i]];if(!(n?h:s.isEmptyObject)(r))return}}if(!n){delete f[l].data;if(!h(f[l]))return}s.support.deleteExpando||!f.setInterval?delete f[l]:f[l]=null,a&&(s.support.deleteExpando?delete e[u]:e.removeAttribute?e.removeAttribute(u):e[u]=null)},_data:function(e,t,n){return s.data(e,t,n,!0)},acceptData:function(e){if(e.nodeName){var t=s.noData[e.nodeName.toLowerCase()];if(t)return t!==!0&&e.getAttribute("classid")===t}return!0}}),s.fn.extend({data:function(e,n){var r,i,o,u,a,f=this[0],l=0,h=null;if(e===t){if(this.length){h=s.data(f);if(f.nodeType===1&&!s._data(f,"parsedAttrs")){o=f.attributes;for(a=o.length;l<a;l++)u=o[l].name,u.indexOf("data-")===0&&(u=s.camelCase(u.substring(5)),c(f,u,h[u]));s._data(f,"parsedAttrs",!0)}}return h}return typeof e=="object"?this.each(function(){s.data(this,e)}):(r=e.split(".",2),r[1]=r[1]?"."+r[1]:"",i=r[1]+"!",s.access(this,function(n){if(n===t)return h=this.triggerHandler("getData"+i,[r[0]]),h===t&&f&&(h=s.data(f,e),h=c(f,e,h)),h===t&&r[1]?this.data(r[0]):h;r[1]=n,this.each(function(){var t=s(this);t.triggerHandler("setData"+i,r),s.data(this,e,n),t.triggerHandler("changeData"+i,r)})},null,n,arguments.length>1,null,!1))},removeData:function(e){return this.each(function(){s.removeData(this,e)})}}),s.extend({_mark:function(e,t){e&&(t=(t||"fx")+"mark",s._data(e,t,(s._data(e,t)||0)+1))},_unmark:function(e,t,n){e!==!0&&(n=t,t=e,e=!1);if(t){n=n||"fx";var r=n+"mark",i=e?0:(s._data(t,r)||1)-1;i?s._data(t,r,i):(s.removeData(t,r,!0),p(t,n,"mark"))}},queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=s._data(e,t),n&&(!r||s.isArray(n)?r=s._data(e,t,s.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=s.queue(e,t),r=n.shift(),i={};r==="inprogress"&&(r=n.shift()),r&&(t==="fx"&&n.unshift("inprogress"),s._data(e,t+".run",i),r.call(e,function(){s.dequeue(e,t)},i)),n.length||(s.removeData(e,t+"queue "+t+".run",!0),p(e,t,"queue"))}}),s.fn.extend({queue:function(e,n){var r=2;return typeof e!="string"&&(n=e,e="fx",r--),arguments.length<r?s.queue(this[0],e):n===t?this:this.each(function(){var t=s.queue(this,e,n);e==="fx"&&t[0]!=="inprogress"&&s.dequeue(this,e)})},dequeue:function(e){return this.each(function(){s.dequeue(this,e)})},delay:function(e,t){return e=s.fx?s.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){function h(){--u||r.resolveWith(i,[i])}typeof e!="string"&&(n=e,e=t),e=e||"fx";var r=s.Deferred(),i=this,o=i.length,u=1,a=e+"defer",f=e+"queue",l=e+"mark",c;while(o--)if(c=s.data(i[o],a,t,!0)||(s.data(i[o],f,t,!0)||s.data(i[o],l,t,!0))&&s.data(i[o],a,s.Callbacks("once memory"),!0))u++,c.add(h);return h(),r.promise(n)}});var d=/[\n\t\r]/g,v=/\s+/,m=/\r/g,g=/^(?:button|input)$/i,y=/^(?:button|input|object|select|textarea)$/i,b=/^a(?:rea)?$/i,w=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,E=s.support.getSetAttribute,S,x,T;s.fn.extend({attr:function(e,t){return s.access(this,s.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){s.removeAttr(this,e)})},prop:function(e,t){return s.access(this,s.prop,e,t,arguments.length>1)},removeProp:function(e){return e=s.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,r,i,o,u,a;if(s.isFunction(e))return this.each(function(t){s(this).addClass(e.call(this,t,this.className))});if(e&&typeof e=="string"){t=e.split(v);for(n=0,r=this.length;n<r;n++){i=this[n];if(i.nodeType===1)if(!i.className&&t.length===1)i.className=e;else{o=" "+i.className+" ";for(u=0,a=t.length;u<a;u++)~o.indexOf(" "+t[u]+" ")||(o+=t[u]+" ");i.className=s.trim(o)}}}return this},removeClass:function(e){var n,r,i,o,u,a,f;if(s.isFunction(e))return this.each(function(t){s(this).removeClass(e.call(this,t,this.className))});if(e&&typeof e=="string"||e===t){n=(e||"").split(v);for(r=0,i=this.length;r<i;r++){o=this[r];if(o.nodeType===1&&o.className)if(e){u=(" "+o.className+" ").replace(d," ");for(a=0,f=n.length;a<f;a++)u=u.replace(" "+n[a]+" "," ");o.className=s.trim(u)}else o.className=""}}return this},toggleClass:function(e,t){var n=typeof e,r=typeof t=="boolean";return s.isFunction(e)?this.each(function(n){s(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if(n==="string"){var i,o=0,u=s(this),a=t,f=e.split(v);while(i=f[o++])a=r?a:!u.hasClass(i),u[a?"addClass":"removeClass"](i)}else if(n==="undefined"||n==="boolean")this.className&&s._data(this,"__className__",this.className),this.className=this.className||e===!1?"":s._data(this,"__className__")||""})},hasClass:function(e){var t=" "+e+" ",n=0,r=this.length;for(;n<r;n++)if(this[n].nodeType===1&&(" "+this[n].className+" ").replace(d," ").indexOf(t)>-1)return!0;return!1},val:function(e){var n,r,i,o=this[0];if(!arguments.length){if(o)return n=s.valHooks[o.type]||s.valHooks[o.nodeName.toLowerCase()],n&&"get"in n&&(r=n.get(o,"value"))!==t?r:(r=o.value,typeof r=="string"?r.replace(m,""):r==null?"":r);return}return i=s.isFunction(e),this.each(function(r){var o=s(this),u;if(this.nodeType!==1)return;i?u=e.call(this,r,o.val()):u=e,u==null?u="":typeof u=="number"?u+="":s.isArray(u)&&(u=s.map(u,function(e){return e==null?"":e+""})),n=s.valHooks[this.type]||s.valHooks[this.nodeName.toLowerCase()];if(!n||!("set"in n)||n.set(this,u,"value")===t)this.value=u})}}),s.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){var t,n,r,i,o=e.selectedIndex,u=[],a=e.options,f=e.type==="select-one";if(o<0)return null;n=f?o:0,r=f?o+1:a.length;for(;n<r;n++){i=a[n];if(i.selected&&(s.support.optDisabled?!i.disabled:i.getAttribute("disabled")===null)&&(!i.parentNode.disabled||!s.nodeName(i.parentNode,"optgroup"))){t=s(i).val();if(f)return t;u.push(t)}}return f&&!u.length&&a.length?s(a[o]).val():u},set:function(e,t){var n=s.makeArray(t);return s(e).find("option").each(function(){this.selected=s.inArray(s(this).val(),n)>=0}),n.length||(e.selectedIndex=-1),n}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(e,n,r,i){var o,u,a,f=e.nodeType;if(!e||f===3||f===8||f===2)return;if(i&&n in s.attrFn)return s(e)[n](r);if(typeof e.getAttribute=="undefined")return s.prop(e,n,r);a=f!==1||!s.isXMLDoc(e),a&&(n=n.toLowerCase(),u=s.attrHooks[n]||(w.test(n)?x:S));if(r!==t){if(r===null){s.removeAttr(e,n);return}return u&&"set"in u&&a&&(o=u.set(e,r,n))!==t?o:(e.setAttribute(n,""+r),r)}return u&&"get"in u&&a&&(o=u.get(e,n))!==null?o:(o=e.getAttribute(n),o===null?t:o)},removeAttr:function(e,t){var n,r,i,o,u,a=0;if(t&&e.nodeType===1){r=t.toLowerCase().split(v),o=r.length;for(;a<o;a++)i=r[a],i&&(n=s.propFix[i]||i,u=w.test(i),u||s.attr(e,i,""),e.removeAttribute(E?i:n),u&&n in e&&(e[n]=!1))}},attrHooks:{type:{set:function(e,t){if(g.test(e.nodeName)&&e.parentNode)s.error("type property can't be changed");else if(!s.support.radioValue&&t==="radio"&&s.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}},value:{get:function(e,t){return S&&s.nodeName(e,"button")?S.get(e,t):t in e?e.value:null},set:function(e,t,n){if(S&&s.nodeName(e,"button"))return S.set(e,t,n);e.value=t}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,n,r){var i,o,u,a=e.nodeType;if(!e||a===3||a===8||a===2)return;return u=a!==1||!s.isXMLDoc(e),u&&(n=s.propFix[n]||n,o=s.propHooks[n]),r!==t?o&&"set"in o&&(i=o.set(e,r,n))!==t?i:e[n]=r:o&&"get"in o&&(i=o.get(e,n))!==null?i:e[n]},propHooks:{tabIndex:{get:function(e){var n=e.getAttributeNode("tabindex");return n&&n.specified?parseInt(n.value,10):y.test(e.nodeName)||b.test(e.nodeName)&&e.href?0:t}}}}),s.attrHooks.tabindex=s.propHooks.tabIndex,x={get:function(e,n){var r,i=s.prop(e,n);return i===!0||typeof i!="boolean"&&(r=e.getAttributeNode(n))&&r.nodeValue!==!1?n.toLowerCase():t},set:function(e,t,n){var r;return t===!1?s.removeAttr(e,n):(r=s.propFix[n]||n,r in e&&(e[r]=!0),e.setAttribute(n,n.toLowerCase())),n}},E||(T={name:!0,id:!0,coords:!0},S=s.valHooks.button={get:function(e,n){var r;return r=e.getAttributeNode(n),r&&(T[n]?r.nodeValue!=="":r.specified)?r.nodeValue:t},set:function(e,t,r){var i=e.getAttributeNode(r);return i||(i=n.createAttribute(r),e.setAttributeNode(i)),i.nodeValue=t+""}},s.attrHooks.tabindex.set=S.set,s.each(["width","height"],function(e,t){s.attrHooks[t]=s.extend(s.attrHooks[t],{set:function(e,n){if(n==="")return e.setAttribute(t,"auto"),n}})}),s.attrHooks.contenteditable={get:S.get,set:function(e,t,n){t===""&&(t="false"),S.set(e,t,n)}}),s.support.hrefNormalized||s.each(["href","src","width","height"],function(e,n){s.attrHooks[n]=s.extend(s.attrHooks[n],{get:function(e){var r=e.getAttribute(n,2);return r===null?t:r}})}),s.support.style||(s.attrHooks.style={get:function(e){return e.style.cssText.toLowerCase()||t},set:function(e,t){return e.style.cssText=""+t}}),s.support.optSelected||(s.propHooks.selected=s.extend(s.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),s.support.enctype||(s.propFix.enctype="encoding"),s.support.checkOn||s.each(["radio","checkbox"],function(){s.valHooks[this]={get:function(e){return e.getAttribute("value")===null?"on":e.value}}}),s.each(["radio","checkbox"],function(){s.valHooks[this]=s.extend(s.valHooks[this],{set:function(e,t){if(s.isArray(t))return e.checked=s.inArray(s(e).val(),t)>=0}})});var N=/^(?:textarea|input|select)$/i,C=/^([^\.]*)?(?:\.(.+))?$/,k=/(?:^|\s)hover(\.\S+)?\b/,L=/^key/,A=/^(?:mouse|contextmenu)|click/,O=/^(?:focusinfocus|focusoutblur)$/,M=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,_=function(e){var t=M.exec(e);return t&&(
t[1]=(t[1]||"").toLowerCase(),t[3]=t[3]&&new RegExp("(?:^|\\s)"+t[3]+"(?:\\s|$)")),t},D=function(e,t){var n=e.attributes||{};return(!t[1]||e.nodeName.toLowerCase()===t[1])&&(!t[2]||(n.id||{}).value===t[2])&&(!t[3]||t[3].test((n["class"]||{}).value))},P=function(e){return s.event.special.hover?e:e.replace(k,"mouseenter$1 mouseleave$1")};s.event={add:function(e,n,r,i,o){var u,a,f,l,c,h,p,d,v,m,g,y;if(e.nodeType===3||e.nodeType===8||!n||!r||!(u=s._data(e)))return;r.handler&&(v=r,r=v.handler,o=v.selector),r.guid||(r.guid=s.guid++),f=u.events,f||(u.events=f={}),a=u.handle,a||(u.handle=a=function(e){return typeof s=="undefined"||!!e&&s.event.triggered===e.type?t:s.event.dispatch.apply(a.elem,arguments)},a.elem=e),n=s.trim(P(n)).split(" ");for(l=0;l<n.length;l++){c=C.exec(n[l])||[],h=c[1],p=(c[2]||"").split(".").sort(),y=s.event.special[h]||{},h=(o?y.delegateType:y.bindType)||h,y=s.event.special[h]||{},d=s.extend({type:h,origType:c[1],data:i,handler:r,guid:r.guid,selector:o,quick:o&&_(o),namespace:p.join(".")},v),g=f[h];if(!g){g=f[h]=[],g.delegateCount=0;if(!y.setup||y.setup.call(e,i,p,a)===!1)e.addEventListener?e.addEventListener(h,a,!1):e.attachEvent&&e.attachEvent("on"+h,a)}y.add&&(y.add.call(e,d),d.handler.guid||(d.handler.guid=r.guid)),o?g.splice(g.delegateCount++,0,d):g.push(d),s.event.global[h]=!0}e=null},global:{},remove:function(e,t,n,r,i){var o=s.hasData(e)&&s._data(e),u,a,f,l,c,h,p,d,v,m,g,y;if(!o||!(d=o.events))return;t=s.trim(P(t||"")).split(" ");for(u=0;u<t.length;u++){a=C.exec(t[u])||[],f=l=a[1],c=a[2];if(!f){for(f in d)s.event.remove(e,f+t[u],n,r,!0);continue}v=s.event.special[f]||{},f=(r?v.delegateType:v.bindType)||f,g=d[f]||[],h=g.length,c=c?new RegExp("(^|\\.)"+c.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null;for(p=0;p<g.length;p++)y=g[p],(i||l===y.origType)&&(!n||n.guid===y.guid)&&(!c||c.test(y.namespace))&&(!r||r===y.selector||r==="**"&&y.selector)&&(g.splice(p--,1),y.selector&&g.delegateCount--,v.remove&&v.remove.call(e,y));g.length===0&&h!==g.length&&((!v.teardown||v.teardown.call(e,c)===!1)&&s.removeEvent(e,f,o.handle),delete d[f])}s.isEmptyObject(d)&&(m=o.handle,m&&(m.elem=null),s.removeData(e,["events","handle"],!0))},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(n,r,i,o){if(!i||i.nodeType!==3&&i.nodeType!==8){var u=n.type||n,a=[],f,l,c,h,p,d,v,m,g,y;if(O.test(u+s.event.triggered))return;u.indexOf("!")>=0&&(u=u.slice(0,-1),l=!0),u.indexOf(".")>=0&&(a=u.split("."),u=a.shift(),a.sort());if((!i||s.event.customEvent[u])&&!s.event.global[u])return;n=typeof n=="object"?n[s.expando]?n:new s.Event(u,n):new s.Event(u),n.type=u,n.isTrigger=!0,n.exclusive=l,n.namespace=a.join("."),n.namespace_re=n.namespace?new RegExp("(^|\\.)"+a.join("\\.(?:.*\\.)?")+"(\\.|$)"):null,d=u.indexOf(":")<0?"on"+u:"";if(!i){f=s.cache;for(c in f)f[c].events&&f[c].events[u]&&s.event.trigger(n,r,f[c].handle.elem,!0);return}n.result=t,n.target||(n.target=i),r=r!=null?s.makeArray(r):[],r.unshift(n),v=s.event.special[u]||{};if(v.trigger&&v.trigger.apply(i,r)===!1)return;g=[[i,v.bindType||u]];if(!o&&!v.noBubble&&!s.isWindow(i)){y=v.delegateType||u,h=O.test(y+u)?i:i.parentNode,p=null;for(;h;h=h.parentNode)g.push([h,y]),p=h;p&&p===i.ownerDocument&&g.push([p.defaultView||p.parentWindow||e,y])}for(c=0;c<g.length&&!n.isPropagationStopped();c++)h=g[c][0],n.type=g[c][1],m=(s._data(h,"events")||{})[n.type]&&s._data(h,"handle"),m&&m.apply(h,r),m=d&&h[d],m&&s.acceptData(h)&&m.apply(h,r)===!1&&n.preventDefault();return n.type=u,!o&&!n.isDefaultPrevented()&&(!v._default||v._default.apply(i.ownerDocument,r)===!1)&&(u!=="click"||!s.nodeName(i,"a"))&&s.acceptData(i)&&d&&i[u]&&(u!=="focus"&&u!=="blur"||n.target.offsetWidth!==0)&&!s.isWindow(i)&&(p=i[d],p&&(i[d]=null),s.event.triggered=u,i[u](),s.event.triggered=t,p&&(i[d]=p)),n.result}return},dispatch:function(n){n=s.event.fix(n||e.event);var r=(s._data(this,"events")||{})[n.type]||[],i=r.delegateCount,o=[].slice.call(arguments,0),u=!n.exclusive&&!n.namespace,a=s.event.special[n.type]||{},f=[],l,c,h,p,d,v,m,g,y,b,w;o[0]=n,n.delegateTarget=this;if(a.preDispatch&&a.preDispatch.call(this,n)===!1)return;if(i&&(!n.button||n.type!=="click")){p=s(this),p.context=this.ownerDocument||this;for(h=n.target;h!=this;h=h.parentNode||this)if(h.disabled!==!0){v={},g=[],p[0]=h;for(l=0;l<i;l++)y=r[l],b=y.selector,v[b]===t&&(v[b]=y.quick?D(h,y.quick):p.is(b)),v[b]&&g.push(y);g.length&&f.push({elem:h,matches:g})}}r.length>i&&f.push({elem:this,matches:r.slice(i)});for(l=0;l<f.length&&!n.isPropagationStopped();l++){m=f[l],n.currentTarget=m.elem;for(c=0;c<m.matches.length&&!n.isImmediatePropagationStopped();c++){y=m.matches[c];if(u||!n.namespace&&!y.namespace||n.namespace_re&&n.namespace_re.test(y.namespace))n.data=y.data,n.handleObj=y,d=((s.event.special[y.origType]||{}).handle||y.handler).apply(m.elem,o),d!==t&&(n.result=d,d===!1&&(n.preventDefault(),n.stopPropagation()))}}return a.postDispatch&&a.postDispatch.call(this,n),n.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return e.which==null&&(e.which=t.charCode!=null?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,r){var i,s,o,u=r.button,a=r.fromElement;return e.pageX==null&&r.clientX!=null&&(i=e.target.ownerDocument||n,s=i.documentElement,o=i.body,e.pageX=r.clientX+(s&&s.scrollLeft||o&&o.scrollLeft||0)-(s&&s.clientLeft||o&&o.clientLeft||0),e.pageY=r.clientY+(s&&s.scrollTop||o&&o.scrollTop||0)-(s&&s.clientTop||o&&o.clientTop||0)),!e.relatedTarget&&a&&(e.relatedTarget=a===e.target?r.toElement:a),!e.which&&u!==t&&(e.which=u&1?1:u&2?3:u&4?2:0),e}},fix:function(e){if(e[s.expando])return e;var r,i,o=e,u=s.event.fixHooks[e.type]||{},a=u.props?this.props.concat(u.props):this.props;e=s.Event(o);for(r=a.length;r;)i=a[--r],e[i]=o[i];return e.target||(e.target=o.srcElement||n),e.target.nodeType===3&&(e.target=e.target.parentNode),e.metaKey===t&&(e.metaKey=e.ctrlKey),u.filter?u.filter(e,o):e},special:{ready:{setup:s.bindReady},load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(e,t,n){s.isWindow(this)&&(this.onbeforeunload=n)},teardown:function(e,t){this.onbeforeunload===t&&(this.onbeforeunload=null)}}},simulate:function(e,t,n,r){var i=s.extend(new s.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?s.event.trigger(i,null,t):s.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},s.event.handle=s.event.dispatch,s.removeEvent=n.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){e.detachEvent&&e.detachEvent("on"+t,n)},s.Event=function(e,t){if(!(this instanceof s.Event))return new s.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?B:H):this.type=e,t&&s.extend(this,t),this.timeStamp=e&&e.timeStamp||s.now(),this[s.expando]=!0},s.Event.prototype={preventDefault:function(){this.isDefaultPrevented=B;var e=this.originalEvent;if(!e)return;e.preventDefault?e.preventDefault():e.returnValue=!1},stopPropagation:function(){this.isPropagationStopped=B;var e=this.originalEvent;if(!e)return;e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=B,this.stopPropagation()},isDefaultPrevented:H,isPropagationStopped:H,isImmediatePropagationStopped:H},s.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){s.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n=this,r=e.relatedTarget,i=e.handleObj,o=i.selector,u;if(!r||r!==n&&!s.contains(n,r))e.type=i.origType,u=i.handler.apply(this,arguments),e.type=t;return u}}}),s.support.submitBubbles||(s.event.special.submit={setup:function(){if(s.nodeName(this,"form"))return!1;s.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,r=s.nodeName(n,"input")||s.nodeName(n,"button")?n.form:t;r&&!r._submit_attached&&(s.event.add(r,"submit._submit",function(e){e._submit_bubble=!0}),r._submit_attached=!0)})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&s.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){if(s.nodeName(this,"form"))return!1;s.event.remove(this,"._submit")}}),s.support.changeBubbles||(s.event.special.change={setup:function(){if(N.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio")s.event.add(this,"propertychange._change",function(e){e.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),s.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1,s.event.simulate("change",this,e,!0))});return!1}s.event.add(this,"beforeactivate._change",function(e){var t=e.target;N.test(t.nodeName)&&!t._change_attached&&(s.event.add(t,"change._change",function(e){this.parentNode&&!e.isSimulated&&!e.isTrigger&&s.event.simulate("change",this.parentNode,e,!0)}),t._change_attached=!0)})},handle:function(e){var t=e.target;if(this!==t||e.isSimulated||e.isTrigger||t.type!=="radio"&&t.type!=="checkbox")return e.handleObj.handler.apply(this,arguments)},teardown:function(){return s.event.remove(this,"._change"),N.test(this.nodeName)}}),s.support.focusinBubbles||s.each({focus:"focusin",blur:"focusout"},function(e,t){var r=0,i=function(e){s.event.simulate(t,e.target,s.event.fix(e),!0)};s.event.special[t]={setup:function(){r++===0&&n.addEventListener(e,i,!0)},teardown:function(){--r===0&&n.removeEventListener(e,i,!0)}}}),s.fn.extend({on:function(e,n,r,i,o){var u,a;if(typeof e=="object"){typeof n!="string"&&(r=r||n,n=t);for(a in e)this.on(a,n,r,e[a],o);return this}r==null&&i==null?(i=n,r=n=t):i==null&&(typeof n=="string"?(i=r,r=t):(i=r,r=n,n=t));if(i===!1)i=H;else if(!i)return this;return o===1&&(u=i,i=function(e){return s().off(e),u.apply(this,arguments)},i.guid=u.guid||(u.guid=s.guid++)),this.each(function(){s.event.add(this,e,i,r,n)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,n,r){if(e&&e.preventDefault&&e.handleObj){var i=e.handleObj;return s(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this}if(typeof e=="object"){for(var o in e)this.off(o,n,e[o]);return this}if(n===!1||typeof n=="function")r=n,n=t;return r===!1&&(r=H),this.each(function(){s.event.remove(this,e,r,n)})},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},live:function(e,t,n){return s(this.context).on(e,this.selector,t,n),this},die:function(e,t){return s(this.context).off(e,this.selector||"**",t),this},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return arguments.length==1?this.off(e,"**"):this.off(t,e,n)},trigger:function(e,t){return this.each(function(){s.event.trigger(e,t,this)})},triggerHandler:function(e,t){if(this[0])return s.event.trigger(e,t,this[0],!0)},toggle:function(e){var t=arguments,n=e.guid||s.guid++,r=0,i=function(n){var i=(s._data(this,"lastToggle"+e.guid)||0)%r;return s._data(this,"lastToggle"+e.guid,i+1),n.preventDefault(),t[i].apply(this,arguments)||!1};i.guid=n;while(r<t.length)t[r++].guid=n;return this.click(i)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),s.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){s.fn[t]=function(e,n){return n==null&&(n=e,e=null),arguments.length>0?this.on(t,null,e,n):this.trigger(t)},s.attrFn&&(s.attrFn[t]=!0),L.test(t)&&(s.event.fixHooks[t]=s.event.keyHooks),A.test(t)&&(s.event.fixHooks[t]=s.event.mouseHooks)}),function(){function S(e,t,n,i,s,o){for(var u=0,a=i.length;u<a;u++){var f=i[u];if(f){var l=!1;f=f[e];while(f){if(f[r]===n){l=i[f.sizset];break}f.nodeType===1&&!o&&(f[r]=n,f.sizset=u);if(f.nodeName.toLowerCase()===t){l=f;break}f=f[e]}i[u]=l}}}function x(e,t,n,i,s,o){for(var u=0,a=i.length;u<a;u++){var f=i[u];if(f){var l=!1;f=f[e];while(f){if(f[r]===n){l=i[f.sizset];break}if(f.nodeType===1){o||(f[r]=n,f.sizset=u);if(typeof t!="string"){if(f===t){l=!0;break}}else if(h.filter(t,[f]).length>0){l=f;break}}f=f[e]}i[u]=l}}}var e=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,r="sizcache"+(Math.random()+"").replace(".",""),i=0,o=Object.prototype.toString,u=!1,a=!0,f=/\\/g,l=/\r\n/g,c=/\W/;[0,0].sort(function(){return a=!1,0});var h=function(t,r,i,s){i=i||[],r=r||n;var u=r;if(r.nodeType!==1&&r.nodeType!==9)return[];if(!t||typeof t!="string")return i;var a,f,l,c,p,m,g,b,w=!0,E=h.isXML(r),S=[],x=t;do{e.exec(""),a=e.exec(x);if(a){x=a[3],S.push(a[1]);if(a[2]){c=a[3];break}}}while(a);if(S.length>1&&v.exec(t))if(S.length===2&&d.relative[S[0]])f=T(S[0]+S[1],r,s);else{f=d.relative[S[0]]?[r]:h(S.shift(),r);while(S.length)t=S.shift(),d.relative[t]&&(t+=S.shift()),f=T(t,f,s)}else{!s&&S.length>1&&r.nodeType===9&&!E&&d.match.ID.test(S[0])&&!d.match.ID.test(S[S.length-1])&&(p=h.find(S.shift(),r,E),r=p.expr?h.filter(p.expr,p.set)[0]:p.set[0]);if(r){p=s?{expr:S.pop(),set:y(s)}:h.find(S.pop(),S.length!==1||S[0]!=="~"&&S[0]!=="+"||!r.parentNode?r:r.parentNode,E),f=p.expr?h.filter(p.expr,p.set):p.set,S.length>0?l=y(f):w=!1;while(S.length)m=S.pop(),g=m,d.relative[m]?g=S.pop():m="",g==null&&(g=r),d.relative[m](l,g,E)}else l=S=[]}l||(l=f),l||h.error(m||t);if(o.call(l)==="[object Array]")if(!w)i.push.apply(i,l);else if(r&&r.nodeType===1)for(b=0;l[b]!=null;b++)l[b]&&(l[b]===!0||l[b].nodeType===1&&h.contains(r,l[b]))&&i.push(f[b]);else for(b=0;l[b]!=null;b++)l[b]&&l[b].nodeType===1&&i.push(f[b]);else y(l,i);return c&&(h(c,u,i,s),h.uniqueSort(i)),i};h.uniqueSort=function(e){if(w){u=a,e.sort(w);if(u)for(var t=1;t<e.length;t++)e[t]===e[t-1]&&e.splice(t--,1)}return e},h.matches=function(e,t){return h(e,null,null,t)},h.matchesSelector=function(e,t){return h(t,null,null,[e]).length>0},h.find=function(e,t,n){var r,i,s,o,u,a;if(!e)return[];for(i=0,s=d.order.length;i<s;i++){u=d.order[i];if(o=d.leftMatch[u].exec(e)){a=o[1],o.splice(1,1);if(a.substr(a.length-1)!=="\\"){o[1]=(o[1]||"").replace(f,""),r=d.find[u](o,t,n);if(r!=null){e=e.replace(d.match[u],"");break}}}}return r||(r=typeof t.getElementsByTagName!="undefined"?t.getElementsByTagName("*"):[]),{set:r,expr:e}},h.filter=function(e,n,r,i){var s,o,u,a,f,l,c,p,v,m=e,g=[],y=n,b=n&&n[0]&&h.isXML(n[0]);while(e&&n.length){for(u in d.filter)if((s=d.leftMatch[u].exec(e))!=null&&s[2]){l=d.filter[u],c=s[1],o=!1,s.splice(1,1);if(c.substr(c.length-1)==="\\")continue;y===g&&(g=[]);if(d.preFilter[u]){s=d.preFilter[u](s,y,r,g,i,b);if(!s)o=a=!0;else if(s===!0)continue}if(s)for(p=0;(f=y[p])!=null;p++)f&&(a=l(f,s,p,y),v=i^a,r&&a!=null?v?o=!0:y[p]=!1:v&&(g.push(f),o=!0));if(a!==t){r||(y=g),e=e.replace(d.match[u],"");if(!o)return[];break}}if(e===m){if(o!=null)break;h.error(e)}m=e}return y},h.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)};var p=h.getText=function(e){var t,n,r=e.nodeType,i="";if(r){if(r===1||r===9||r===11){if(typeof e.textContent=="string")return e.textContent;if(typeof e.innerText=="string")return e.innerText.replace(l,"");for(e=e.firstChild;e;e=e.nextSibling)i+=p(e)}else if(r===3||r===4)return e.nodeValue}else for(t=0;n=e[t];t++)n.nodeType!==8&&(i+=p(n));return i},d=h.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(e){return e.getAttribute("href")},type:function(e){return e.getAttribute("type")}},relative:{"+":function(e,t){var n=typeof t=="string",r=n&&!c.test(t),i=n&&!r;r&&(t=t.toLowerCase());for(var s=0,o=e.length,u;s<o;s++)if(u=e[s]){while((u=u.previousSibling)&&u.nodeType!==1);e[s]=i||u&&u.nodeName.toLowerCase()===t?u||!1:u===t}i&&h.filter(t,e,!0)},">":function(e,t){var n,r=typeof t=="string",i=0,s=e.length;if(r&&!c.test(t)){t=t.toLowerCase();for(;i<s;i++){n=e[i];if(n){var o=n.parentNode;e[i]=o.nodeName.toLowerCase()===t?o:!1}}}else{for(;i<s;i++)n=e[i],n&&(e[i]=r?n.parentNode:n.parentNode===t);r&&h.filter(t,e,!0)}},"":function(e,t,n){var r,s=i++,o=x;typeof t=="string"&&!c.test(t)&&(t=t.toLowerCase(),r=t,o=S),o("parentNode",t,s,e,r,n)},"~":function(e,t,n){var r,s=i++,o=x;typeof t=="string"&&!c.test(t)&&(t=t.toLowerCase(),r=t,o=S),o("previousSibling",t,s,e,r,n)}},find:{ID:function(e,t,n){if(typeof t.getElementById!="undefined"&&!n){var r=t.getElementById(e[1]);return r&&r.parentNode?[r]:[]}},NAME:function(e,t){if(typeof t.getElementsByName!="undefined"){var n=[],r=t.getElementsByName(e[1]);for(var i=0,s=r.length;i<s;i++)r[i].getAttribute("name")===e[1]&&n.push(r[i]);return n.length===0?null:n}},TAG:function(e,t){if(typeof t.getElementsByTagName!="undefined")return t.getElementsByTagName(e[1])}},preFilter:{CLASS:function(e,t,n,r,i,s){e=" "+e[1].replace(f,"")+" ";if(s)return e;for(var o=0,u;(u=t[o])!=null;o++)u&&(i^(u.className&&(" "+u.className+" ").replace(/[\t\n\r]/g," ").indexOf(e)>=0)?n||r.push(u):n&&(t[o]=!1));return!1},ID:function(e){return e[1].replace(f,"")},TAG:function(e,t){return e[1].replace(f,"").toLowerCase()},CHILD:function(e){if(e[1]==="nth"){e[2]||h.error(e[0]),e[2]=e[2].replace(/^\+|\s*/g,"");var t=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(e[2]==="even"&&"2n"||e[2]==="odd"&&"2n+1"||!/\D/.test(e[2])&&"0n+"+e[2]||e[2]);e[2]=t[1]+(t[2]||1)-0,e[3]=t[3]-0}else e[2]&&h.error(e[0]);return e[0]=i++,e},ATTR:function(e,t,n,r,i,s){var o=e[1]=e[1].replace(f,"");return!s&&d.attrMap[o]&&(e[1]=d.attrMap[o]),e[4]=(e[4]||e[5]||"").replace(f,""),e[2]==="~="&&(e[4]=" "+e[4]+" "),e},PSEUDO:function(t,n,r,i,s){if(t[1]==="not"){if(!((e.exec(t[3])||"").length>1||/^\w/.test(t[3]))){var o=h.filter(t[3],n,r,!0^s);return r||i.push.apply(i,o),!1}t[3]=h(t[3],null,null,n)}else if(d.match.POS.test(t[0])||d.match.CHILD.test(t[0]))return!0;return t},POS:function(e){return e.unshift(!0),e}},filters:{enabled:function(e){return e.disabled===!1&&e.type!=="hidden"},disabled:function(e){return e.disabled===!0},checked:function(e){return e.checked===!0},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},parent:function(e){return!!e.firstChild},empty:function(e){return!e.firstChild},has:function(e,t,n){return!!h(n[3],e).length},header:function(e){return/h\d/i.test(e.nodeName)},text:function(e){var t=e.getAttribute("type"),n=e.type;return e.nodeName.toLowerCase()==="input"&&"text"===n&&(t===n||t===null)},radio:function(e){return e.nodeName.toLowerCase()==="input"&&"radio"===e.type},checkbox:function(e){return e.nodeName.toLowerCase()==="input"&&"checkbox"===e.type},file:function(e){return e.nodeName.toLowerCase()==="input"&&"file"===e.type},password:function(e){return e.nodeName.toLowerCase()==="input"&&"password"===e.type},submit:function(e){var t=e.nodeName.toLowerCase();return(t==="input"||t==="button")&&"submit"===e.type},image:function(e){return e.nodeName.toLowerCase()==="input"&&"image"===e.type},reset:function(e){var t=e.nodeName.toLowerCase();return(t==="input"||t==="button")&&"reset"===e.type},button:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&"button"===e.type||t==="button"},input:function(e){return/input|select|textarea|button/i.test(e.nodeName)},focus:function(e){return e===e.ownerDocument.activeElement}},setFilters:{first:function(e,t){return t===0},last:function(e,t,n,r){return t===r.length-1},even:function(e,t){return t%2===0},odd:function(e,t){return t%2===1},lt:function(e,t,n){return t<n[3]-0},gt:function(e,t,n){return t>n[3]-0},nth:function(e,t,n){return n[3]-0===t},eq:function(e,t,n){return n[3]-0===t}},filter:{PSEUDO:function(e,t,n,r){var i=t[1],s=d.filters[i];if(s)return s(e,n,t,r);if(i==="contains")return(e.textContent||e.innerText||p([e])||"").indexOf(t[3])>=0;if(i==="not"){var o=t[3];for(var u=0,a=o.length;u<a;u++)if(o[u]===e)return!1;return!0}h.error(i)},CHILD:function(e,t){var n,i,s,o,u,a,f,l=t[1],c=e;switch(l){case"only":case"first":while(c=c.previousSibling)if(c.nodeType===1)return!1;if(l==="first")return!0;c=e;case"last":while(c=c.nextSibling)if(c.nodeType===1)return!1;return!0;case"nth":n=t[2],i=t[3];if(n===1&&i===0)return!0;s=t[0],o=e.parentNode;if(o&&(o[r]!==s||!e.nodeIndex)){a=0;for(c=o.firstChild;c;c=c.nextSibling)c.nodeType===1&&(c.nodeIndex=++a);o[r]=s}return f=e.nodeIndex-i,n===0?f===0:f%n===0&&f/n>=0}},ID:function(e,t){return e.nodeType===1&&e.getAttribute("id")===t},TAG:function(e,t){return t==="*"&&e.nodeType===1||!!e.nodeName&&e.nodeName.toLowerCase()===t},CLASS:function(e,t){return(" "+(e.className||e.getAttribute("class"))+" ").indexOf(t)>-1},ATTR:function(e,t){var n=t[1],r=h.attr?h.attr(e,n):d.attrHandle[n]?d.attrHandle[n](e):e[n]!=null?e[n]:e.getAttribute(n),i=r+"",s=t[2],o=t[4];return r==null?s==="!=":!s&&h.attr?r!=null:s==="="?i===o:s==="*="?i.indexOf(o)>=0:s==="~="?(" "+i+" ").indexOf(o)>=0:o?s==="!="?i!==o:s==="^="?i.indexOf(o)===0:s==="$="?i.substr(i.length-o.length)===o:s==="|="?i===o||i.substr(0,o.length+1)===o+"-":!1:i&&r!==!1},POS:function(e,t,n,r){var i=t[2],s=d.setFilters[i];if(s)return s(e,n,t,r)}}},v=d.match.POS,m=function(e,t){return"\\"+(t-0+1)};for(var g in d.match)d.match[g]=new RegExp(d.match[g].source+/(?![^\[]*\])(?![^\(]*\))/.source),d.leftMatch[g]=new RegExp(/(^(?:.|\r|\n)*?)/.source+d.match[g].source.replace(/\\(\d+)/g,m));d.match.globalPOS=v;var y=function(e,t){return e=Array.prototype.slice.call(e,0),t?(t.push.apply(t,e),t):e};try{Array.prototype.slice.call(n.documentElement.childNodes,0)[0].nodeType}catch(b){y=function(e,t){var n=0,r=t||[];if(o.call(e)==="[object Array]")Array.prototype.push.apply(r,e);else if(typeof e.length=="number")for(var i=e.length;n<i;n++)r.push(e[n]);else for(;e[n];n++)r.push(e[n]);return r}}var w,E;n.documentElement.compareDocumentPosition?w=function(e,t){return e===t?(u=!0,0):!e.compareDocumentPosition||!t.compareDocumentPosition?e.compareDocumentPosition?-1:1:e.compareDocumentPosition(t)&4?-1:1}:(w=function(e,t){if(e===t)return u=!0,0;if(e.sourceIndex&&t.sourceIndex)return e.sourceIndex-t.sourceIndex;var n,r,i=[],s=[],o=e.parentNode,a=t.parentNode,f=o;if(o===a)return E(e,t);if(!o)return-1;if(!a)return 1;while(f)i.unshift(f),f=f.parentNode;f=a;while(f)s.unshift(f),f=f.parentNode;n=i.length,r=s.length;for(var l=0;l<n&&l<r;l++)if(i[l]!==s[l])return E(i[l],s[l]);return l===n?E(e,s[l],-1):E(i[l],t,1)},E=function(e,t,n){if(e===t)return n;var r=e.nextSibling;while(r){if(r===t)return-1;r=r.nextSibling}return 1}),function(){var e=n.createElement("div"),r="script"+(new Date).getTime(),i=n.documentElement;e.innerHTML="<a name='"+r+"'/>",i.insertBefore(e,i.firstChild),n.getElementById(r)&&(d.find.ID=function(e,n,r){if(typeof n.getElementById!="undefined"&&!r){var i=n.getElementById(e[1]);return i?i.id===e[1]||typeof i.getAttributeNode!="undefined"&&i.getAttributeNode("id").nodeValue===e[1]?[i]:t:[]}},d.filter.ID=function(e,t){var n=typeof e.getAttributeNode!="undefined"&&e.getAttributeNode("id");return e.nodeType===1&&n&&n.nodeValue===t}),i.removeChild(e),i=e=null}(),function(){var e=n.createElement("div");e.appendChild(n.createComment("")),e.getElementsByTagName("*").length>0&&(d.find.TAG=function(e,t){var n=t.getElementsByTagName(e[1]);if(e[1]==="*"){var r=[];for(var i=0;n[i];i++)n[i].nodeType===1&&r.push(n[i]);n=r}return n}),e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!="undefined"&&e.firstChild.getAttribute("href")!=="#"&&(d.attrHandle.href=function(e){return e.getAttribute("href",2)}),e=null}(),n.querySelectorAll&&function(){var e=h,t=n.createElement("div"),r="__sizzle__";t.innerHTML="<p class='TEST'></p>";if(t.querySelectorAll&&t.querySelectorAll(".TEST").length===0)return;h=function(t,i,s,o){i=i||n;if(!o&&!h.isXML(i)){var u=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(t);if(u&&(i.nodeType===1||i.nodeType===9)){if(u[1])return y(i.getElementsByTagName(t),s);if(u[2]&&d.find.CLASS&&i.getElementsByClassName)return y(i.getElementsByClassName(u[2]),s)}if(i.nodeType===9){if(t==="body"&&i.body)return y([i.body],s);if(u&&u[3]){var a=i.getElementById(u[3]);if(!a||!a.parentNode)return y([],s);if(a.id===u[3])return y([a],s)}try{return y(i.querySelectorAll(t),s)}catch(f){}}else if(i.nodeType===1&&i.nodeName.toLowerCase()!=="object"){var l=i,c=i.getAttribute("id"),p=c||r,v=i.parentNode,m=/^\s*[+~]/.test(t);c?p=p.replace(/'/g,"\\$&"):i.setAttribute("id",p),m&&v&&(i=i.parentNode);try{if(!m||v)return y(i.querySelectorAll("[id='"+p+"'] "+t),s)}catch(g){}finally{c||l.removeAttribute("id")}}}return e(t,i,s,o)};for(var i in e)h[i]=e[i];t=null}(),function(){var e=n.documentElement,t=e.matchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.msMatchesSelector;if(t){var r=!t.call(n.createElement("div"),"div"),i=!1;try{t.call(n.documentElement,"[test!='']:sizzle")}catch(s){i=!0}h.matchesSelector=function(e,n){n=n.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!h.isXML(e))try{if(i||!d.match.PSEUDO.test(n)&&!/!=/.test(n)){var s=t.call(e,n);if(s||!r||e.document&&e.document.nodeType!==11)return s}}catch(o){}return h(n,null,null,[e]).length>0}}}(),function(){var e=n.createElement("div");e.innerHTML="<div class='test e'></div><div class='test'></div>";if(!e.getElementsByClassName||e.getElementsByClassName("e").length===0)return;e.lastChild.className="e";if(e.getElementsByClassName("e").length===1)return;d.order.splice(1,0,"CLASS"),d.find.CLASS=function(e,t,n){if(typeof t.getElementsByClassName!="undefined"&&!n)return t.getElementsByClassName(e[1])},e=null}(),n.documentElement.contains?h.contains=function(e,t){return e!==t&&(e.contains?e.contains(t):!0)}:n.documentElement.compareDocumentPosition?h.contains=function(e,t){return!!(e.compareDocumentPosition(t)&16)}:h.contains=function(){return!1},h.isXML=function(e){var t=(e?e.ownerDocument||e:0).documentElement;return t?t.nodeName!=="HTML":!1};var T=function(e,t,n){var r,i=[],s="",o=t.nodeType?[t]:t;while(r=d.match.PSEUDO.exec(e))s+=r[0],e=e.replace(d.match.PSEUDO,"");e=d.relative[e]?e+"*":e;for(var u=0,a=o.length;u<a;u++)h(e,o[u],i,n);return h.filter(s,i)};h.attr=s.attr,h.selectors.attrMap={},s.find=h,s.expr=h.selectors,s.expr[":"]=s.expr.filters,s.unique=h.uniqueSort,s.text=h.getText,s.isXMLDoc=h.isXML,s.contains=h.contains}();var j=/Until$/,F=/^(?:parents|prevUntil|prevAll)/,I=/,/,q=/^.[^:#\[\.,]*$/,R=Array.prototype.slice,U=s.expr.match.globalPOS,z={children:!0,contents:!0,next:!0,prev:!0};s.fn.extend({find:function(e){var t=this,n,r;if(typeof e!="string")return s(e).filter(function(){for(n=0,r=t.length;n<r;n++)if(s.contains(t[n],this))return!0});var i=this.pushStack("","find",e),o,u,a;for(n=0,r=this.length;n<r;n++){o=i.length,s.find(e,this[n],i);if(n>0)for(u=o;u<i.length;u++)for(a=0;a<o;a++)if(i[a]===i[u]){i.splice(u--,1);break}}return i},has:function(e){var t=s(e);return this.filter(function(){for(var e=0,n=t.length;e<n;e++)if(s.contains(this,t[e]))return!0})},not:function(e){return this.pushStack(X(this,e,!1),"not",e)},filter:function(e){return this.pushStack(X(this,e,!0),"filter",e)},is:function(e){return!!e&&(typeof e=="string"?U.test(e)?s(e,this.context).index(this[0])>=0:s.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){var n=[],r,i,o=this[0];if(s.isArray(e)){var u=1;while(o&&o.ownerDocument&&o!==t){for(r=0;r<e.length;r++)s(o).is(e[r])&&n.push({selector:e[r],elem:o,level:u});o=o.parentNode,u++}return n}var a=U.test(e)||typeof e!="string"?s(e,t||this.context):0;for(r=0,i=this.length;r<i;r++){o=this[r];while(o){if(a?a.index(o)>-1:s.find.matchesSelector(o,e)){n.push(o);break}o=o.parentNode;if(!o||!o.ownerDocument||o===t||o.nodeType===11)break}}return n=n.length>1?s.unique(n):n,this.pushStack(n,"closest",e)},index:function(e){return e?typeof e=="string"?s.inArray(this[0],s(e)):s.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(e,t){var n=typeof e=="string"?s(e,t):s.makeArray(e&&e.nodeType?[e]:e),r=s.merge(this.get(),n);return this.pushStack(W(n[0])||W(r[0])?r:s.unique(r))},andSelf:function(){return this.add(this.prevObject)}}),s.each({parent:function(e){var t=e.parentNode;return t&&t.nodeType!==11?t:null},parents:function(e){return s.dir(e,"parentNode")},parentsUntil:function(e,t,n){return s.dir(e,"parentNode",n)},next:function(e){return s.nth(e,2,"nextSibling")},prev:function(e){return s.nth(e,2,"previousSibling")},nextAll:function(e){return s.dir(e,"nextSibling")},prevAll:function(e){return s.dir(e,"previousSibling")},nextUntil:function(e,t,n){return s.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return s.dir(e,"previousSibling",n)},siblings:function(e){return s.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return s.sibling(e.firstChild)},contents:function(e){return s.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:s.makeArray(e.childNodes)}},function(e,t){s.fn[e]=function(n,r){var i=s.map(this,t,n);return j.test(e)||(r=n),r&&typeof r=="string"&&(i=s.filter(r,i)),i=this.length>1&&!z[e]?s.unique(i):i,(this.length>1||I.test(r))&&F.test(e)&&(i=i.reverse()),this.pushStack(i,e,R.call(arguments).join(","))}}),s.extend({filter:function(e,t,n){return n&&(e=":not("+e+")"),t.length===1?s.find.matchesSelector(t[0],e)?[t[0]]:[]:s.find.matches(e,t)},dir:function(e,n,r){var i=[],o=e[n];while(o&&o.nodeType!==9&&(r===t||o.nodeType!==1||!s(o).is(r)))o.nodeType===1&&i.push(o),o=o[n];return i},nth:function(e,t,n,r){t=t||1;var i=0;for(;e;e=e[n])if(e.nodeType===1&&++i===t)break;return e},sibling:function(e,t){var n=[];for(;e;e=e.nextSibling)e.nodeType===1&&e!==t&&n.push(e);return n}});var $="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",J=/ jQuery\d+="(?:\d+|null)"/g,K=/^\s+/,Q=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,G=/<([\w:]+)/,Y=/<tbody/i,Z=/<|&#?\w+;/,et=/<(?:script|style)/i,tt=/<(?:script|object|embed|option|style)/i,nt=new RegExp("<(?:"+$+")[\\s/>]","i"),rt=/checked\s*(?:[^=]|=\s*.checked.)/i,it=/\/(java|ecma)script/i,st=/^\s*<!(?:\[CDATA\[|\-\-)/,ot={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},ut=V(n);ot.optgroup=ot.option,ot.tbody=ot.tfoot=ot.colgroup=ot.caption=ot.thead,ot.th=ot.td,s.support.htmlSerialize||(ot._default=[1,"div<div>","</div>"]),s.fn.extend({text:function(e){return s.access(this,function(e){return e===t?s.text(this):this.empty().append((this[0]&&this[0].ownerDocument||n).createTextNode(e))},null,e,arguments.length)},wrapAll:function(e){if(s.isFunction(e))return this.each(function(t){s(this).wrapAll(e.call(this,t))});if(this[0]){var t=s(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstChild&&e.firstChild.nodeType===1)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return s.isFunction(e)?this.each(function(t){s(this).wrapInner(e.call(this,t))}):this.each(function(){var t=s(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=s.isFunction(e);return this.each(function(n){s(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){s.nodeName(this,"body")||s(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){this.nodeType===1&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){this.nodeType===1&&this.insertBefore(e,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this)});if(arguments.length){var e=s.clean(arguments);return e.push.apply(e,this.toArray()),this
.pushStack(e,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this.nextSibling)});if(arguments.length){var e=this.pushStack(this,"after",arguments);return e.push.apply(e,s.clean(arguments)),e}},remove:function(e,t){for(var n=0,r;(r=this[n])!=null;n++)if(!e||s.filter(e,[r]).length)!t&&r.nodeType===1&&(s.cleanData(r.getElementsByTagName("*")),s.cleanData([r])),r.parentNode&&r.parentNode.removeChild(r);return this},empty:function(){for(var e=0,t;(t=this[e])!=null;e++){t.nodeType===1&&s.cleanData(t.getElementsByTagName("*"));while(t.firstChild)t.removeChild(t.firstChild)}return this},clone:function(e,t){return e=e==null?!1:e,t=t==null?e:t,this.map(function(){return s.clone(this,e,t)})},html:function(e){return s.access(this,function(e){var n=this[0]||{},r=0,i=this.length;if(e===t)return n.nodeType===1?n.innerHTML.replace(J,""):null;if(typeof e=="string"&&!et.test(e)&&(s.support.leadingWhitespace||!K.test(e))&&!ot[(G.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(Q,"<$1></$2>");try{for(;r<i;r++)n=this[r]||{},n.nodeType===1&&(s.cleanData(n.getElementsByTagName("*")),n.innerHTML=e);n=0}catch(o){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(e){return this[0]&&this[0].parentNode?s.isFunction(e)?this.each(function(t){var n=s(this),r=n.html();n.replaceWith(e.call(this,t,r))}):(typeof e!="string"&&(e=s(e).detach()),this.each(function(){var t=this.nextSibling,n=this.parentNode;s(this).remove(),t?s(t).before(e):s(n).append(e)})):this.length?this.pushStack(s(s.isFunction(e)?e():e),"replaceWith",e):this},detach:function(e){return this.remove(e,!0)},domManip:function(e,n,r){var i,o,u,a,f=e[0],l=[];if(!s.support.checkClone&&arguments.length===3&&typeof f=="string"&&rt.test(f))return this.each(function(){s(this).domManip(e,n,r,!0)});if(s.isFunction(f))return this.each(function(i){var o=s(this);e[0]=f.call(this,i,n?o.html():t),o.domManip(e,n,r)});if(this[0]){a=f&&f.parentNode,s.support.parentNode&&a&&a.nodeType===11&&a.childNodes.length===this.length?i={fragment:a}:i=s.buildFragment(e,this,l),u=i.fragment,u.childNodes.length===1?o=u=u.firstChild:o=u.firstChild;if(o){n=n&&s.nodeName(o,"tr");for(var c=0,h=this.length,p=h-1;c<h;c++)r.call(n?at(this[c],o):this[c],i.cacheable||h>1&&c<p?s.clone(u,!0,!0):u)}l.length&&s.each(l,function(e,t){t.src?s.ajax({type:"GET",global:!1,url:t.src,async:!1,dataType:"script"}):s.globalEval((t.text||t.textContent||t.innerHTML||"").replace(st,"/*$0*/")),t.parentNode&&t.parentNode.removeChild(t)})}return this}}),s.buildFragment=function(e,t,r){var i,o,u,a,f=e[0];return t&&t[0]&&(a=t[0].ownerDocument||t[0]),a.createDocumentFragment||(a=n),e.length===1&&typeof f=="string"&&f.length<512&&a===n&&f.charAt(0)==="<"&&!tt.test(f)&&(s.support.checkClone||!rt.test(f))&&(s.support.html5Clone||!nt.test(f))&&(o=!0,u=s.fragments[f],u&&u!==1&&(i=u)),i||(i=a.createDocumentFragment(),s.clean(e,a,i,r)),o&&(s.fragments[f]=u?i:1),{fragment:i,cacheable:o}},s.fragments={},s.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){s.fn[e]=function(n){var r=[],i=s(n),o=this.length===1&&this[0].parentNode;if(o&&o.nodeType===11&&o.childNodes.length===1&&i.length===1)return i[t](this[0]),this;for(var u=0,a=i.length;u<a;u++){var f=(u>0?this.clone(!0):this).get();s(i[u])[t](f),r=r.concat(f)}return this.pushStack(r,e,i.selector)}}),s.extend({clone:function(e,t,n){var r,i,o,u=s.support.html5Clone||s.isXMLDoc(e)||!nt.test("<"+e.nodeName+">")?e.cloneNode(!0):dt(e);if((!s.support.noCloneEvent||!s.support.noCloneChecked)&&(e.nodeType===1||e.nodeType===11)&&!s.isXMLDoc(e)){lt(e,u),r=ct(e),i=ct(u);for(o=0;r[o];++o)i[o]&&lt(r[o],i[o])}if(t){ft(e,u);if(n){r=ct(e),i=ct(u);for(o=0;r[o];++o)ft(r[o],i[o])}}return r=i=null,u},clean:function(e,t,r,i){var o,u,a,f=[];t=t||n,typeof t.createElement=="undefined"&&(t=t.ownerDocument||t[0]&&t[0].ownerDocument||n);for(var l=0,c;(c=e[l])!=null;l++){typeof c=="number"&&(c+="");if(!c)continue;if(typeof c=="string")if(!Z.test(c))c=t.createTextNode(c);else{c=c.replace(Q,"<$1></$2>");var h=(G.exec(c)||["",""])[1].toLowerCase(),p=ot[h]||ot._default,d=p[0],v=t.createElement("div"),m=ut.childNodes,g;t===n?ut.appendChild(v):V(t).appendChild(v),v.innerHTML=p[1]+c+p[2];while(d--)v=v.lastChild;if(!s.support.tbody){var y=Y.test(c),b=h==="table"&&!y?v.firstChild&&v.firstChild.childNodes:p[1]==="<table>"&&!y?v.childNodes:[];for(a=b.length-1;a>=0;--a)s.nodeName(b[a],"tbody")&&!b[a].childNodes.length&&b[a].parentNode.removeChild(b[a])}!s.support.leadingWhitespace&&K.test(c)&&v.insertBefore(t.createTextNode(K.exec(c)[0]),v.firstChild),c=v.childNodes,v&&(v.parentNode.removeChild(v),m.length>0&&(g=m[m.length-1],g&&g.parentNode&&g.parentNode.removeChild(g)))}var w;if(!s.support.appendChecked)if(c[0]&&typeof (w=c.length)=="number")for(a=0;a<w;a++)pt(c[a]);else pt(c);c.nodeType?f.push(c):f=s.merge(f,c)}if(r){o=function(e){return!e.type||it.test(e.type)};for(l=0;f[l];l++){u=f[l];if(i&&s.nodeName(u,"script")&&(!u.type||it.test(u.type)))i.push(u.parentNode?u.parentNode.removeChild(u):u);else{if(u.nodeType===1){var E=s.grep(u.getElementsByTagName("script"),o);f.splice.apply(f,[l+1,0].concat(E))}r.appendChild(u)}}}return f},cleanData:function(e){var t,n,r=s.cache,i=s.event.special,o=s.support.deleteExpando;for(var u=0,a;(a=e[u])!=null;u++){if(a.nodeName&&s.noData[a.nodeName.toLowerCase()])continue;n=a[s.expando];if(n){t=r[n];if(t&&t.events){for(var f in t.events)i[f]?s.event.remove(a,f):s.removeEvent(a,f,t.handle);t.handle&&(t.handle.elem=null)}o?delete a[s.expando]:a.removeAttribute&&a.removeAttribute(s.expando),delete r[n]}}}});var vt=/alpha\([^)]*\)/i,mt=/opacity=([^)]*)/,gt=/([A-Z]|^ms)/g,yt=/^[\-+]?(?:\d*\.)?\d+$/i,bt=/^-?(?:\d*\.)?\d+(?!px)[^\d\s]+$/i,wt=/^([\-+])=([\-+.\de]+)/,Et=/^margin/,St={position:"absolute",visibility:"hidden",display:"block"},xt=["Top","Right","Bottom","Left"],Tt,Nt,Ct;s.fn.css=function(e,n){return s.access(this,function(e,n,r){return r!==t?s.style(e,n,r):s.css(e,n)},e,n,arguments.length>1)},s.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Tt(e,"opacity");return n===""?"1":n}return e.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":s.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,r,i){if(!e||e.nodeType===3||e.nodeType===8||!e.style)return;var o,u,a=s.camelCase(n),f=e.style,l=s.cssHooks[a];n=s.cssProps[a]||a;if(r===t)return l&&"get"in l&&(o=l.get(e,!1,i))!==t?o:f[n];u=typeof r,u==="string"&&(o=wt.exec(r))&&(r=+(o[1]+1)*+o[2]+parseFloat(s.css(e,n)),u="number");if(r==null||u==="number"&&isNaN(r))return;u==="number"&&!s.cssNumber[a]&&(r+="px");if(!l||!("set"in l)||(r=l.set(e,r))!==t)try{f[n]=r}catch(c){}},css:function(e,n,r){var i,o;n=s.camelCase(n),o=s.cssHooks[n],n=s.cssProps[n]||n,n==="cssFloat"&&(n="float");if(o&&"get"in o&&(i=o.get(e,!0,r))!==t)return i;if(Tt)return Tt(e,n)},swap:function(e,t,n){var r={},i,s;for(s in t)r[s]=e.style[s],e.style[s]=t[s];i=n.call(e);for(s in t)e.style[s]=r[s];return i}}),s.curCSS=s.css,n.defaultView&&n.defaultView.getComputedStyle&&(Nt=function(e,t){var n,r,i,o,u=e.style;return t=t.replace(gt,"-$1").toLowerCase(),(r=e.ownerDocument.defaultView)&&(i=r.getComputedStyle(e,null))&&(n=i.getPropertyValue(t),n===""&&!s.contains(e.ownerDocument.documentElement,e)&&(n=s.style(e,t))),!s.support.pixelMargin&&i&&Et.test(t)&&bt.test(n)&&(o=u.width,u.width=n,n=i.width,u.width=o),n}),n.documentElement.currentStyle&&(Ct=function(e,t){var n,r,i,s=e.currentStyle&&e.currentStyle[t],o=e.style;return s==null&&o&&(i=o[t])&&(s=i),bt.test(s)&&(n=o.left,r=e.runtimeStyle&&e.runtimeStyle.left,r&&(e.runtimeStyle.left=e.currentStyle.left),o.left=t==="fontSize"?"1em":s,s=o.pixelLeft+"px",o.left=n,r&&(e.runtimeStyle.left=r)),s===""?"auto":s}),Tt=Nt||Ct,s.each(["height","width"],function(e,t){s.cssHooks[t]={get:function(e,n,r){if(n)return e.offsetWidth!==0?kt(e,t,r):s.swap(e,St,function(){return kt(e,t,r)})},set:function(e,t){return yt.test(t)?t+"px":t}}}),s.support.opacity||(s.cssHooks.opacity={get:function(e,t){return mt.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?parseFloat(RegExp.$1)/100+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=s.isNumeric(t)?"alpha(opacity="+t*100+")":"",o=r&&r.filter||n.filter||"";n.zoom=1;if(t>=1&&s.trim(o.replace(vt,""))===""){n.removeAttribute("filter");if(r&&!r.filter)return}n.filter=vt.test(o)?o.replace(vt,i):o+" "+i}}),s(function(){s.support.reliableMarginRight||(s.cssHooks.marginRight={get:function(e,t){return s.swap(e,{display:"inline-block"},function(){return t?Tt(e,"margin-right"):e.style.marginRight})}})}),s.expr&&s.expr.filters&&(s.expr.filters.hidden=function(e){var t=e.offsetWidth,n=e.offsetHeight;return t===0&&n===0||!s.support.reliableHiddenOffsets&&(e.style&&e.style.display||s.css(e,"display"))==="none"},s.expr.filters.visible=function(e){return!s.expr.filters.hidden(e)}),s.each({margin:"",padding:"",border:"Width"},function(e,t){s.cssHooks[e+t]={expand:function(n){var r,i=typeof n=="string"?n.split(" "):[n],s={};for(r=0;r<4;r++)s[e+xt[r]+t]=i[r]||i[r-2]||i[0];return s}}});var Lt=/%20/g,At=/\[\]$/,Ot=/\r?\n/g,Mt=/#.*$/,_t=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,Dt=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,Pt=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,Ht=/^(?:GET|HEAD)$/,Bt=/^\/\//,jt=/\?/,Ft=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,It=/^(?:select|textarea)/i,qt=/\s+/,Rt=/([?&])_=[^&]*/,Ut=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,zt=s.fn.load,Wt={},Xt={},Vt,$t,Jt=["*/"]+["*"];try{Vt=i.href}catch(Kt){Vt=n.createElement("a"),Vt.href="",Vt=Vt.href}$t=Ut.exec(Vt.toLowerCase())||[],s.fn.extend({load:function(e,n,r){if(typeof e!="string"&&zt)return zt.apply(this,arguments);if(!this.length)return this;var i=e.indexOf(" ");if(i>=0){var o=e.slice(i,e.length);e=e.slice(0,i)}var u="GET";n&&(s.isFunction(n)?(r=n,n=t):typeof n=="object"&&(n=s.param(n,s.ajaxSettings.traditional),u="POST"));var a=this;return s.ajax({url:e,type:u,dataType:"html",data:n,complete:function(e,t,n){n=e.responseText,e.isResolved()&&(e.done(function(e){n=e}),a.html(o?s("<div>").append(n.replace(Ft,"")).find(o):n)),r&&a.each(r,[n,t,e])}}),this},serialize:function(){return s.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?s.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||It.test(this.nodeName)||Dt.test(this.type))}).map(function(e,t){var n=s(this).val();return n==null?null:s.isArray(n)?s.map(n,function(e,n){return{name:t.name,value:e.replace(Ot,"\r\n")}}):{name:t.name,value:n.replace(Ot,"\r\n")}}).get()}}),s.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(e,t){s.fn[t]=function(e){return this.on(t,e)}}),s.each(["get","post"],function(e,n){s[n]=function(e,r,i,o){return s.isFunction(r)&&(o=o||i,i=r,r=t),s.ajax({type:n,url:e,data:r,success:i,dataType:o})}}),s.extend({getScript:function(e,n){return s.get(e,t,n,"script")},getJSON:function(e,t,n){return s.get(e,t,n,"json")},ajaxSetup:function(e,t){return t?Yt(e,s.ajaxSettings):(t=e,e=s.ajaxSettings),Yt(e,t),e},ajaxSettings:{url:Vt,isLocal:Pt.test($t[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":Jt},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":s.parseJSON,"text xml":s.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:Qt(Wt),ajaxTransport:Qt(Xt),ajax:function(e,n){function S(e,n,c,h){if(y===2)return;y=2,m&&clearTimeout(m),v=t,p=h||"",E.readyState=e>0?4:0;var d,g,w,S=n,x=c?en(r,E,c):t,T,N;if(e>=200&&e<300||e===304){if(r.ifModified){if(T=E.getResponseHeader("Last-Modified"))s.lastModified[l]=T;if(N=E.getResponseHeader("Etag"))s.etag[l]=N}if(e===304)S="notmodified",d=!0;else try{g=tn(r,x),S="success",d=!0}catch(C){S="parsererror",w=C}}else{w=S;if(!S||e)S="error",e<0&&(e=0)}E.status=e,E.statusText=""+(n||S),d?u.resolveWith(i,[g,S,E]):u.rejectWith(i,[E,S,w]),E.statusCode(f),f=t,b&&o.trigger("ajax"+(d?"Success":"Error"),[E,r,d?g:w]),a.fireWith(i,[E,S]),b&&(o.trigger("ajaxComplete",[E,r]),--s.active||s.event.trigger("ajaxStop"))}typeof e=="object"&&(n=e,e=t),n=n||{};var r=s.ajaxSetup({},n),i=r.context||r,o=i!==r&&(i.nodeType||i instanceof s)?s(i):s.event,u=s.Deferred(),a=s.Callbacks("once memory"),f=r.statusCode||{},l,c={},h={},p,d,v,m,g,y=0,b,w,E={readyState:0,setRequestHeader:function(e,t){if(!y){var n=e.toLowerCase();e=h[n]=h[n]||e,c[e]=t}return this},getAllResponseHeaders:function(){return y===2?p:null},getResponseHeader:function(e){var n;if(y===2){if(!d){d={};while(n=_t.exec(p))d[n[1].toLowerCase()]=n[2]}n=d[e.toLowerCase()]}return n===t?null:n},overrideMimeType:function(e){return y||(r.mimeType=e),this},abort:function(e){return e=e||"abort",v&&v.abort(e),S(0,e),this}};u.promise(E),E.success=E.done,E.error=E.fail,E.complete=a.add,E.statusCode=function(e){if(e){var t;if(y<2)for(t in e)f[t]=[f[t],e[t]];else t=e[E.status],E.then(t,t)}return this},r.url=((e||r.url)+"").replace(Mt,"").replace(Bt,$t[1]+"//"),r.dataTypes=s.trim(r.dataType||"*").toLowerCase().split(qt),r.crossDomain==null&&(g=Ut.exec(r.url.toLowerCase()),r.crossDomain=!(!g||g[1]==$t[1]&&g[2]==$t[2]&&(g[3]||(g[1]==="http:"?80:443))==($t[3]||($t[1]==="http:"?80:443)))),r.data&&r.processData&&typeof r.data!="string"&&(r.data=s.param(r.data,r.traditional)),Gt(Wt,r,n,E);if(y===2)return!1;b=r.global,r.type=r.type.toUpperCase(),r.hasContent=!Ht.test(r.type),b&&s.active++===0&&s.event.trigger("ajaxStart");if(!r.hasContent){r.data&&(r.url+=(jt.test(r.url)?"&":"?")+r.data,delete r.data),l=r.url;if(r.cache===!1){var x=s.now(),T=r.url.replace(Rt,"$1_="+x);r.url=T+(T===r.url?(jt.test(r.url)?"&":"?")+"_="+x:"")}}(r.data&&r.hasContent&&r.contentType!==!1||n.contentType)&&E.setRequestHeader("Content-Type",r.contentType),r.ifModified&&(l=l||r.url,s.lastModified[l]&&E.setRequestHeader("If-Modified-Since",s.lastModified[l]),s.etag[l]&&E.setRequestHeader("If-None-Match",s.etag[l])),E.setRequestHeader("Accept",r.dataTypes[0]&&r.accepts[r.dataTypes[0]]?r.accepts[r.dataTypes[0]]+(r.dataTypes[0]!=="*"?", "+Jt+"; q=0.01":""):r.accepts["*"]);for(w in r.headers)E.setRequestHeader(w,r.headers[w]);if(!r.beforeSend||r.beforeSend.call(i,E,r)!==!1&&y!==2){for(w in{success:1,error:1,complete:1})E[w](r[w]);v=Gt(Xt,r,n,E);if(!v)S(-1,"No Transport");else{E.readyState=1,b&&o.trigger("ajaxSend",[E,r]),r.async&&r.timeout>0&&(m=setTimeout(function(){E.abort("timeout")},r.timeout));try{y=1,v.send(c,S)}catch(N){if(!(y<2))throw N;S(-1,N)}}return E}return E.abort(),!1},param:function(e,n){var r=[],i=function(e,t){t=s.isFunction(t)?t():t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};n===t&&(n=s.ajaxSettings.traditional);if(s.isArray(e)||e.jquery&&!s.isPlainObject(e))s.each(e,function(){i(this.name,this.value)});else for(var o in e)Zt(o,e[o],n,i);return r.join("&").replace(Lt,"+")}}),s.extend({active:0,lastModified:{},etag:{}});var nn=s.now(),rn=/(\=)\?(&|$)|\?\?/i;s.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return s.expando+"_"+nn++}}),s.ajaxPrefilter("json jsonp",function(t,n,r){var i=typeof t.data=="string"&&/^application\/x\-www\-form\-urlencoded/.test(t.contentType);if(t.dataTypes[0]==="jsonp"||t.jsonp!==!1&&(rn.test(t.url)||i&&rn.test(t.data))){var o,u=t.jsonpCallback=s.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a=e[u],f=t.url,l=t.data,c="$1"+u+"$2";return t.jsonp!==!1&&(f=f.replace(rn,c),t.url===f&&(i&&(l=l.replace(rn,c)),t.data===l&&(f+=(/\?/.test(f)?"&":"?")+t.jsonp+"="+u))),t.url=f,t.data=l,e[u]=function(e){o=[e]},r.always(function(){e[u]=a,o&&s.isFunction(a)&&e[u](o[0])}),t.converters["script json"]=function(){return o||s.error(u+" was not called"),o[0]},t.dataTypes[0]="json","script"}}),s.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(e){return s.globalEval(e),e}}}),s.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),s.ajaxTransport("script",function(e){if(e.crossDomain){var r,i=n.head||n.getElementsByTagName("head")[0]||n.documentElement;return{send:function(s,o){r=n.createElement("script"),r.async="async",e.scriptCharset&&(r.charset=e.scriptCharset),r.src=e.url,r.onload=r.onreadystatechange=function(e,n){if(n||!r.readyState||/loaded|complete/.test(r.readyState))r.onload=r.onreadystatechange=null,i&&r.parentNode&&i.removeChild(r),r=t,n||o(200,"success")},i.insertBefore(r,i.firstChild)},abort:function(){r&&r.onload(0,1)}}}});var sn=e.ActiveXObject?function(){for(var e in un)un[e](0,1)}:!1,on=0,un;s.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&an()||fn()}:an,function(e){s.extend(s.support,{ajax:!!e,cors:!!e&&"withCredentials"in e})}(s.ajaxSettings.xhr()),s.support.ajax&&s.ajaxTransport(function(n){if(!n.crossDomain||s.support.cors){var r;return{send:function(i,o){var u=n.xhr(),a,f;n.username?u.open(n.type,n.url,n.async,n.username,n.password):u.open(n.type,n.url,n.async);if(n.xhrFields)for(f in n.xhrFields)u[f]=n.xhrFields[f];n.mimeType&&u.overrideMimeType&&u.overrideMimeType(n.mimeType),!n.crossDomain&&!i["X-Requested-With"]&&(i["X-Requested-With"]="XMLHttpRequest");try{for(f in i)u.setRequestHeader(f,i[f])}catch(l){}u.send(n.hasContent&&n.data||null),r=function(e,i){var f,l,c,h,p;try{if(r&&(i||u.readyState===4)){r=t,a&&(u.onreadystatechange=s.noop,sn&&delete un[a]);if(i)u.readyState!==4&&u.abort();else{f=u.status,c=u.getAllResponseHeaders(),h={},p=u.responseXML,p&&p.documentElement&&(h.xml=p);try{h.text=u.responseText}catch(e){}try{l=u.statusText}catch(d){l=""}!f&&n.isLocal&&!n.crossDomain?f=h.text?200:404:f===1223&&(f=204)}}}catch(v){i||o(-1,v)}h&&o(f,l,h,c)},!n.async||u.readyState===4?r():(a=++on,sn&&(un||(un={},s(e).unload(sn)),un[a]=r),u.onreadystatechange=r)},abort:function(){r&&r(0,1)}}}});var ln={},cn,hn,pn=/^(?:toggle|show|hide)$/,dn=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,vn,mn=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],gn;s.fn.extend({show:function(e,t,n){var r,i;if(e||e===0)return this.animate(wn("show",3),e,t,n);for(var o=0,u=this.length;o<u;o++)r=this[o],r.style&&(i=r.style.display,!s._data(r,"olddisplay")&&i==="none"&&(i=r.style.display=""),(i===""&&s.css(r,"display")==="none"||!s.contains(r.ownerDocument.documentElement,r))&&s._data(r,"olddisplay",En(r.nodeName)));for(o=0;o<u;o++){r=this[o];if(r.style){i=r.style.display;if(i===""||i==="none")r.style.display=s._data(r,"olddisplay")||""}}return this},hide:function(e,t,n){if(e||e===0)return this.animate(wn("hide",3),e,t,n);var r,i,o=0,u=this.length;for(;o<u;o++)r=this[o],r.style&&(i=s.css(r,"display"),i!=="none"&&!s._data(r,"olddisplay")&&s._data(r,"olddisplay",i));for(o=0;o<u;o++)this[o].style&&(this[o].style.display="none");return this},_toggle:s.fn.toggle,toggle:function(e,t,n){var r=typeof e=="boolean";return s.isFunction(e)&&s.isFunction(t)?this._toggle.apply(this,arguments):e==null||r?this.each(function(){var t=r?e:s(this).is(":hidden");s(this)[t?"show":"hide"]()}):this.animate(wn("toggle",3),e,t,n),this},fadeTo:function(e,t,n,r){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){function o(){i.queue===!1&&s._mark(this);var t=s.extend({},i),n=this.nodeType===1,r=n&&s(this).is(":hidden"),o,u,a,f,l,c,h,p,d,v,m;t.animatedProperties={};for(a in e){o=s.camelCase(a),a!==o&&(e[o]=e[a],delete e[a]);if((l=s.cssHooks[o])&&"expand"in l){c=l.expand(e[o]),delete e[o];for(a in c)a in e||(e[a]=c[a])}}for(o in e){u=e[o],s.isArray(u)?(t.animatedProperties[o]=u[1],u=e[o]=u[0]):t.animatedProperties[o]=t.specialEasing&&t.specialEasing[o]||t.easing||"swing";if(u==="hide"&&r||u==="show"&&!r)return t.complete.call(this);n&&(o==="height"||o==="width")&&(t.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],s.css(this,"display")==="inline"&&s.css(this,"float")==="none"&&(!s.support.inlineBlockNeedsLayout||En(this.nodeName)==="inline"?this.style.display="inline-block":this.style.zoom=1))}t.overflow!=null&&(this.style.overflow="hidden");for(a in e)f=new s.fx(this,t,a),u=e[a],pn.test(u)?(m=s._data(this,"toggle"+a)||(u==="toggle"?r?"show":"hide":0),m?(s._data(this,"toggle"+a,m==="show"?"hide":"show"),f[m]()):f[u]()):(h=dn.exec(u),p=f.cur(),h?(d=parseFloat(h[2]),v=h[3]||(s.cssNumber[a]?"":"px"),v!=="px"&&(s.style(this,a,(d||1)+v),p=(d||1)/f.cur()*p,s.style(this,a,p+v)),h[1]&&(d=(h[1]==="-="?-1:1)*d+p),f.custom(p,d,v)):f.custom(p,u,""));return!0}var i=s.speed(t,n,r);return s.isEmptyObject(e)?this.each(i.complete,[!1]):(e=s.extend({},e),i.queue===!1?this.each(o):this.queue(i.queue,o))},stop:function(e,n,r){return typeof e!="string"&&(r=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){function u(e,t,n){var i=t[n];s.removeData(e,n,!0),i.stop(r)}var t,n=!1,i=s.timers,o=s._data(this);r||s._unmark(!0,this);if(e==null)for(t in o)o[t]&&o[t].stop&&t.indexOf(".run")===t.length-4&&u(this,o,t);else o[t=e+".run"]&&o[t].stop&&u(this,o,t);for(t=i.length;t--;)i[t].elem===this&&(e==null||i[t].queue===e)&&(r?i[t](!0):i[t].saveState(),n=!0,i.splice(t,1));(!r||!n)&&s.dequeue(this,e)})}}),s.each({slideDown:wn("show",1),slideUp:wn("hide",1),slideToggle:wn("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){s.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),s.extend({speed:function(e,t,n){var r=e&&typeof e=="object"?s.extend({},e):{complete:n||!n&&t||s.isFunction(e)&&e,duration:e,easing:n&&t||t&&!s.isFunction(t)&&t};r.duration=s.fx.off?0:typeof r.duration=="number"?r.duration:r.duration in s.fx.speeds?s.fx.speeds[r.duration]:s.fx.speeds._default;if(r.queue==null||r.queue===!0)r.queue="fx";return r.old=r.complete,r.complete=function(e){s.isFunction(r.old)&&r.old.call(this),r.queue?s.dequeue(this,r.queue):e!==!1&&s._unmark(this)},r},easing:{linear:function(e){return e},swing:function(e){return-Math.cos(e*Math.PI)/2+.5}},timers:[],fx:function(e,t,n){this.options=t,this.elem=e,this.prop=n,t.orig=t.orig||{}}}),s.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(s.fx.step[this.prop]||s.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]==null||!!this.elem.style&&this.elem.style[this.prop]!=null){var e,t=s.css(this.elem,this.prop);return isNaN(e=parseFloat(t))?!t||t==="auto"?0:t:e}return this.elem[this.prop]},custom:function(e,n,r){function u(e){return i.step(e)}var i=this,o=s.fx;this.startTime=gn||yn(),this.end=n,this.now=this.start=e,this.pos=this.state=0,this.unit=r||this.unit||(s.cssNumber[this.prop]?"":"px"),u.queue=this.options.queue,u.elem=this.elem,u.saveState=function(){s._data(i.elem,"fxshow"+i.prop)===t&&(i.options.hide?s._data(i.elem,"fxshow"+i.prop,i.start):i.options.show&&s._data(i.elem,"fxshow"+i.prop,i.end))},u()&&s.timers.push(u)&&!vn&&(vn=setInterval(o.tick,o.interval))},show:function(){var e=s._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=e||s.style(this.elem,this.prop),this.options.show=!0,e!==t?this.custom(this.cur(),e):this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur()),s(this.elem).show()},hide:function(){this.options.orig[this.prop]=s._data(this.elem,"fxshow"+this.prop)||s.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(e){var t,n,r,i=gn||yn(),o=!0,u=this.elem,a=this.options;if(e||i>=a.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),a.animatedProperties[this.prop]=!0;for(t in a.animatedProperties)a.animatedProperties[t]!==!0&&(o=!1);if(o){a.overflow!=null&&!s.support.shrinkWrapBlocks&&s.each(["","X","Y"],function(e,t){u.style["overflow"+t]=a.overflow[e]}),a.hide&&s(u).hide();if(a.hide||a.show)for(t in a.animatedProperties)s.style(u,t,a.orig[t]),s.removeData(u,"fxshow"+t,!0),s.removeData(u,"toggle"+t,!0);r=a.complete,r&&(a.complete=!1,r.call(u))}return!1}return a.duration==Infinity?this.now=i:(n=i-this.startTime,this.state=n/a.duration,this.pos=s.easing[a.animatedProperties[this.prop]](this.state,n,0,1,a.duration),this.now=this.start+(this.end-this.start)*this.pos),this.update(),!0}},s.extend(s.fx,{tick:function(){var e,t=s.timers,n=0;for(;n<t.length;n++)e=t[n],!e()&&t[n]===e&&t.splice(n--,1);t.length||s.fx.stop()},interval:13,stop:function(){clearInterval(vn),vn=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(e){s.style(e.elem,"opacity",e.now)},_default:function(e){e.elem.style&&e.elem.style[e.prop]!=null?e.elem.style[e.prop]=e.now+e.unit:e.elem[e.prop]=e.now}}}),s.each(mn.concat.apply([],mn),function(e,t){t.indexOf("margin")&&(s.fx.step[t]=function(e){s.style(e.elem,t,Math.max(0,e.now)+e.unit)})}),s.expr&&s.expr.filters&&(s.expr.filters.animated=function(e){return s.grep(s.timers,function(t){return e===t.elem}).length});var Sn,xn=/^t(?:able|d|h)$/i,Tn=/^(?:body|html)$/i;"getBoundingClientRect"in n.documentElement?Sn=function(e,t,n,r){try{r=e.getBoundingClientRect()}catch(i){}if(!r||!s.contains(n,e))return r?{top:r.top,left:r.left}:{top:0,left:0};var o=t.body,u=Nn(t),a=n.clientTop||o.clientTop||0,f=n.clientLeft||o.clientLeft||0,l=u.pageYOffset||s.support.boxModel&&n.scrollTop||o.scrollTop,c=u.pageXOffset||s.support.boxModel&&n.scrollLeft||o.scrollLeft,h=r.top+l-a,p=r.left+c-f;return{top:h,left:p}}:Sn=function(e,t,n){var r,i=e.offsetParent,o=e,u=t.body,a=t.defaultView,f=a?a.getComputedStyle(e,null):e.currentStyle,l=e.offsetTop,c=e.offsetLeft;while((e=e.parentNode)&&e!==u&&e!==n){if(s.support.fixedPosition&&f.position==="fixed")break;r=a?a.getComputedStyle(e,null):e.currentStyle,l-=e.scrollTop,c-=e.scrollLeft,e===i&&(l+=e.offsetTop,c+=e.offsetLeft,s.support.doesNotAddBorder&&(!s.support.doesAddBorderForTableAndCells||!xn.test(e.nodeName))&&(l+=parseFloat(r.borderTopWidth)||0,c+=parseFloat(r.borderLeftWidth)||0),o=i,i=e.offsetParent),s.support.subtractsBorderForOverflowNotVisible&&r.overflow!=="visible"&&(l+=parseFloat(r.borderTopWidth)||0,c+=parseFloat(r.borderLeftWidth)||0),f=r}if(f.position==="relative"||f.position==="static")l+=u.offsetTop,c+=u.offsetLeft;return s.support.fixedPosition&&f.position==="fixed"&&(l+=Math.max(n.scrollTop,u.scrollTop),c+=Math.max(n.scrollLeft,u.scrollLeft)),{top:l,left:c}},s.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){s.offset.setOffset(this,e,t)});var n=this[0],r=n&&n.ownerDocument;return r?n===r.body?s.offset.bodyOffset(n):Sn(n,r,r.documentElement):null},s.offset={bodyOffset:function(e){var t=e.offsetTop,n=e.offsetLeft;return s.support.doesNotIncludeMarginInBodyOffset&&(t+=parseFloat(s.css(e,"marginTop"))||0,n+=parseFloat(s.css(e,"marginLeft"))||0),{top:t,left:n}},setOffset:function(e,t,n){var r=s.css(e,"position");r==="static"&&(e.style.position="relative");var i=s(e),o=i.offset(),u=s.css(e,"top"),a=s.css(e,"left"),f=(r==="absolute"||r==="fixed")&&s.inArray("auto",[u,a])>-1,l={},c={},h,p;f?(c=i.position(),h=c.top,p=c.left):(h=parseFloat(u)||0,p=parseFloat(a)||0),s.isFunction(t)&&(t=t.call(e,n,o)),t.top!=null&&(l.top=t.top-o.top+h),t.left!=null&&(l.left=t.left-o.left+p),"using"in t?t.using.call(e,l):i.css(l)}},s.fn.extend({position:function(){if(!this[0])return null;var e=this[0],t=this.offsetParent(),n=this.offset(),r=Tn.test(t[0].nodeName)?{top:0,left:0}:t.offset();return n.top-=parseFloat(s.css(e,"marginTop"))||0,n.left-=parseFloat(s.css(e,"marginLeft"))||0,r.top+=parseFloat(s.css(t[0],"borderTopWidth"))||0,r.left+=parseFloat(s.css(t[0],"borderLeftWidth"))||0,{top:n.top-r.top,left:n.left-r.left}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||n.body;while(e&&!Tn.test(e.nodeName)&&s.css(e,"position")==="static")e=e.offsetParent;return e})}}),s.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var r=/Y/.test(n);s.fn[e]=function(i){return s.access(this,function(e,i,o){var u=Nn(e);if(o===t)return u?n in u?u[n]:s.support.boxModel&&u.document.documentElement[i]||u.document.body[i]:e[i];u?u.scrollTo(r?s(u).scrollLeft():o,r?o:s(u).scrollTop()):e[i]=o},e,i,arguments.length,null)}}),s.each({Height:"height",Width:"width"},function(e,n){var r="client"+e,i="scroll"+e,o="offset"+e;s.fn["inner"+e]=function(){var e=this[0];return e?e.style?parseFloat(s.css(e,n,"padding")):this[n]():null},s.fn["outer"+e]=function(e){var t=this[0];return t?t.style?parseFloat(s.css(t,n,e?"margin":"border")):this[n]():null},s.fn[n]=function(e){return s.access(this,function(e,n,u){var a,f,l,c;if(s.isWindow(e))return a=e.document,f=a.documentElement[r],s.support.boxModel&&f||a.body&&a.body[r]||f;if(e.nodeType===9)return a=e.documentElement,a[r]>=a[i]?a[r]:Math.max(e.body[i],a[i],e.body[o],a[o]);if(u===t)return l=s.css(e,n),c=parseFloat(l),s.isNumeric(c)?c:l;s(e).css(n,u)},n,e,arguments.length,null)}}),e.jQuery=e.$=s,typeof define=="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return s})})(window),function(e){function t(t,r){if(e.fn.ThreeDots.c_settings.allow_dangle==1)return!1;var i=e(t).children("."+e.fn.ThreeDots.c_settings.e_span_class).get(0),s=e(i).css("display"),o=n(t,r);e(i).css("display","none");var u=n(t,r);return e(i).css("display",s),o>u?!0:!1}function n(t,n){var r=typeof n;if(r=="object"||r==undefined)return e(t).height()/n.lh;if(r=="boolean"){var s=i(e(t));return{lh:s}}}function r(t){var n,r=e.fn.ThreeDots.c_settings.valid_delimiters;t=jQuery.trim(t);var i=-1,s=null,o=null;return jQuery.each(r,function(e,n){if((new String(n)).length!=1||n==null)return!1;var r=t.lastIndexOf(n);r!=-1&&r>i&&(i=r,s=t.substring(i+1),o=n)}),i>0?{updated_string:jQuery.trim(t.substring(0,i)),word:s,del:o}:{updated_string:"",word:jQuery.trim(t),del:null}}function i(t){e(t).append("<div id='temp_ellipsis_div' style='position:absolute; visibility:hidden'>H</div>");var n=e("#temp_ellipsis_div").height();return e("#temp_ellipsis_div").remove(),n}function s(t,r,i){var s=e(r).text(),o=s,u=e.fn.ThreeDots.c_settings.max_rows,a,f,l,c,h,p;if(n(t,i)<=u)return;p=0,curr_length=o.length,curr_middle=Math.floor((curr_length-p)/2),a=s.substring(p,p+curr_middle),f=s.substring(p+curr_middle);while(curr_middle!=0)e(r).text(a),n(t,i)<=u?(h=Math.floor(f.length/2),l=f.substring(0,h),p=a.length,o=a+l,curr_length=o.length,e(r).text(o)):(o=a,curr_length=o.length),curr_middle=Math.floor((curr_length-p)/2),a=s.substring(0,p+curr_middle),f=s.substring(p+curr_middle)}e.fn.ThreeDots=function(t){var n=this;if(typeof t=="object"||t==undefined){e.fn.ThreeDots.the_selected=this;var n=e.fn.ThreeDots.update(t)}return n},e.fn.ThreeDots.update=function(i){var o,u=null,a,f,l,c,h,p,d,v,m,g;if(typeof i=="object"||i==undefined){e.fn.ThreeDots.c_settings=e.extend({},e.fn.ThreeDots.settings,i);var y=e.fn.ThreeDots.c_settings.max_rows;if(y<1)return e.fn.ThreeDots.the_selected;var b=!1;jQuery.each(e.fn.ThreeDots.c_settings.valid_delimiters,function(e,t){(new String(t)).length==1&&(b=!0)});if(b==0)return e.fn.ThreeDots.the_selected;e.fn.ThreeDots.the_selected.each(function(){o=e(this);if(e(o).children("."+e.fn.ThreeDots.c_settings.text_span_class).length==0)return!0;p=e(o).children("."+e.fn.ThreeDots.c_settings.text_span_class).get(0);var i=n(o,!0),a=e(p).text();s(o,p,i);var f=e(p).text();(m=e(o).attr("threedots"))!=undefined&&(e(p).text(m),e(o).children("."+e.fn.ThreeDots.c_settings.e_span_class).remove()),v=e(p).text(),v.length<=0&&(v=""),e(o).attr("threedots",a);if(n(o,i)>y){curr_ellipsis=e(o).append('<span style="white-space:nowrap" class="'+e.fn.ThreeDots.c_settings.e_span_class+'">'+e.fn.ThreeDots.c_settings.ellipsis_string+"</span>");while(n(o,i)>y){d=r(e(p).text()),e(p).text(d.updated_string),u=d.word,g=d.del;if(g==null)break}if(u!=null){var l=t(o,i);if(n(o,i)<=y-1||l||!e.fn.ThreeDots.c_settings.whole_word){v=e(p).text(),d.del!=null&&e(p).text(v+g);if(n(o,i)>y)e(p).text(v);else{e(p).text(e(p).text()+u);if(n(o,i)>y+1||!e.fn.ThreeDots.c_settings.whole_word||f==u||l)while(n(o,i)>y){if(!(e(p).text().length>0))break;e(p).text(e(p).text().substr(0,e(p).text().length-1))}}}}}a==e(e(o).children("."+e.fn.ThreeDots.c_settings.text_span_class).get(0)).text()?e(o).children("."+e.fn.ThreeDots.c_settings.e_span_class).remove():e(o).children("."+e.fn.ThreeDots.c_settings.e_span_class).
length>0&&(e.fn.ThreeDots.c_settings.alt_text_t&&e(o).children("."+e.fn.ThreeDots.c_settings.text_span_class).attr("title",a),e.fn.ThreeDots.c_settings.alt_text_e&&e(o).children("."+e.fn.ThreeDots.c_settings.e_span_class).attr("title",a))})}return e.fn.ThreeDots.the_selected},e.fn.ThreeDots.settings={valid_delimiters:[" ",",","."],ellipsis_string:"...",max_rows:2,text_span_class:"ellipsis_text",e_span_class:"threedots_ellipsis",whole_word:!0,allow_dangle:!1,alt_text_e:!1,alt_text_t:!1}}(jQuery),function(e){function n(t){var n=t||window.event,r=[].slice.call(arguments,1),i=0,s=!0,o=0,u=0;return t=e.event.fix(n),t.type="mousewheel",t.wheelDelta&&(i=t.wheelDelta/120),t.detail&&(i=-t.detail/3),u=i,n.axis!==undefined&&n.axis===n.HORIZONTAL_AXIS&&(u=0,o=-1*i),n.wheelDeltaY!==undefined&&(u=n.wheelDeltaY/120),n.wheelDeltaX!==undefined&&(o=-1*n.wheelDeltaX/120),r.unshift(t,i,o,u),e.event.handle.apply(this,r)}var t=["DOMMouseScroll","mousewheel"];e.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var e=t.length;e;)this.addEventListener(t[--e],n,!1);else this.onmousewheel=n},teardown:function(){if(this.removeEventListener)for(var e=t.length;e;)this.removeEventListener(t[--e],n,!1);else this.onmousewheel=null}},e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}(jQuery),function(e,t,n){e.fn.jScrollPane=function(r){function i(r,i){function V(t){var i,o,g,y,w,E,x=!1,T=!1;s=t;if(u===n)w=r.scrollTop(),E=r.scrollLeft(),r.css({overflow:"hidden",padding:0}),a=r.innerWidth()+F,f=r.innerHeight(),r.width(a),u=e('<div class="jspPane" />').css("padding",j).append(r.children()),l=e('<div class="jspContainer" />').css({width:a+"px",height:f+"px"}).append(u).appendTo(r);else{r.css("width",""),x=s.stickToBottom&&mt(),T=s.stickToRight&&gt(),y=r.innerWidth()+F!=a||r.outerHeight()!=f,y&&(a=r.innerWidth()+F,f=r.innerHeight(),l.css({width:a+"px",height:f+"px"}));if(!y&&I==c&&u.outerHeight()==h){r.width(a);return}I=c,u.css("width",""),r.width(a),l.find(">.jspVerticalBar,>.jspHorizontalBar").remove().end()}u.css("overflow","auto"),t.contentWidth?c=t.contentWidth:c=u[0].scrollWidth,h=u[0].scrollHeight,u.css("overflow",""),p=c/a,d=h/f,v=d>1,m=s.isScrollableH!==n?s.isScrollableH:p>1,!m&&!v?(r.removeClass("jspScrollable"),u.css({top:0,width:l.width()-F}),bt(),St(),Tt(),rt()):(r.addClass("jspScrollable"),i=s.maintainPosition&&(b||S),i&&(o=dt(),g=vt()),J(),Q(),Y(),i&&(ht(T?c-a:o,!1),ct(x?h-f:g,!1)),Et(),yt(),kt(),s.enableKeyboardNavigation&&xt(),s.clickOnTrack&&nt(),Nt(),s.hijackInternalLinks&&Ct()),s.autoReinitialise&&!B?B=setInterval(function(){V(s)},s.autoReinitialiseDelay):!s.autoReinitialise&&B&&clearInterval(B),w&&r.scrollTop(0)&&ct(w,!1),E&&r.scrollLeft(0)&&ht(E,!1),r.trigger("jsp-initialised",[m||v])}function J(){v&&(l.append(e('<div class="jspVerticalBar" />').append(e('<div class="jspCap jspCapTop" />'),e('<div class="jspTrack" />').append(e('<div class="jspDrag" />').append(e('<div class="jspDragTop" />'),e('<div class="jspDragBottom" />'))),e('<div class="jspCap jspCapBottom" />'))),x=l.find(">.jspVerticalBar"),T=x.find(">.jspTrack"),g=T.find(">.jspDrag"),s.showArrows&&(L=e('<a class="jspArrow jspArrowUp" />').bind("mousedown.jsp",et(0,-1)).bind("click.jsp",wt),A=e('<a class="jspArrow jspArrowDown" />').bind("mousedown.jsp",et(0,1)).bind("click.jsp",wt),s.arrowScrollOnHover&&(L.bind("mouseover.jsp",et(0,-1,L)),A.bind("mouseover.jsp",et(0,1,A))),Z(T,s.verticalArrowPositions,L,A)),C=f,l.find(">.jspVerticalBar>.jspCap:visible,>.jspVerticalBar>.jspArrow").each(function(){C-=e(this).outerHeight()}),g.hover(function(){g.addClass("jspHover")},function(){g.removeClass("jspHover")}).bind("mousedown.jsp",function(t){e("html").bind("dragstart.jsp selectstart.jsp",wt),g.addClass("jspActive");var n=t.pageY-g.position().top;return e("html").bind("mousemove.jsp",function(e){st(e.pageY-n,!1)}).bind("mouseup.jsp mouseleave.jsp",it),!1}),K())}function K(){T.height(C+"px"),b=0,N=s.verticalGutter+T.outerWidth(),u.width(a-N-F);try{x.position().left===0&&u.css("margin-left",N+"px")}catch(e){}}function Q(){m&&(l.append(e('<div class="jspHorizontalBar" />').append(e('<div class="jspCap jspCapLeft" />'),e('<div class="jspTrack" />').append(e('<div class="jspDrag" />').append(e('<div class="jspDragLeft" />'),e('<div class="jspDragRight" />'))),e('<div class="jspCap jspCapRight" />'))),O=l.find(">.jspHorizontalBar"),M=O.find(">.jspTrack"),w=M.find(">.jspDrag"),s.showArrows&&(P=e('<a class="jspArrow jspArrowLeft" />').bind("mousedown.jsp",et(-1,0)).bind("click.jsp",wt),H=e('<a class="jspArrow jspArrowRight" />').bind("mousedown.jsp",et(1,0)).bind("click.jsp",wt),s.arrowScrollOnHover&&(P.bind("mouseover.jsp",et(-1,0,P)),H.bind("mouseover.jsp",et(1,0,H))),Z(M,s.horizontalArrowPositions,P,H)),w.hover(function(){w.addClass("jspHover")},function(){w.removeClass("jspHover")}).bind("mousedown.jsp",function(t){e("html").bind("dragstart.jsp selectstart.jsp",wt),w.addClass("jspActive");var n=t.pageX-w.position().left;return e("html").bind("mousemove.jsp",function(e){ut(e.pageX-n,!1)}).bind("mouseup.jsp mouseleave.jsp",it),!1}),_=l.innerWidth(),G())}function G(){l.find(">.jspHorizontalBar>.jspCap:visible,>.jspHorizontalBar>.jspArrow").each(function(){_-=e(this).outerWidth()}),M.width(_+"px"),S=0}function Y(){if(m&&v){var t=M.outerHeight(),n=T.outerWidth();C-=t,e(O).find(">.jspCap:visible,>.jspArrow").each(function(){_+=e(this).outerWidth()}),_-=n,f-=n,a-=t,M.parent().append(e('<div class="jspCorner" />').css("width",t+"px")),K(),G()}m&&u.width(l.outerWidth()-F+"px"),h=u.outerHeight(),d=h/f,m&&(D=Math.ceil(1/p*_),D>s.horizontalDragMaxWidth?D=s.horizontalDragMaxWidth:D<s.horizontalDragMinWidth&&(D=s.horizontalDragMinWidth),w.width(D+"px"),E=_-D,at(S)),v&&(k=Math.ceil(1/d*C),k>s.verticalDragMaxHeight?k=s.verticalDragMaxHeight:k<s.verticalDragMinHeight&&(k=s.verticalDragMinHeight),g.height(k+"px"),y=C-k,ot(b))}function Z(e,t,n,r){var i="before",s="after",o;t=="os"&&(t=/Mac/.test(navigator.platform)?"after":"split"),t==i?s=t:t==s&&(i=t,o=n,n=r,r=o),e[i](n)[s](r)}function et(e,t,n){return function(){return tt(e,t,this,n),this.blur(),!1}}function tt(t,n,r,i){r=e(r).addClass("jspActive");var u,a,f=!0,l=function(){t!==0&&o.scrollByX(t*s.arrowButtonSpeed),n!==0&&o.scrollByY(n*s.arrowButtonSpeed),a=setTimeout(l,f?s.initialDelay:s.arrowRepeatFreq),f=!1};l(),u=i?"mouseout.jsp":"mouseup.jsp",i=i||e("html"),i.bind(u,function(){r.removeClass("jspActive"),a&&clearTimeout(a),a=null,i.unbind(u)})}function nt(){rt(),v&&T.bind("mousedown.jsp",function(t){if(t.originalTarget===n||t.originalTarget==t.currentTarget){var r=e(this),i=r.offset(),u=t.pageY-i.top-b,a,l=!0,c=function(){var e=r.offset(),n=t.pageY-e.top-k/2,i=f*s.scrollPagePercent,d=y*i/(h-f);if(u<0)b-d>n?o.scrollByY(-i):st(n);else{if(!(u>0)){p();return}b+d<n?o.scrollByY(i):st(n)}a=setTimeout(c,l?s.initialDelay:s.trackClickRepeatFreq),l=!1},p=function(){a&&clearTimeout(a),a=null,e(document).unbind("mouseup.jsp",p)};return c(),e(document).bind("mouseup.jsp",p),!1}}),m&&M.bind("mousedown.jsp",function(t){if(t.originalTarget===n||t.originalTarget==t.currentTarget){var r=e(this),i=r.offset(),u=t.pageX-i.left-S,f,l=!0,h=function(){var e=r.offset(),n=t.pageX-e.left-D/2,i=a*s.scrollPagePercent,d=E*i/(c-a);if(u<0)S-d>n?o.scrollByX(-i):ut(n);else{if(!(u>0)){p();return}S+d<n?o.scrollByX(i):ut(n)}f=setTimeout(h,l?s.initialDelay:s.trackClickRepeatFreq),l=!1},p=function(){f&&clearTimeout(f),f=null,e(document).unbind("mouseup.jsp",p)};return h(),e(document).bind("mouseup.jsp",p),!1}})}function rt(){M&&M.unbind("mousedown.jsp"),T&&T.unbind("mousedown.jsp")}function it(){e("html").unbind("dragstart.jsp selectstart.jsp mousemove.jsp mouseup.jsp mouseleave.jsp"),g&&g.removeClass("jspActive"),w&&w.removeClass("jspActive")}function st(e,t){if(!v)return;e<0?e=0:e>y&&(e=y),t===n&&(t=s.animateScroll),t?o.animate(g,"top",e,ot):(g.css("top",e),ot(e))}function ot(e){e===n&&(e=g.position().top),l.scrollTop(0),b=e;var t=b===0,i=b==y,s=e/y,o=-s*(h-f);if(q!=t||U!=i)q=t,U=i,r.trigger("jsp-arrow-change",[q,U,R,z]);ft(t,i),u.css("top",o),r.trigger("jsp-scroll-y",[-o,t,i]).trigger("scroll")}function ut(e,t){if(!m)return;e<0?e=0:e>E&&(e=E),t===n&&(t=s.animateScroll),t?o.animate(w,"left",e,at):(w.css("left",e),at(e))}function at(e){e===n&&(e=w.position().left),l.scrollTop(0),S=e;var t=S===0,i=S==E,s=e/E,o=-s*(c-a);if(R!=t||z!=i)R=t,z=i,r.trigger("jsp-arrow-change",[q,U,R,z]);lt(t,i),u.css("left",o),r.trigger("jsp-scroll-x",[-o,t,i]).trigger("scroll")}function ft(e,t){s.showArrows&&(L[e?"addClass":"removeClass"]("jspDisabled"),A[t?"addClass":"removeClass"]("jspDisabled"))}function lt(e,t){s.showArrows&&(P[e?"addClass":"removeClass"]("jspDisabled"),H[t?"addClass":"removeClass"]("jspDisabled"))}function ct(e,t){var n=e/(h-f);st(n*y,t)}function ht(e,t){var n=e/(c-a);ut(n*E,t)}function pt(t,n,r){var i,o,u,c=0,h=0,p,d,v,m,g,y;try{i=e(t)}catch(b){return}o=i.outerHeight(),u=i.outerWidth(),l.scrollTop(0),l.scrollLeft(0);while(!i.is(".jspPane")){c+=i.position().top,h+=i.position().left,i=i.offsetParent();if(/^body|html$/i.test(i[0].nodeName))return}p=vt(),v=p+f,c<p||n?g=c-s.verticalGutter:c+o>v&&(g=c-f+o+s.verticalGutter),g&&ct(g,r),d=dt(),m=d+a,h<d||n?y=h-s.horizontalGutter:h+u>m&&(y=h-a+u+s.horizontalGutter),y&&ht(y,r)}function dt(){return-u.position().left}function vt(){return-u.position().top}function mt(){var e=h-f;return e>20&&e-vt()<10}function gt(){var e=c-a;return e>20&&e-dt()<10}function yt(){l.unbind(X).bind(X,function(e,t,n,r){var i=S,u=b;return o.scrollBy(n*s.mouseWheelSpeed,-r*s.mouseWheelSpeed,!1),i==S&&u==b})}function bt(){l.unbind(X)}function wt(){return!1}function Et(){u.find(":input,a").unbind("focus.jsp").bind("focus.jsp",function(e){pt(e.target,!1)})}function St(){u.find(":input,a").unbind("focus.jsp")}function xt(){function a(){var e=S,r=b;switch(t){case 40:o.scrollByY(s.keyboardSpeed,!1);break;case 38:o.scrollByY(-s.keyboardSpeed,!1);break;case 34:case 32:o.scrollByY(f*s.scrollPagePercent,!1);break;case 33:o.scrollByY(-f*s.scrollPagePercent,!1);break;case 39:o.scrollByX(s.keyboardSpeed,!1);break;case 37:o.scrollByX(-s.keyboardSpeed,!1)}return n=e!=S||r!=b,n}var t,n,i=[];m&&i.push(O[0]),v&&i.push(x[0]),u.focus(function(){r.focus()}),r.attr("tabindex",0).unbind("keydown.jsp keypress.jsp").bind("keydown.jsp",function(r){if(r.target!==this&&(!i.length||!e(r.target).closest(i).length))return;var s=S,o=b;switch(r.keyCode){case 40:case 38:case 34:case 32:case 33:case 39:case 37:t=r.keyCode,a();break;case 35:ct(h-f),t=null;break;case 36:ct(0),t=null}return n=r.keyCode==t&&s!=S||o!=b,!n}).bind("keypress.jsp",function(e){return e.keyCode==t&&a(),!n}),s.hideFocus?(r.css("outline","none"),"hideFocus"in l[0]&&r.attr("hideFocus",!0)):(r.css("outline",""),"hideFocus"in l[0]&&r.attr("hideFocus",!1))}function Tt(){r.attr("tabindex","-1").removeAttr("tabindex").unbind("keydown.jsp keypress.jsp")}function Nt(){if(location.hash&&location.hash.length>1){var t,n,r=escape(location.hash.substr(1));try{t=e("#"+r+', a[name="'+r+'"]')}catch(i){return}t.length&&u.find(r)&&(l.scrollTop()===0?n=setInterval(function(){l.scrollTop()>0&&(pt(t,!0),e(document).scrollTop(l.position().top),clearInterval(n))},50):(pt(t,!0),e(document).scrollTop(l.position().top)))}}function Ct(){if(e(document.body).data("jspHijack"))return;e(document.body).data("jspHijack",!0),e(document.body).delegate("a[href*=#]","click",function(n){var r=this.href.substr(0,this.href.indexOf("#")),i=location.href,s,o,u,a,f,l;location.href.indexOf("#")!==-1&&(i=location.href.substr(0,location.href.indexOf("#")));if(r!==i)return;s=escape(this.href.substr(this.href.indexOf("#")+1)),o;try{o=e("#"+s+', a[name="'+s+'"]')}catch(c){return}if(!o.length)return;u=o.closest(".jspScrollable"),a=u.data("jsp"),a.scrollToElement(o,!0),u[0].scrollIntoView&&(f=e(t).scrollTop(),l=o.offset().top,(l<f||l>f+e(t).height())&&u[0].scrollIntoView()),n.preventDefault()})}function kt(){var e,t,n,r,i,s=!1;l.unbind("touchstart.jsp touchmove.jsp touchend.jsp click.jsp-touchclick").bind("touchstart.jsp",function(o){var u=o.originalEvent.touches[0];e=dt(),t=vt(),n=u.pageX,r=u.pageY,i=!1,s=!0}).bind("touchmove.jsp",function(u){if(!s)return;var a=u.originalEvent.touches[0],f=S,l=b;return o.scrollTo(e+n-a.pageX,t+r-a.pageY),i=i||Math.abs(n-a.pageX)>5||Math.abs(r-a.pageY)>5,f==S&&l==b}).bind("touchend.jsp",function(e){s=!1}).bind("click.jsp-touchclick",function(e){if(i)return i=!1,!1})}function Lt(){var e=vt(),t=dt();r.removeClass("jspScrollable").unbind(".jsp"),r.replaceWith(W.append(u.children())),W.scrollTop(e),W.scrollLeft(t),B&&clearInterval(B)}var s,o=this,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I,q=!0,R=!0,U=!1,z=!1,W=r.clone(!1,!1).empty(),X=e.fn.mwheelIntent?"mwheelIntent.jsp":"mousewheel.jsp";j=r.css("paddingTop")+" "+r.css("paddingRight")+" "+r.css("paddingBottom")+" "+r.css("paddingLeft"),F=(parseInt(r.css("paddingLeft"),10)||0)+(parseInt(r.css("paddingRight"),10)||0),e.extend(o,{reinitialise:function(t){t=e.extend({},s,t),V(t)},scrollToElement:function(e,t,n){pt(e,t,n)},scrollTo:function(e,t,n){ht(e,n),ct(t,n)},scrollToX:function(e,t){ht(e,t)},scrollToY:function(e,t){ct(e,t)},scrollToPercentX:function(e,t){ht(e*(c-a),t)},scrollToPercentY:function(e,t){ct(e*(h-f),t)},scrollBy:function(e,t,n){o.scrollByX(e,n),o.scrollByY(t,n)},scrollByX:function(e,t){var n=dt()+Math[e<0?"floor":"ceil"](e),r=n/(c-a);ut(r*E,t)},scrollByY:function(e,t){var n=vt()+Math[e<0?"floor":"ceil"](e),r=n/(h-f);st(r*y,t)},positionDragX:function(e,t){ut(e,t)},positionDragY:function(e,t){st(e,t)},animate:function(e,t,n,r){var i={};i[t]=n,e.animate(i,{duration:s.animateDuration,easing:s.animateEase,queue:!1,step:r})},getContentPositionX:function(){return dt()},getContentPositionY:function(){return vt()},getContentWidth:function(){return c},getContentHeight:function(){return h},getPercentScrolledX:function(){return dt()/(c-a)},getPercentScrolledY:function(){return vt()/(h-f)},getIsScrollableH:function(){return m},getIsScrollableV:function(){return v},getContentPane:function(){return u},scrollToBottom:function(e){st(y,e)},hijackInternalLinks:e.noop,destroy:function(){Lt()}}),V(i)}return r=e.extend({},e.fn.jScrollPane.defaults,r),e.each(["mouseWheelSpeed","arrowButtonSpeed","trackClickSpeed","keyboardSpeed"],function(){r[this]=r[this]||r.speed}),this.each(function(){var t=e(this),n=t.data("jsp");n?n.reinitialise(r):(n=new i(t,r),t.data("jsp",n))})},e.fn.jScrollPane.defaults={showArrows:!1,maintainPosition:!0,stickToBottom:!1,stickToRight:!1,clickOnTrack:!0,autoReinitialise:!1,autoReinitialiseDelay:500,verticalDragMinHeight:0,verticalDragMaxHeight:99999,horizontalDragMinWidth:0,horizontalDragMaxWidth:99999,contentWidth:n,animateScroll:!1,animateDuration:300,animateEase:"linear",hijackInternalLinks:!1,verticalGutter:4,horizontalGutter:4,mouseWheelSpeed:0,arrowButtonSpeed:0,arrowRepeatFreq:50,arrowScrollOnHover:!1,trackClickSpeed:0,trackClickRepeatFreq:70,verticalArrowPositions:"split",horizontalArrowPositions:"split",enableKeyboardNavigation:!0,hideFocus:!1,keyboardSpeed:0,initialDelay:300,speed:30,scrollPagePercent:.8}}(jQuery,this),function(e){function t(t){this.input=t,t.attr("type")=="password"&&this.handlePassword(),e(t[0].form).submit(function(){t.hasClass("placeholder")&&t[0].value==t.attr("placeholder")&&(t[0].value="")})}t.prototype={show:function(e){if(this.input[0].value===""||e&&this.valueIsPlaceholder()){if(this.isPassword)try{this.input[0].setAttribute("type","text")}catch(t){this.input.before(this.fakePassword.show()).hide()}this.input.addClass("placeholder"),this.input[0].value=this.input.attr("placeholder")}},hide:function(){if(this.valueIsPlaceholder()&&this.input.hasClass("placeholder")){this.input.removeClass("placeholder"),this.input[0].value="";if(this.isPassword){try{this.input[0].setAttribute("type","password")}catch(e){}this.input.show(),this.input[0].focus()}}},valueIsPlaceholder:function(){return this.input[0].value==this.input.attr("placeholder")},handlePassword:function(){var t=this.input;t.attr("realType","password"),this.isPassword=!0;if(e.browser.msie&&t[0].outerHTML){var n=e(t[0].outerHTML.replace(/type=(['"])?password\1/gi,"type=$1text$1"));this.fakePassword=n.val(t.attr("placeholder")).addClass("placeholder").focus(function(){t.trigger("focus"),e(this).hide()}),e(t[0].form).submit(function(){n.remove(),t.show()})}}};var n="placeholder"in document.createElement("input");e.fn.placeholder=function(){return n?this:this.each(function(){var n=e(this),r=new t(n);r.show(!0),n.focus(function(){r.hide()}),n.blur(function(){r.show(!1)}),e.browser.msie&&(e(window).load(function(){n.val()&&n.removeClass("placeholder"),r.show(!0)}),n.focus(function(){if(this.value==""){var e=this.createTextRange();e.collapse(!0),e.moveStart("character",0),e.select()}}))})}}(jQuery),function(e,t,n){function i(e){return e}function s(e){return decodeURIComponent(e.replace(r," "))}var r=/\+/g,o=e.cookie=function(r,u,a){if(u!==n){a=e.extend({},o.defaults,a),u===null&&(a.expires=-1);if(typeof a.expires=="number"){var f=a.expires,l=a.expires=new Date;l.setDate(l.getDate()+f)}return u=o.json?JSON.stringify(u):String(u),t.cookie=[encodeURIComponent(r),"=",o.raw?u:encodeURIComponent(u),a.expires?"; expires="+a.expires.toUTCString():"",a.path?"; path="+a.path:"",a.domain?"; domain="+a.domain:"",a.secure?"; secure":""].join("")}var c=o.raw?i:s,h=t.cookie.split("; ");for(var p=0,d=h.length;p<d;p++){var v=h[p].split("=");if(c(v.shift())===r){var m=c(v.join("="));return o.json?JSON.parse(m):m}}return null};o.defaults={},e.removeCookie=function(t,n){return e.cookie(t)!==null?(e.cookie(t,null,n),!0):!1}}(jQuery,document),function(e){e.fn.iframePostForm=function(t){var n,r,i,s=!0,o;return t=e.extend({},e.fn.iframePostForm.defaults,t),e("#"+t.iframeID).length||e("<iframe />",{name:t.iframeID,id:t.iframeID,style:"display:none",src:"about:blank"}).appendTo("body"),e(this).each(function(){i=e(this),i.attr("target",t.iframeID),i.submit(function(){s=t.post.apply(this);if(s===!1)return s;o=e("#"+t.iframeID).load(function(){n=o.contents().find("body"),t.json?e(n.find("pre")).length?r=e.parseJSON(e(n.find("pre")[0]).html()):r=e.parseJSON(n.html()):r=n.html(),t.complete.apply(this,[r]),o.unbind("load"),setTimeout(function(){n.html("")},1)})})})},e.fn.iframePostForm.defaults={iframeID:"iframe-post-form",json:!1,post:function(){},complete:function(e){}}}(jQuery),function(e){function n(e,t){return e.nodeType==3?i(e,t):r(e,t)}function r(t,r){var t=e(t),i=t.clone().empty(),s;return t.contents().each(function(){var e=r-i.text().length;if(e==0)return;s=n(this,e),s&&i.append(s)}),i}function i(n,r){var i=s(n.data);t&&(i=i.replace(/^ /,"")),t=!!i.match(/ $/);var i=i.slice(0,r);return i=e("<div/>").text(i).html(),i}function s(e){return e.replace(/\s+/g," ")}function o(t){var n=e(t),r=n.children(":last");if(!r)return t;var i=r.css("display");return!i||i=="inline"?n:o(r)}function u(t){var n=e(t),r=n.children(":last");return r&&r.is("p")?r:t}var t=!0;e.fn.truncate=function(t){var r=e.extend({},e.fn.truncate.defaults,t);e(this).each(function(){var t=e.trim(s(e(this).text())).length;if(t<=r.max_length)return;var i=n(this,r.max_length),u=e(this).hide();i.insertAfter(u),o(i).append(r.more)})},e.fn.truncate.defaults={max_length:100,more:"Ã¢â¬Â¦more",less:"less"}}(jQuery),function(){function C(e,t,n){if(e===t)return e!==0||1/e==1/t;if(e==null||t==null)return e===t;e._chain&&(e=e._wrapped),t._chain&&(t=t._wrapped);if(e.isEqual&&S.isFunction(e.isEqual))return e.isEqual(t);if(t.isEqual&&S.isFunction(t.isEqual))return t.isEqual(e);var r=a.call(e);if(r!=a.call(t))return!1;switch(r){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:e==0?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if(typeof e!="object"||typeof t!="object")return!1;var i=n.length;while(i--)if(n[i]==e)return!0;n.push(e);var s=0,o=!0;if(r=="[object Array]"){s=e.length,o=s==t.length;if(o)while(s--)if(!(o=s in e==s in t&&C(e[s],t[s],n)))break}else{if("constructor"in e!="constructor"in t||e.constructor!=t.constructor)return!1;for(var u in e)if(S.has(e,u)){s++;if(!(o=S.has(t,u)&&C(e[u],t[u],n)))break}if(o){for(u in t)if(S.has(t,u)&&!(s--))break;o=!s}}return n.pop(),o}var e=this,t=e._,n={},r=Array.prototype,i=Object.prototype,s=Function.prototype,o=r.slice,u=r.unshift,a=i.toString,f=i.hasOwnProperty,l=r.forEach,c=r.map,h=r.reduce,p=r.reduceRight,d=r.filter,v=r.every,m=r.some,g=r.indexOf,y=r.lastIndexOf,b=Array.isArray,w=Object.keys,E=s.bind,S=function(e){return new P(e)};typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=S),exports._=S):e._=S,S.VERSION="1.3.3";var x=S.each=S.forEach=function(e,t,r){if(e==null)return;if(l&&e.forEach===l)e.forEach(t,r);else if(e.length===+e.length){for(var i=0,s=e.length;i<s;i++)if(i in e&&t.call(r,e[i],i,e)===n)return}else for(var o in e)if(S.has(e,o)&&t.call(r,e[o],o,e)===n)return};S.map=S.collect=function(e,t,n){var r=[];return e==null?r:c&&e.map===c?e.map(t,n):(x(e,function(e,i,s){r[r.length]=t.call(n,e,i,s)}),e.length===+e.length&&(r.length=e.length),r)},S.reduce=S.foldl=S.inject=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(h&&e.reduce===h)return r&&(t=S.bind(t,r)),i?e.reduce(t,n):e.reduce(t);x(e,function(e,s,o){i?n=t.call(r,n,e,s,o):(n=e,i=!0)});if(!i)throw new TypeError("Reduce of empty array with no initial value");return n},S.reduceRight=S.foldr=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(p&&e.reduceRight===p)return r&&(t=S.bind(t,r)),i?e.reduceRight(t,n):e.reduceRight(t);var s=S.toArray(e).reverse();return r&&!i&&(t=S.bind(t,r)),i?S.reduce(s,t,n,r):S.reduce(s,t)},S.find=S.detect=function(e,t,n){var r;return T(e,function(e,i,s){if(t.call(n,e,i,s))return r=e,!0}),r},S.filter=S.select=function(e,t,n){var r=[];return e==null?r:d&&e.filter===d?e.filter(t,n):(x(e,function(e,i,s){t.call(n,e,i,s)&&(r[r.length]=e)}),r)},S.reject=function(e,t,n){var r=[];return e==null?r:(x(e,function(e,i,s){t.call(n,e,i,s)||(r[r.length]=e)}),r)},S.every=S.all=function(e,t,r){var i=!0;return e==null?i:v&&e.every===v?e.every(t,r):(x(e,function(e,s,o){if(!(i=i&&t.call(r,e,s,o)))return n}),!!i)};var T=S.some=S.any=function(e,t,r){t||(t=S.identity);var i=!1;return e==null?i:m&&e.some===m?e.some(t,r):(x(e,function(e,s,o){if(i||(i=t.call(r,e,s,o)))return n}),!!i)};S.include=S.contains=function(e,t){var n=!1;return e==null?n:g&&e.indexOf===g?e.indexOf(t)!=-1:(n=T(e,function(e){return e===t}),n)},S.invoke=function(e,t){var n=o.call(arguments,2);return S.map(e,function(e){return(S.isFunction(t)?t||e:e[t]).apply(e,n)})},S.pluck=function(e,t){return S.map(e,function(e){return e[t]})},S.max=function(e,t,n){if(!t&&S.isArray(e)&&e[0]===+e[0])return Math.max.apply(Math,e);if(!t&&S.isEmpty(e))return-Infinity;var r={computed:-Infinity};return x(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o>=r.computed&&(r={value:e,computed:o})}),r.value},S.min=function(e,t,n){if(!t&&S.isArray(e)&&e[0]===+e[0])return Math.min.apply(Math,e);if(!t&&S.isEmpty(e))return Infinity;var r={computed:Infinity};return x(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o<r.computed&&(r={value:e,computed:o})}),r.value},S.shuffle=function(e){var t=[],n;return x(e,function(e,r,i){n=Math.floor(Math.random()*(r+1)),t[r]=t[n],t[n]=e}),t},S.sortBy=function(e,t,n){var r=S.isFunction(t)?t:function(e){return e[t]};return S.pluck(S.map(e,function(e,t,i){return{value:e,criteria:r.call(n,e,t,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;return n===void 0?1:r===void 0?-1:n<r?-1:n>r?1:0}),"value")},S.groupBy=function(e,t){var n={},r=S.isFunction(t)?t:function(e){return e[t]};return x(e,function(e,t){var i=r(e,t);(n[i]||(n[i]=[])).push(e)}),n},S.sortedIndex=function(e,t,n){n||(n=S.identity);var r=0,i=e.length;while(r<i){var s=r+i>>1;n(e[s])<n(t)?r=s+1:i=s}return r},S.toArray=function(e){return e?S.isArray(e)?o.call(e):S.isArguments(e)?o.call(e):e.toArray&&S.isFunction(e.toArray)?e.toArray():S.values(e):[]},S.size=function(e){return S.isArray(e)?e.length:S.keys(e).length},S.first=S.head=S.take=function(e,t,n){return t!=null&&!n?o.call(e,0,t):e[0]},S.initial=function(e,t,n){return o.call(e,0,e.length-(t==null||n?1:t))},S.last=function(e,t,n){return t!=null&&!n?o.call(e,Math.max(e.length-t,0)):e[e.length-1]},S.rest=S.tail=function(e,t,n){return o.call(e,t==null||n?1:t)},S.compact=function(e){return S.filter(e,function(e){return!!e})},S.flatten=function(e,t){return S.reduce(e,function(e,n){return S.isArray(n)?e.concat(t?n:S.flatten(n)):(e[e.length]=n,e)},[])},S.without=function(e){return S.difference(e,o.call(arguments,1))},S.uniq=S.unique=function(e,t,n){var r=n?S.map(e,n):e,i=[];return e.length<3&&(t=!0),S.reduce(r,function(n,r,s){if(t?S.last(n)!==r||!n.length:!S.include(n,r))n.push(r),i.push(e[s]);return n},[]),i},S.union=function(){return S.uniq(S.flatten(arguments,!0))},S.intersection=S.intersect=function(e){var t=o.call(arguments,1);return S.filter(S.uniq(e),function(e){return S.every(t,function(t){return S.indexOf(t,e)>=0})})},S.difference=function(e){var t=S.flatten(o.call(arguments,1),!0);return S.filter(e,function(e){return!S.include(t,e)})},S.zip=function(){var e=o.call(arguments),t=S.max(S.pluck(e,"length")),n=new Array(t);for(var r=0;r<t;r++)n[r]=S.pluck(e,""+r);return n},S.indexOf=function(e,t,n){if(e==null)return-1;var r,i;if(n)return r=S.sortedIndex(e,t),e[r]===t?r:-1;if(g&&e.indexOf===g)return e.indexOf(t);for(r=0,i=e.length;r<i;r++)if(r in e&&e[r]===t)return r;return-1},S.lastIndexOf=function(e,t){if(e==null)return-1;if(y&&e.lastIndexOf===y)return e.lastIndexOf(t);var n=e.length;while(n--)if(n in e&&e[n]===t)return n;return-1},S.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=arguments[2]||1;var r=Math.max(Math.ceil((t-e)/n),0),i=0,s=new Array(r);while(i<r)s[i++]=e,e+=n;return s};var N=function(){};S.bind=function(t,n){var r,i;if(t.bind===E&&E)return E.apply(t,o.call(arguments,1));if(!S.isFunction(t))throw new TypeError;return i=o.call(arguments,2),r=function(){if(this instanceof r){N.prototype=t.prototype;var e=new N,s=t.apply(e,i.concat(o.call(arguments)));return Object(s)===s?s:e}return t.apply(n,i.concat(o.call(arguments)))}},S.bindAll=function(e){var t=o.call(arguments,1);return t.length==0&&(t=S.functions(e)),x(t,function(t){e[t]=S.bind(e[t],e)}),e},S.memoize=function(e,t){var n={};return t||(t=S.identity),function(){var r=t.apply(this,arguments);return S.has(n,r)?n[r]:n[r]=e.apply(this,arguments)}},S.delay=function(e,t){var n=o.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},S.defer=function(e){return S.delay.apply(S,[e,1].concat(o.call(arguments,1)))},S.throttle=function(e,t){var n,r,i,s,o,u,a=S.debounce(function(){o=s=!1},t);return function(){n=this,r=arguments;var f=function(){i=null,o&&e.apply(n,r),a()};return i||(i=setTimeout(f,t)),s?o=!0:u=e.apply(n,r),a(),s=!0,u}},S.debounce=function(e,t,n){var r;return function(){var i=this,s=arguments,o=function(){r=null,n||e.apply(i,s)};n&&!r&&e.apply(i,s),clearTimeout(r),r=setTimeout(o,t)}},S.once=function(e){var t=!1,n;return function(){return t?n:(t=!0,n=e.apply(this,arguments))}},S.wrap=function(e,t){return function(){var n=[e].concat(o.call(arguments,0));return t.apply(this,n)}},S.compose=function(){var e=arguments;return function(){var t=arguments;for(var n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},S.after=function(e,t){return e<=0?t():function(){if(--e<1)return t.apply(this,arguments)}},S.keys=w||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)S.has(e,n)&&(t[t.length]=n);return t},S.values=function(e){return S.map(e,S.identity)},S.functions=S.methods=function(e){var t=[];for(var n in e)S.isFunction(e[n])&&t.push(n);return t.sort()},S.extend=function(e){return x(o.call(arguments,1),function(t){for(var n in t)e[n]=t[n]}),e},S.pick=function(e){var t={};return x(S.flatten(o.call(arguments,1)),function(n){n in e&&(t[n]=e[n])}),t},S.defaults=function(e){return x(o.call(arguments,1),function(t){for(var n in t)e[n]==null&&(e[n]=t[n])}),e},S.clone=function(e){return S.isObject(e)?S.isArray(e)?e.slice():S.extend({},e):e},S.tap=function(e,t){return t(e),e},S.isEqual=function(e,t){return C(e,t,[])},S.isEmpty=function(e){if(e==null)return!0;if(S.isArray(e)||S.isString(e))return e.length===0;for(var t in e)if(S.has(e,t))return!1;return!0},S.isElement=function(e){return!!e&&e.nodeType==1},S.isArray=b||function(e){return a.call(e)=="[object Array]"},S.isObject=function(e){return e===Object(e)},S.isArguments=function(e){return a.call(e)=="[object Arguments]"},S.isArguments(arguments)||(S.isArguments=function(e){return!!e&&!!S.has(e,"callee")}),S.isFunction=function(e){return a.call(e)=="[object Function]"},S.isString=function(e){return a.call(e)=="[object String]"},S.isNumber=function(e){return a.call(e)=="[object Number]"},S.isFinite=function(e){return S.isNumber(e)&&isFinite(e)},S.isNaN=function(e){return e!==e},S.isBoolean=function(e){return e===!0||e===!1||a.call(e)=="[object Boolean]"},S.isDate=function(e){return a.call(e)=="[object Date]"},S.isRegExp=function(e){return a.call(e)=="[object RegExp]"},S.isNull=function(e){return e===null},S.isUndefined=function(e){return e===void 0},S.has=function(e,t){return f.call(e,t)},S.noConflict=function(){return e._=t,this},S.identity=function(e){return e},S.times=function(e,t,n){for(var r=0;r<e;r++)t.call(n,r)},S.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")},S.result=function(e,t){if(e==null)return null;var n=e[t];return S.isFunction(n)?n.call(e):n},S.mixin=function(e){x(S.functions(e),function(t){B(t,S[t]=e[t])})};var k=0;S.uniqueId=function(e){var t=k++;return e?e+t:t},S.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var L=/.^/,A={"\\":"\\","'":"'",r:"\r",n:"\n",t:"	",u2028:"\u2028",u2029:"\u2029"};for(var O in A)A[A[O]]=O;var M=/\\|'|\r|\n|\t|\u2028|\u2029/g,_=/\\(\\|'|r|n|t|u2028|u2029)/g,D=function(e){return e.replace(_,function(e,t){return A[t]})};S.template=function(e,t,n){n=S.defaults(n||{},S.templateSettings);var r="__p+='"+e.replace(M,function(e){return"\\"+A[e]}).replace(n.escape||L,function(e,t){return"'+\n_.escape("+D(t)+")+\n'"}).replace(n.interpolate||L,function(e,t){return"'+\n("+D(t)+")+\n'"}).replace(n.evaluate||L,function(e,t){return"';\n"+D(t)+"\n;__p+='"})+"';\n";n.variable||(r="with(obj||{}){\n"+r+"}\n"),r="var __p='';var print=function(){__p+=Array.prototype.join.call(arguments, '')};\n"+r+"return __p;\n";var i=new Function(n.variable||"obj","_",r);if(t)return i(t,S);var s=function(e){return i.call(this,e,S)};return s.source="function("+(n.variable||"obj")+"){\n"+r+"}",s},S.chain=function(e){return S(e).chain()};var P=function(e){this._wrapped=e};S.prototype=P.prototype;var H=function(e,t){return t?S(e).chain():e},B=function(e,t){P.prototype[e]=function(){var e=o.call(arguments);return u.call(e,this._wrapped),H(t.apply(S,e),this._chain)}};S.mixin(S),x(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=r[e];P.prototype[e]=function(){var n=this._wrapped;t.apply(n,arguments);var r=n.length;return(e=="shift"||e=="splice")&&r===0&&delete n[0],H(n,this._chain)}}),x(["concat","join","slice"],function(e){var t=r[e];P.prototype[e]=function(){return H(t.apply(this._wrapped,arguments),this._chain)}}),P.prototype.chain=function(){return this._chain=!0,this},P.prototype.value=function(){return this._wrapped}}.call(this),function(){var e=this,t=e.Backbone,n=Array.prototype.slice,r=Array.prototype.splice,i;typeof exports!="undefined"?i=exports:i=e.Backbone={},i.VERSION="0.9.2";var s=e._;!s&&typeof require!="undefined"&&(s=require("underscore"));var o=e.jQuery||e.Zepto||e.ender;i.setDomLibrary=function(e){o=e},i.noConflict=function(){return e.Backbone=t,this},i.emulateHTTP=!1,i.emulateJSON=!1;var u=/\s+/,a=i.Events={on:function(e,t,n){var r,i,s,o,a;if(!t)return this;e=e.split(u),r=this._callbacks||(this._callbacks={});while(i=e.shift())a=r[i],s=a?a.tail:{},s.next=o={},s.context=n,s.callback=t,r[i]={tail:o,next:a?a.next:s};return this},off:function(e,t,n){var r,i,o,a,f,l;if(!(i=this._callbacks))return;if(!(e||t||n))return delete this._callbacks,this;e=e?e.split(u):s.keys(i);while(r=e.shift()){o=i[r],delete i[r];if(!o||!t&&!n)continue;a=o.tail;while((o=o.next)!==a)f=o.callback,l=o.context,(t&&f!==t||n&&l!==n)&&this.on(r,f,l)}return this},trigger:function(e){var t,r,i,s,o,a,f;if(!(i=this._callbacks))return this;a=i.all,e=e.split(u),f=n.call(arguments
,1);while(t=e.shift()){if(r=i[t]){s=r.tail;while((r=r.next)!==s)r.callback.apply(r.context||this,f)}if(r=a){s=r.tail,o=[t].concat(f);while((r=r.next)!==s)r.callback.apply(r.context||this,o)}}return this}};a.bind=a.on,a.unbind=a.off;var f=i.Model=function(e,t){var n;e||(e={}),t&&t.parse&&(e=this.parse(e));if(n=C(this,"defaults"))e=s.extend({},n,e);t&&t.collection&&(this.collection=t.collection),this.attributes={},this._escapedAttributes={},this.cid=s.uniqueId("c"),this.changed={},this._silent={},this._pending={},this.set(e,{silent:!0}),this.changed={},this._silent={},this._pending={},this._previousAttributes=s.clone(this.attributes),this.initialize.apply(this,arguments)};s.extend(f.prototype,a,{changed:null,_silent:null,_pending:null,idAttribute:"id",initialize:function(){},toJSON:function(e){return s.clone(this.attributes)},get:function(e){return this.attributes[e]},escape:function(e){var t;if(t=this._escapedAttributes[e])return t;var n=this.get(e);return this._escapedAttributes[e]=s.escape(n==null?"":""+n)},has:function(e){return this.get(e)!=null},set:function(e,t,n){var r,i,o;s.isObject(e)||e==null?(r=e,n=t):(r={},r[e]=t),n||(n={});if(!r)return this;r instanceof f&&(r=r.attributes);if(n.unset)for(i in r)r[i]=void 0;if(!this._validate(r,n))return!1;this.idAttribute in r&&(this.id=r[this.idAttribute]);var u=n.changes={},a=this.attributes,l=this._escapedAttributes,c=this._previousAttributes||{};for(i in r){o=r[i];if(!s.isEqual(a[i],o)||n.unset&&s.has(a,i))delete l[i],(n.silent?this._silent:u)[i]=!0;n.unset?delete a[i]:a[i]=o,!s.isEqual(c[i],o)||s.has(a,i)!=s.has(c,i)?(this.changed[i]=o,n.silent||(this._pending[i]=!0)):(delete this.changed[i],delete this._pending[i])}return n.silent||this.change(n),this},unset:function(e,t){return(t||(t={})).unset=!0,this.set(e,null,t)},clear:function(e){return(e||(e={})).unset=!0,this.set(s.clone(this.attributes),e)},fetch:function(e){e=e?s.clone(e):{};var t=this,n=e.success;return e.success=function(r,i,s){if(!t.set(t.parse(r,s),e))return!1;n&&n(t,r)},e.error=i.wrapError(e.error,t,e),(this.sync||i.sync).call(this,"read",this,e)},save:function(e,t,n){var r,o;s.isObject(e)||e==null?(r=e,n=t):(r={},r[e]=t),n=n?s.clone(n):{};if(n.wait){if(!this._validate(r,n))return!1;o=s.clone(this.attributes)}var u=s.extend({},n,{silent:!0});if(r&&!this.set(r,n.wait?u:n))return!1;var a=this,f=n.success;n.success=function(e,t,i){var o=a.parse(e,i);n.wait&&(delete n.wait,o=s.extend(r||{},o));if(!a.set(o,n))return!1;f?f(a,e):a.trigger("sync",a,e,n)},n.error=i.wrapError(n.error,a,n);var l=this.isNew()?"create":"update",c=(this.sync||i.sync).call(this,l,this,n);return n.wait&&this.set(o,u),c},destroy:function(e){e=e?s.clone(e):{};var t=this,n=e.success,r=function(){t.trigger("destroy",t,t.collection,e)};if(this.isNew())return r(),!1;e.success=function(i){e.wait&&r(),n?n(t,i):t.trigger("sync",t,i,e)},e.error=i.wrapError(e.error,t,e);var o=(this.sync||i.sync).call(this,"delete",this,e);return e.wait||r(),o},url:function(){var e=C(this,"urlRoot")||C(this.collection,"url")||k();return this.isNew()?e:e+(e.charAt(e.length-1)=="/"?"":"/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return this.id==null},change:function(e){e||(e={});var t=this._changing;this._changing=!0;for(var n in this._silent)this._pending[n]=!0;var r=s.extend({},e.changes,this._silent);this._silent={};for(var n in r)this.trigger("change:"+n,this,this.get(n),e);if(t)return this;while(!s.isEmpty(this._pending)){this._pending={},this.trigger("change",this,e);for(var n in this.changed){if(this._pending[n]||this._silent[n])continue;delete this.changed[n]}this._previousAttributes=s.clone(this.attributes)}return this._changing=!1,this},hasChanged:function(e){return arguments.length?s.has(this.changed,e):!s.isEmpty(this.changed)},changedAttributes:function(e){if(!e)return this.hasChanged()?s.clone(this.changed):!1;var t,n=!1,r=this._previousAttributes;for(var i in e){if(s.isEqual(r[i],t=e[i]))continue;(n||(n={}))[i]=t}return n},previous:function(e){return!arguments.length||!this._previousAttributes?null:this._previousAttributes[e]},previousAttributes:function(){return s.clone(this._previousAttributes)},isValid:function(){return!this.validate(this.attributes)},_validate:function(e,t){if(t.silent||!this.validate)return!0;e=s.extend({},this.attributes,e);var n=this.validate(e,t);return n?(t&&t.error?t.error(this,n,t):this.trigger("error",this,n,t),!1):!0}});var l=i.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,{silent:!0,parse:t.parse})};s.extend(l.prototype,a,{model:f,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},add:function(e,t){var n,i,o,u,a,f,l={},c={},h=[];t||(t={}),e=s.isArray(e)?e.slice():[e];for(n=0,o=e.length;n<o;n++){if(!(u=e[n]=this._prepareModel(e[n],t)))throw new Error("Can't add an invalid model to a collection");a=u.cid,f=u.id;if(l[a]||this._byCid[a]||f!=null&&(c[f]||this._byId[f])){h.push(n);continue}l[a]=c[f]=u}n=h.length;while(n--)e.splice(h[n],1);for(n=0,o=e.length;n<o;n++)(u=e[n]).on("all",this._onModelEvent,this),this._byCid[u.cid]=u,u.id!=null&&(this._byId[u.id]=u);this.length+=o,i=t.at!=null?t.at:this.models.length,r.apply(this.models,[i,0].concat(e)),this.comparator&&this.sort({silent:!0});if(t.silent)return this;for(n=0,o=this.models.length;n<o;n++){if(!l[(u=this.models[n]).cid])continue;t.index=n,u.trigger("add",u,this,t)}return this},remove:function(e,t){var n,r,i,o;t||(t={}),e=s.isArray(e)?e.slice():[e];for(n=0,r=e.length;n<r;n++){o=this.getByCid(e[n])||this.get(e[n]);if(!o)continue;delete this._byId[o.id],delete this._byCid[o.cid],i=this.indexOf(o),this.models.splice(i,1),this.length--,t.silent||(t.index=i,o.trigger("remove",o,this,t)),this._removeReference(o)}return this},push:function(e,t){return e=this._prepareModel(e,t),this.add(e,t),e},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return e=this._prepareModel(e,t),this.add(e,s.extend({at:0},t)),e},shift:function(e){var t=this.at(0);return this.remove(t,e),t},get:function(e){return e==null?void 0:this._byId[e.id!=null?e.id:e]},getByCid:function(e){return e&&this._byCid[e.cid||e]},at:function(e){return this.models[e]},where:function(e){return s.isEmpty(e)?[]:this.filter(function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},sort:function(e){e||(e={});if(!this.comparator)throw new Error("Cannot sort a set without a comparator");var t=s.bind(this.comparator,this);return this.comparator.length==1?this.models=this.sortBy(t):this.models.sort(t),e.silent||this.trigger("reset",this,e),this},pluck:function(e){return s.map(this.models,function(t){return t.get(e)})},reset:function(e,t){e||(e=[]),t||(t={});for(var n=0,r=this.models.length;n<r;n++)this._removeReference(this.models[n]);return this._reset(),this.add(e,s.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),this},fetch:function(e){e=e?s.clone(e):{},e.parse===undefined&&(e.parse=!0);var t=this,n=e.success;return e.success=function(r,i,s){t[e.add?"add":"reset"](t.parse(r,s),e),n&&n(t,r)},e.error=i.wrapError(e.error,t,e),(this.sync||i.sync).call(this,"read",this,e)},create:function(e,t){var n=this;t=t?s.clone(t):{},e=this._prepareModel(e,t);if(!e)return!1;t.wait||n.add(e,t);var r=t.success;return t.success=function(i,s,o){t.wait&&n.add(i,t),r?r(i,s):i.trigger("sync",e,s,t)},e.save(null,t),e},parse:function(e,t){return e},chain:function(){return s(this.models).chain()},_reset:function(e){this.length=0,this.models=[],this._byId={},this._byCid={}},_prepareModel:function(e,t){t||(t={});if(e instanceof f)e.collection||(e.collection=this);else{var n=e;t.collection=this,e=new this.model(n,t),e._validate(e.attributes,t)||(e=!1)}return e},_removeReference:function(e){this==e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){if((e=="add"||e=="remove")&&n!=this)return;e=="destroy"&&this.remove(t,r),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],this._byId[t.id]=t),this.trigger.apply(this,arguments)}});var c=["forEach","each","map","reduce","reduceRight","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","sortBy","sortedIndex","toArray","size","first","initial","rest","last","without","indexOf","shuffle","lastIndexOf","isEmpty","groupBy"];s.each(c,function(e){l.prototype[e]=function(){return s[e].apply(s,[this.models].concat(s.toArray(arguments)))}});var h=i.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},p=/:\w+/g,d=/\*\w+/g,v=/[-[\]{}()+?.,\\^$|#\s]/g;s.extend(h.prototype,a,{initialize:function(){},route:function(e,t,n){return i.history||(i.history=new m),s.isRegExp(e)||(e=this._routeToRegExp(e)),n||(n=this[t]),i.history.route(e,s.bind(function(r){var s=this._extractParameters(e,r);n&&n.apply(this,s),this.trigger.apply(this,["route:"+t].concat(s)),i.history.trigger("route",this,t,s)},this)),this},navigate:function(e,t){i.history.navigate(e,t)},_bindRoutes:function(){if(!this.routes)return;var e=[];for(var t in this.routes)e.unshift([t,this.routes[t]]);for(var n=0,r=e.length;n<r;n++)this.route(e[n][0],e[n][1],this[e[n][1]])},_routeToRegExp:function(e){return e=e.replace(v,"\\$&").replace(p,"([^/]+)").replace(d,"(.*?)"),new RegExp("^"+e+"$")},_extractParameters:function(e,t){return e.exec(t).slice(1)}});var m=i.History=function(){this.handlers=[],s.bindAll(this,"checkUrl")},g=/^[#\/]/,y=/msie [\w.]+/;m.started=!1,s.extend(m.prototype,a,{interval:50,getHash:function(e){var t=e?e.location:window.location,n=t.href.match(/#(.*)$/);return n?n[1]:""},getFragment:function(e,t){if(e==null)if(this._hasPushState||t){e=window.location.pathname;var n=window.location.search;n&&(e+=n)}else e=this.getHash();return e.indexOf(this.options.root)||(e=e.substr(this.options.root.length)),e.replace(g,"")},start:function(e){if(m.started)throw new Error("Backbone.history has already been started");m.started=!0,this.options=s.extend({},{root:"/"},this.options,e),this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&window.history&&window.history.pushState);var t=this.getFragment(),n=document.documentMode,r=y.exec(navigator.userAgent.toLowerCase())&&(!n||n<=7);r&&(this.iframe=o('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(t)),this._hasPushState?o(window).bind("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!r?o(window).bind("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=t;var i=window.location,u=i.pathname==this.options.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!u)return this.fragment=this.getFragment(null,!0),window.location.replace(this.options.root+"#"+this.fragment),!0;this._wantsPushState&&this._hasPushState&&u&&i.hash&&(this.fragment=this.getHash().replace(g,""),window.history.replaceState({},document.title,i.protocol+"//"+i.host+this.options.root+this.fragment));if(!this.options.silent)return this.loadUrl()},stop:function(){o(window).unbind("popstate",this.checkUrl).unbind("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),m.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();t==this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe)));if(t==this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(e){var t=this.fragment=this.getFragment(e),n=s.any(this.handlers,function(e){if(e.route.test(t))return e.callback(t),!0});return n},navigate:function(e,t){if(!m.started)return!1;if(!t||t===!0)t={trigger:t};var n=(e||"").replace(g,"");if(this.fragment==n)return;this._hasPushState?(n.indexOf(this.options.root)!=0&&(n=this.options.root+n),this.fragment=n,window.history[t.replace?"replaceState":"pushState"]({},document.title,n)):this._wantsHashChange?(this.fragment=n,this._updateHash(window.location,n,t.replace),this.iframe&&n!=this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,n,t.replace))):window.location.assign(this.options.root+e),t.trigger&&this.loadUrl(e)},_updateHash:function(e,t,n){n?e.replace(e.toString().replace(/(javascript:|#).*$/,"")+"#"+t):e.hash=t}});var b=i.View=function(e){this.cid=s.uniqueId("view"),this._configure(e||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},w=/^(\S+)\s*(.*)$/,E=["model","collection","el","id","attributes","className","tagName"];s.extend(b.prototype,a,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this},make:function(e,t,n){var r=document.createElement(e);return t&&o(r).attr(t),n&&o(r).html(n),r},setElement:function(e,t){return this.$el&&this.undelegateEvents(),this.$el=e instanceof o?e:o(e),this.el=this.$el[0],t!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=C(this,"events")))return;this.undelegateEvents();for(var t in e){var n=e[t];s.isFunction(n)||(n=this[e[t]]);if(!n)throw new Error('Method "'+e[t]+'" does not exist');var r=t.match(w),i=r[1],o=r[2];n=s.bind(n,this),i+=".delegateEvents"+this.cid,o===""?this.$el.bind(i,n):this.$el.delegate(o,i,n)}},undelegateEvents:function(){this.$el.unbind(".delegateEvents"+this.cid)},_configure:function(e){this.options&&(e=s.extend({},this.options,e));for(var t=0,n=E.length;t<n;t++){var r=E[t];e[r]&&(this[r]=e[r])}this.options=e},_ensureElement:function(){if(!this.el){var e=C(this,"attributes")||{};this.id&&(e.id=this.id),this.className&&(e["class"]=this.className),this.setElement(this.make(this.tagName,e),!1)}else this.setElement(this.el,!1)}});var S=function(e,t){var n=N(this,e,t);return n.extend=this.extend,n};f.extend=l.extend=h.extend=b.extend=S;var x={create:"POST",update:"PUT","delete":"DELETE",read:"GET"};i.sync=function(e,t,n){var r=x[e];n||(n={});var u={type:r,dataType:"json"};return n.url||(u.url=C(t,"url")||k()),!n.data&&t&&(e=="create"||e=="update")&&(u.contentType="application/json",u.data=JSON.stringify(t.toJSON())),i.emulateJSON&&(u.contentType="application/x-www-form-urlencoded",u.data=u.data?{model:u.data}:{}),i.emulateHTTP&&(r==="PUT"||r==="DELETE")&&(i.emulateJSON&&(u.data._method=r),u.type="POST",u.beforeSend=function(e){e.setRequestHeader("X-HTTP-Method-Override",r)}),u.type!=="GET"&&!i.emulateJSON&&(u.processData=!1),o.ajax(s.extend(u,n))},i.wrapError=function(e,t,n){return function(r,i){i=r===t?i:r,e?e(t,i,n):t.trigger("error",t,i,n)}};var T=function(){},N=function(e,t,n){var r;return t&&t.hasOwnProperty("constructor")?r=t.constructor:r=function(){e.apply(this,arguments)},s.extend(r,e),T.prototype=e.prototype,r.prototype=new T,t&&s.extend(r.prototype,t),n&&s.extend(r,n),r.prototype.constructor=r,r.__super__=e.prototype,r},C=function(e,t){return!e||!e[t]?null:s.isFunction(e[t])?e[t]():e[t]},k=function(){throw new Error('A "url" property or function must be specified')}}.call(this),function(){var e=Backbone.Model.extend,t=function(t,n){var r=e.call(this,t,n),i=r.prototype.mixins;if(i&&r.prototype.hasOwnProperty("mixins")){var s={};_(i).each(function(e){_(e).each(function(e,t){t=="events"?r.prototype.events=_.extend({},r.prototype.events||{},e):_.isFunction(e)&&(r.prototype[t]&&(s[t]=s[t]||[r.prototype[t]],s[t].push(e)),r.prototype[t]=e)})}),_(s).each(function(e,t){r.prototype[t]=function(){var t=this,n=arguments,r=undefined;return _(e).each(function(e){var i=_.isFunction(e)?e.apply(t,n):e;r=i===undefined?r:i}),r}})}return r};Backbone.Model.extend=Backbone.Collection.extend=Backbone.Router.extend=Backbone.View.extend=t}();var lib=$===jQuery?jQuery:ender;!function(e){var t=function(t){var n=e.extend({},t);return this.each(function(){var t=e(this);t.data("instantsearch",new e.InstantSearch(t,n))})},n=e===jQuery?e.fn:e.ender;n.instantSearch=t,e.InstantSearch=function(t,n){var r=this,i=t.attr("id"),s=t.attr("name"),o=t.attr("class");this.src=n.source,this.action=n.action,this.closeOnBlur=n.closeOnBlur,this.completeOnEnter=n.completeOnEnter,this.showNoResults=n.showNoResults,this.resultClass=n.resultClass,this.$el=e('<div class="instant-search-field"><input class="input" type="text" autocomplete="off" spellcheck="false" dir="ltr"><input class="ghost" disabled autocomplete="off"></div>'),t.replaceWith(this.$el),this.$res=e('<div class="instant-search-results"><ul class="list"></ul></div>').hide().appendTo("body"),this.resultClass&&this.$res.addClass(this.resultClass),this.$input=this.$el.find(".input"),this.$input.attr({id:i,name:s}).addClass(o),this.$ghost=this.$el.find(".ghost"),this.$input.on("keydown",function(e){switch(e.keyCode){case 37:break;case 38:r.navigate(-1),e.preventDefault();break;case 39:r.complete();break;case 40:r.navigate(1),e.preventDefault();break;case 9:r.complete()&&(r.search(),e.preventDefault());break;case 13:r.completeOnEnter?(r.complete(),r.trigger()):(r.reset(),r.trigger()),e.preventDefault();break;case 27:r.reset();break;case 16:case 17:case 18:case 19:case 20:case 33:case 34:case 35:case 36:case 45:case 91:case 92:case 93:break;default:r.search()}}),this.$input.on("cut paste",function(e){r.search()}),this.$input.on("blur",function(e){r.$ghost.hide(),r.closeOnBlur&&r.reset()}),this.$input.on("focus",function(e){r.$ghost.show(),r.closeOnBlur&&r.search()}),this.$res.on("mouseenter","ul.list li.result",function(e){var t=r.$res.find("ul.list li.result"),n=t.index(this);r.navigateTo(n)}),this.$res.on("mouseleave",function(e){r.navigateTo(-1)}),this.$res.on("mousedown",function(e){r.$res.off("mouseleave"),r.complete(),r.reset(),r.trigger()})},e.InstantSearch.prototype={_rel:"",_sel:-1,search:function(){var e=this;this._tid&&clearTimeout(this._tid),this._tid=setTimeout(function(){var t=e._val=e.$input.val(),n;if(t==="")return e.showResults();n=e._rel.slice(0,t.length),t.toLowerCase()===n.toLowerCase()?t!==n&&e.$ghost.val(t+e._rel.slice(t.length)):e.$ghost.val(""),e.src({term:t},function(t,n){if(n)throw new Error(n);e._data=t,e.showResults(t,e.showNoResults)})},0)},showResults:function(t,n){var r=this.$res,i=r.find("ul.list"),s=this.$ghost,o=this.$input.val(),u=t&&t.length,a;if(o===this._triggeredValue)return;this._triggeredValue=null,i.empty(),this._sel=-1;if(o===""||!t||t.length===0)return s.val(""),n&&o!==""?(r.show(),i.append('<li class="no-results">No Results</li>')):(r.hide(),e("body").off("keydown",this._bodyKeydown)),!1;e("body").on("keydown",e.proxy(this._bodyKeydown,this));for(a=0;a<u;a++){var f=t[a],l=new RegExp("("+o+")(.*)","i"),c=f.match(l)||{},h=f.substr(0,c.index),p=c[1]||"",d=c[2]||"",v=h===""&&d!==""?o+d:"",m;a===0&&(this._rel=v)&&s.val(v),m='<li class="result"><strong>'+h+"</strong>"+p+"<strong>"+d+"</strong></li>",i.append(m)}return r.is(":hidden")&&r.css({position:"absolute",top:this.$el.offset().top+this.$el.outerHeight(),left:this.$el.offset().left,width:this.$el.outerWidth()}).show(),!0},navigate:function(e){var t=this.$res.find("ul.list li.result");if(t.length===0)return;var n=this._sel+e;n<-1&&(n+=t.length+1),n>=t.length&&(n-=t.length+1),this.navigateTo(n)},navigateTo:function(t){var n=this.$res.find("ul.list li.result");n.removeClass("highlight"),e(n[t]).addClass("highlight"),t===-1?this.$input.val(this._val)&&this.$ghost.val(this._rel):this.$input.val(this._data[t])&&this.$ghost.val(""),this._sel=t},reset:function(){this.showResults(null)},complete:function(){var e=!1,t=this;return this.$ghost.val()&&(this._val=this._data[0],this._rel="",this.$input.val(this._val),this.$ghost.val(""),e=!0),this.$res.on("mouseleave",function(e){t.navigateTo(-1)}),e},valueIsInList:function(e){return this._data&&jQuery.inArray(e,this._data)!==-1},trigger:function(){var e=this._triggeredValue=this.$input.val();this.action?this.action.call(this,e):this.$el.parent("form").submit()},_bodyKeydown:function(e){e.keyCode===27&&this.reset()}}}(lib),function(e,t,n){"use strict";var r=t.event,i;r.special.smartresize={setup:function(){t(this).bind("resize",r.special.smartresize.handler)},teardown:function(){t(this).unbind("resize",r.special.smartresize.handler)},handler:function(e,n){var r=this,s=arguments;e.type="smartresize",i&&clearTimeout(i),i=setTimeout(function(){t.event.handle.apply(r,s)},n==="execAsap"?0:100)}},t.fn.smartresize=function(e){return e?this.bind("smartresize",e):this.trigger("smartresize",["execAsap"])},t.Mason=function(e,n){this.element=t(n),this._create(e),this._init()},t.Mason.settings={isResizable:!0,isAnimated:!1,animationOptions:{queue:!1,duration:500},gutterWidth:0,isRTL:!1,isFitWidth:!1,containerStyle:{position:"relative"}},t.Mason.prototype={_filterFindBricks:function(e){var t=this.options.itemSelector;return t?e.filter(t).add(e.find(t)):e},_getBricks:function(e){var t=this._filterFindBricks(e).css({position:"absolute"}).addClass("masonry-brick");return t},_create:function(n){this.options=t.extend(!0,{},t.Mason.settings,n),this.styleQueue=[];var r=this.element[0].style;this.originalStyle={height:r.height||""};var i=this.options.containerStyle;for(var s in i)this.originalStyle[s]=r[s]||"";this.element.css(i),this.horizontalDirection=this.options.isRTL?"right":"left",this.offset={x:parseInt(this.element.css("padding-"+this.horizontalDirection),10),y:parseInt(this.element.css("padding-top"),10)},this.isFluid=this.options.columnWidth&&typeof this.options.columnWidth=="function";var o=this;setTimeout(function(){o.element.addClass("masonry")},0),this.options.isResizable&&t(e).bind("smartresize.masonry",function(){o.resize()}),this.reloadItems()},_init:function(e){this._getColumns(),this._reLayout(e)},option:function(e,n){t.isPlainObject(e)&&(this.options=t.extend(!0,this.options,e))},layout:function(e,t){for(var n=0,r=e.length;n<r;n++)this._placeBrick(e[n]);var i={};i.height=Math.max.apply(Math,this.colYs);if(this.options.isFitWidth){var s=0;n=this.cols;while(--n){if(this.colYs[n]!==0)break;s++}i.width=(this.cols-s)*this.columnWidth-this.options.gutterWidth}this.styleQueue.push({$el:this.element,style:i});var o=this.isLaidOut?this.options.isAnimated?"animate":"css":"css",u=this.options.animationOptions,a;for(n=0,r=this.styleQueue.length;n<r;n++)a=this.styleQueue[n],a.$el[o](a.style,u);this.styleQueue=[],t&&t.call(e),this.isLaidOut=!0},_getColumns:function(){var e=this.options.isFitWidth?this.element.parent():this.element,t=e.width();this.columnWidth=this.isFluid?this.options.columnWidth(t):this.options.columnWidth||this.$bricks.outerWidth(!0)||t,this.columnWidth+=this.options.gutterWidth,this.cols=Math.floor((t+this.options.gutterWidth)/this.columnWidth),this.cols=Math.max(this.cols,1)},_placeBrick:function(e){var n=t(e),r,i,s,o,u;r=Math.ceil(n.outerWidth(!0)/this.columnWidth),r=Math.min(r,this.cols);if(r===1)s=this.colYs;else{i=this.cols+1-r,s=[];for(u=0;u<i;u++)o=this.colYs.slice(u,u+r),s[u]=Math.max.apply(Math,o)}var a=Math.min.apply(Math,s),f=0;for(var l=0,c=s.length;l<c;l++)if(s[l]===a){f=l;break}var h={top:a+this.offset.y};h[this.horizontalDirection]=this.columnWidth*f+this.offset.x,this.styleQueue.push({$el:n,style:h});var p=a+n.outerHeight(!0),d=this.cols+1-c;for(l=0;l<d;l++)this.colYs[f+l]=p},resize:function(){var e=this.cols;this._getColumns(),(this.isFluid||this.cols!==e)&&this._reLayout()},_reLayout:function(e){var t=this.cols;this.colYs=[];while(t--)this.colYs.push(0);this.layout(this.$bricks,e)},reloadItems:function(){this.$bricks=this._getBricks(this.element.children())},reload:function(e){this.reloadItems(),this._init(e)},appended:function(e,t,n){if(t){this._filterFindBricks(e).css({top:this.element.height()});var r=this;setTimeout(function(){r._appended(e,n)},1)}else this._appended(e,n)},_appended:function(e,t){var n=this._getBricks(e);this.$bricks=this.$bricks.add(n),this.layout(n,t)},remove:function(e){this.$bricks=this.$bricks.not(e),e.remove()},destroy:function(){this.$bricks.removeClass("masonry-brick").each(function(){this.style.position="",this.style.top="",this.style.left=""});var n=this.element[0].style;for(var r in this.originalStyle)n[r]=this.originalStyle[r];this.element.unbind(".masonry").removeClass("masonry").removeData("masonry"),t(e).unbind(".masonry")}},t.fn.imagesLoaded=function(e){function u(){e.call(n,r)}function a(e){var n=e.target;n.src!==s&&t.inArray(n,o)===-1&&(o.push(n),--i<=0&&(setTimeout(u),r.unbind(".imagesLoaded",a)))}var n=this,r=n.find("img").add(n.filter("img")),i=r.length,s="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",o=[];return i||u(),r.bind("load.imagesLoaded error.imagesLoaded",a).each(function(){var e=this.src;this.src=s,this.src=e}),n};var s=function(t){e.console&&e.console.error(t)};t.fn.masonry=function(e){if(typeof e=="string"){var n=Array.prototype.slice.call(arguments,1);this.each(function(){var r=t.data(this,"masonry");if(!r){s("cannot call methods on masonry prior to initialization; attempted to call method '"+e+"'");return}if(!t.isFunction(r[e])||e.charAt(0)==="_"){s("no such method '"+e+"' for masonry instance");return}r[e].apply(r,n)})}else this.each(function(){var n=t.data(this,"masonry");n?(n.option(e||{}),n._init()):t.data(this,"masonry",new t.Mason(e,this))});return this}}(window,jQuery),function(e,t){var n;e.rails=n={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote]",selectChangeSelector:"select[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type])",disableSelector:"input[data-disable-with], button[data-disable-with], textarea[data-disable-with]",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input:file",CSRFProtection:function(t){var n=e('meta[name="csrf-token"]').attr("content");n&&t.setRequestHeader("X-CSRF-Token",n)},fire:function(t,n,r){var i=e.Event(n);return t.trigger(i,r),i.result!==!1},confirm:function(e){return confirm(e)},ajax:function(t){return e.ajax(t)},handleRemote:function(r){var i,s,o,u=r.data("cross-domain")||null,a=r.data("type")||e.ajaxSettings&&e.ajaxSettings.dataType;if(n.fire(r,"ajax:before")){if(r.is("form")){i=r.attr("method"),s=r.attr("action"),o=r.serializeArray();var f=r.data("ujs:submit-button");f&&(o.push(f),r.data("ujs:submit-button",null))}else r.is("select")?(i=r.data("method"),s=r.data("url"),o=r.serialize(),r.data("params")&&(o=o+"&"+r.data("params"))):(i=r.data("method"),s=r.attr("href"),o=r.data("params")||null);options={type:i||"GET",data:o,dataType:a,crossDomain:u,beforeSend:function(e,i){return i.dataType===t&&e.setRequestHeader("accept","*/*;q=0.5, "+i.accepts.script),n.fire(r,"ajax:beforeSend",[e,i])},success:function(e,t,n){r.trigger("ajax:success",[e,t,n])},complete:function(e,t){r.trigger("ajax:complete",[e,t])},error:function(e,t,n){r.trigger("ajax:error",[e,t,n])}},s&&e.extend(options,{url:s}),n.ajax(options)}},handleMethod:function(n){var r=n.attr("href"),i=n.data("method"),s=e("meta[name=csrf-token]").attr("content"),o=e("meta[name=csrf-param]").attr("content"),u=e('<form method="post" action="'+r+'"></form>'),a='<input name="_method" value="'+i+'" type="hidden" />';o!==t&&s!==t&&(a+='<input name="'+o+'" value="'+s+'" type="hidden" />'),u.hide().append(a).appendTo("body"),u.submit()},disableFormElements:function(t){t.find(n.disableSelector).each(function(){var t=e(this),n=t.is("button")?"html":"val";t.data("ujs:enable-with",t[n]()),t[n](t.data("disable-with")),t.attr("disabled","disabled")})},enableFormElements:function(t){t.find(n.enableSelector).each(function(){var t=e(this),n=t.is("button")?"html":"val";t.data("ujs:enable-with")&&t[n](t.data("ujs:enable-with")),t.removeAttr("disabled")})},allowAction:function(e){var t=e.data("confirm"),r=!1,i;return t?(n.fire(e,"confirm")&&(r=n.confirm(t),i=n.fire(e,"confirm:complete",[r])),r&&i):!0},blankInputs:function(t,n,r){var i=e(),s,o=n||"input,textarea";return t.find(o).each(function(){s=e(this);if(r?s.val():!s.val())i=i.add(s)}),i.length?i:!1},nonBlankInputs:function(e,t){return n.blankInputs(e,t,!0)},stopEverything:function(t){return e(t.target).trigger("ujs:everythingStopped"),t.stopImmediatePropagation(),!1},callFormSubmitBindings:function(n){var r=n.data("events"),i=!0;return r!==t&&r.submit!==t&&e.each(r.submit,function(e,t){if(typeof t.handler=="function")return i=t.handler(t.data)}),i}},e.ajaxPrefilter(function(e,t,r){e.crossDomain||n.CSRFProtection(r)}),e(n.linkClickSelector).live("click.rails",function(r){var i=e(this);if(!n.allowAction(i))return n.stopEverything(r);if(i.data("remote")!==t)return n.handleRemote(i),!1;if(i.data("method"))return n.handleMethod(i),!1}),e(n.selectChangeSelector).live("change.rails",function(t){var r=e(this);return n.allowAction(r)?(n.handleRemote(r),!1):n.stopEverything(t)}),e(n.formSubmitSelector).live("submit.rails",function(r){var i=e(this),s=i.data("remote")!==t,o=n.blankInputs(i,n.requiredInputSelector),u=n.nonBlankInputs(i,n.fileInputSelector);if(!n.allowAction(i))return n.stopEverything(r);if(o&&n.fire(i,"ajax:aborted:required",[o]))return n.stopEverything(r);if(s)return u?n.fire(i,"ajax:aborted:file",[u]):!e.support.submitBubbles&&n.callFormSubmitBindings(i)===!1?n.stopEverything(r):(n.handleRemote(i),!1);setTimeout(function(){n.disableFormElements(i)},13)}),e(n.formInputClickSelector).live("click.rails",function(t){var r=e(this);if(!n.allowAction(r))return n.stopEverything(t);var i=r.attr("name"),s=i?{name:i,value:r.val()}:null;r.closest("form").data("ujs:submit-button",s)}),e(n.formSubmitSelector).live("ajax:beforeSend.rails",function(t){this==t.target&&n.disableFormElements(e(this))}),e(n.formSubmitSelector).live("ajax:complete.rails",function(t){this==t.target&&n.enableFormElements(e(this))})}(jQuery);var Soundboard={Mixins:{},Models:{},TabDocuments:{},Utils:{},Layouts:{},Views:{},Routers:{},Collections:{},Dispatcher:_.extend({},Backbone.Events),isDesktop:function(){return typeof songbird!="undefined"}(),init:function(e){var t=new Soundboard.Views.Lightbox,n,r,i,s,o;e=e||{},n=e.user,Soundboard.CONSTANTS.FACEBOOK_OAUTH_URL=e.facebookOauthUrl,Soundboard.CONSTANTS.FACEBOOK_APP_ID=e.facebookAppId,Soundboard.context=e.context||Soundboard.CONSTANTS.CONTEXT.MAIN,$(document).bind("keydown",t.onescape),$("body").append(t.render().el),Soundboard.bindHeaderEvents(),Soundboard.search=new Soundboard.Views.InstantSearch({placeholder:"Search Artists"}),Soundboard.Utils.VariableWidth.setupFlags(),Soundboard.player=this.isDesktop?new Songbird.Player:new Soundboard.SoundManager.Player,Soundboard.lightbox=t,Soundboard.currentUser=n&&new Soundboard.Models.User(n),this.showPromo(),!this.showArtist(e.artist)&&this.welcomeUser(),Soundboard.currentUser&&Soundboard.currentUser.isGuest()&&this.configureAppForGuest(),this.router=new Soundboard.Routers.TabbedDocument({selector:"#app"}),Soundboard.context===Soundboard.CONSTANTS.CONTEXT.MAIN&&(r=e.route||this.router.home,Backbone.history.start()||this.router.navigate(r,{trigger:!0}))},bindHeaderEvents:function(){$("#invite-friends-link").bind("click",this.inviteFriends),$("#ugc-upload-link").bind("click",this.uploadUgc),$("#about-link").bind("mouseover",function(){$("#header .divider").css({visibility:"hidden"})}),$("#about-link").bind("mouseout",function(){$("#header .divider").css({visibility:"visible"})}),$("#user-link").bind("mouseover",function(){$(this).prev().css({visibility:"hidden"}),$("#user-link .drop-down-arrow").removeClass("inactive-header-link"),$("#user-link .drop-down-arrow").addClass("active-header-link")}),$("#user-link").bind("mouseout",function(){$(this).prev().css({visibility:"visible"}),$("#user-link .drop-down-arrow").removeClass("active-header-link"),$("#user-link .drop-down-arrow").addClass("inactive-header-link")}),$("#ugc-upload-link").bind("mouseover",function(){$(".ugc-upload-tip").css("display","block")}),$("#ugc-upload-link").bind("mouseout",function(){$(".ugc-upload-tip").css("display","none")})},inviteFriends:function(){FB.ui(Soundboard.CONSTANTS.INVITE_OPTIONS,function(e){e&&Soundboard.Utils.Tracking.invitedFriend("Header link",e.to.length)})},uploadUgc:function(){Soundboard.lightbox.showUgcForm()},showPromo:function(){if(!Soundboard.welcome&&Soundboard.currentUser&&!Soundboard.currentUser.isGuest
()){var e=new Soundboard.Views.PromoView({});e.render()}},welcomeUser:function(){Soundboard.welcome&&Soundboard.currentUser.followedArtists.fetch({complete:function(e,t){var n,r;Soundboard.currentUser.followedArtists.length>0?n="We've automatically followed<br>the artists you like on Facebook to help get you started.":n="<br>Get started in the Whatâs New feed below.",r=new Soundboard.Views.MessageView({title:"Welcome "+Soundboard.currentUser.get("name"),message:n,closeEvent:"beforefollow"}),r.render(),Soundboard.welcome=!1,Soundboard.Utils.Tracking.sawWelcomeScreen(),Soundboard.Utils.VariableWidth.updateSize(!0)},data:{offset:0,limit:1}})},showArtist:function(e){var t;return e?(t=new Soundboard.Models.Artist({id:e}),t.fetch({success:function(e,t){Soundboard.lightbox.showArtist(e)}}),!0):!1},getOauthUrl:function(e){var t=Soundboard.CONSTANTS.FACEBOOK_OAUTH_URL.split("&amp;"),n;for(n=0;n<t.length;n++)if(t[n].search("redirect_uri=")!==-1){t[n]=t[n].split("?artist_id=")[0]+"?artist_id="+e;break}return t.join("&amp;")},promptGuestToLogin:function(e){Soundboard.lightbox.$el.is(":visible")&&Soundboard.lightbox.close(),Soundboard.lightbox.showLoginPrompt(e)},configureAppForGuest:function(){var e=function(e,t,n){Soundboard.promptGuestToLogin(),Soundboard.Utils.Tracking.guest(t,n),e.stopPropagation()},t=function(e){var t,n;this._artistStream?t=this._artistStream.artist.id:this.artist?t=this.artist.id:this._artist&&(t=this._artist.id),n=Soundboard.getOauthUrl(t),Soundboard.promptGuestToLogin(n),Soundboard.Utils.Tracking.guest("follow",t),e.stopPropagation()},n=function(e){var t=this.item.id;Soundboard.promptGuestToLogin(),Soundboard.Utils.Tracking.guest("share",t),e.stopPropagation()},r=function(e){var t=this.item.id;Soundboard.promptGuestToLogin(),Soundboard.Utils.Tracking.guest("like",t),e.stopPropagation()},i=function(e){var t=this.artist.id;Soundboard.promptGuestToLogin(),Soundboard.Utils.Tracking.guest("dismiss",t),e.stopPropagation()};_(["shareUpdate"]).each(function(e){Soundboard.Views.ArtistUpdate.prototype[e]=n,Soundboard.Views.ExpandedArtistUpdate.prototype[e]=n}),_(["commentUpdate"]).each(function(t){Soundboard.Views.ArtistUpdate.prototype[t]=e}),_(["share"]).each(function(t){Soundboard.Views.ArtistRollover.prototype[t]=e,Soundboard.Views.ExpandedArtist.prototype[t]=e}),_(["likeUpdate","unlikeUpdate"]).each(function(e){Soundboard.Views.ArtistUpdate.prototype[e]=r,Soundboard.Views.ExpandedArtistUpdate.prototype[e]=r}),_(["follow"]).each(function(e){Soundboard.Views.RecommendedArtistInPanel.prototype[e]=t,Soundboard.Views.TrendingArtistInPanel.prototype[e]=t,Soundboard.Views.ExpandedArtist.prototype[e]=t,Soundboard.Views.FollowedArtistInPanel.prototype[e]=t,Soundboard.Views.ArtistRollover.prototype[e]=t}),_(["dismiss"]).each(function(e){Soundboard.Views.RecommendedArtistInPanel.prototype[e]=i,Soundboard.Views.ExpandedArtistUpdate.prototype[e]=i}),_(["unfollow"]).each(function(t){Soundboard.Views.FollowedArtistInPanel.prototype[t]=e}),_(["toggleArtistFollow"]).each(function(e){Soundboard.Views.Discovery.prototype[e]=t}),$("#app").on("click",".document-tab a",function(t){var n=$(t.currentTarget);n.closest("#discover-tab").length===0&&(t.preventDefault(),e(t))}),$("#ugc-upload-link").on("click",function(t){e(t,"upload ugc")});var s;s=new Soundboard.Views.GuestHeader,s.render(),$("body").prepend(s.$el),$("#sign_in").on("click",function(t){t.preventDefault(),e(t,"Login Clicked","navigation")}),$("#log_in").on("click",function(e){Soundboard.Utils.Tracking.guest("Login Clicked","header")}),$("#join").on("click",function(e){Soundboard.Utils.Tracking.guest("Join Clicked","header")}),$(".promo-button.signed-out.android").on("click",function(e){Soundboard.Utils.Tracking.trackGA("Promotion","android","guest")}),$(".promo-button.signed-out.ios").on("click",function(e){Soundboard.Utils.Tracking.trackGA("Promotion","ios","guest")})}};Soundboard.CONSTANTS={ENV:"production",FACEBOOK_OAUTH_URL:"",FACEBOOK_APP_ID:"",CONTEXT:{MAIN:"main"},BUCKET:{FEED:0,FOLLOWED:1,DISMISSED:2,LIKED:3,SEARCH:4},FEED_ARTISTS:9,MAX_COMMENTS:1e4,FEED_COMMENTS:3,INVITE_OPTIONS:{method:"apprequests",message:"See What Music We Have In Common"},SHARE_OPTIONS:{method:"feed",link:"http://www.songbird.me",display:"popup",actions:[{name:"Follow this Artist",link:"http://www.songbird.me"}]},SWF:{ENABLED:!1,OPTIONS:{type:"flash",width:320,height:240,expanded_width:380,expanded_height:400},URI:{SCHEME:"https",PATH:"/swf/SoundboardFacebookWidget.swf"},METHOD:"stream.publish"},GA:{enabled:!0,account:"UA-114360-17"},IMAGES:{tab_notch:"/assets/tab_notch-16x8-8689d407d2736400dbe818d2ce1e96c3.png",loader_gray:"/assets/loader-gray-4d8240ef3c63e483f48f90bcd4f4c670.gif",loader_black:"/assets/black-loading-9ca97dd015ce850e1a30c11b1425b1dc.gif",loader_round:"/assets/loader-aa506fb73fa7b3a5bbec69d56ea273f1.gif",loader_box:"/assets/loader-box-34084ed579b5a2a4846cc881c6e6aa23.gif",default_artist:"/assets/generic_artist-0284436e13ea14811d7d53923232ceda.png",default_user:"/assets/sb-bird-32x32-757c71e06ba6a72e49500a284b43b129.png"},ECHONEST:{api_key:"TSNMQHNIMJB53VQOC"},MAX_COLUMNS:6},Soundboard.Mixins.MemoizableFetcher=function(){function t(){this.fetchState=e.READY,this._resetCallbacks()}var e={READY:"ready",WAITING:"waiting",SUCCESS:"success",ERROR:"error"};return t.prototype={fetch:function(t,n){function f(){r&&a._callbacks.success.push(r),i&&a._callbacks.error.push(i)}function l(){a.fetchState=e.WAITING,t.fetch({success:function(t,n){a._transitionState(e.SUCCESS,t,n),a._successResponse=n},error:function(t,n){a._transitionState(e.ERROR,t,n)},add:o,data:u,silent:!0})}var r=n&&n.success,i=n&&n.error,s=n&&n.reset,o=n&&n.add,u=n&&n.data,a=this;s&&this.fetchState===e.SUCCESS&&(this.fetchState=e.READY);switch(this.fetchState){case e.ERROR:case e.READY:f(),l();break;case e.WAITING:f();break;case e.SUCCESS:o?(f(),l()):r&&r(t,this._successResponse)}},_resetCallbacks:function(){this._callbacks={},this._callbacks[e.SUCCESS]=[],this._callbacks[e.ERROR]=[]},_transitionState:function(e,t,n){this.fetchState=e,t.trigger("reset"),_(this._callbacks[e]).each(function(e){e(t,n)}),this._resetCallbacks()}},{isLoading:function(){return this._memoizableFetcher?this._memoizableFetcher.fetchState===e.WAITING:!1},memoizedFetch:function(e){this._memoizableFetcher=this._memoizableFetcher||new t,this._memoizableFetcher.fetch(this,e)}}}(),Soundboard.Models.ArtistUpdate=Backbone.Model.extend({defaults:function(){return{comments:[]}},videoType:function(){return this.get("type")!=="video"?null:this.get("url").match(/youtu\.?be/)?"youtube":this.get("url").match(/facebook/)?"facebook":"other"},widgetEmbed:function(e,t){var n=this.get("type");if(n==="video"){var r=this.videoType(),i;if(r==="facebook")return i=this.get("url").match(/v=(\d+)/)[1],'<object width="'+e+'" height="'+t+'">'+'<param name="allowfullscreen" value="true" />'+'<param name="waitforclick" value="false" />'+'<param name="movie" value="http://www.facebook.com/v/'+i+'" />'+'<embed src="http://www.facebook.com/v/'+i+'" type="application/x-shockwave-flash" allowfullscreen="true" width="'+e+'" height="'+t+'"></embed>'+"</object>";if(r==="youtube")return i=this.get("url").match(/v=([^&]+)/)[1],'<iframe class="youtube-player" type="text/html" width="'+e+'" height="'+t+'" src="http://www.youtube.com/embed/'+i+'?autoplay=1" frameborder="0"></iframe>'}else if(n==="audio")return'<object width="'+e+'" height="'+t+'">'+'<param name="movie" value="/player.swf?url='+encodeURIComponent(this.get("url"))+'&amp;show_comments=true&amp;auto_play=true&amp;show_playcount=true&amp;show_artwork=true&amp;color=e2116a"></param>'+'<param name="allowscriptaccess" value="always"></param>'+'<embed allowscriptaccess="always" width="'+e+'" height="'+t+'" src="/player.swf?url='+encodeURIComponent(this.get("url"))+'&amp;show_comments=true&amp;auto_play=true&amp;show_playcount=true&amp;show_artwork=true&amp;color=e2116a" type="application/x-shockwave-flash"></embed>'+"</object>";return null},linkifiedDescription:function(){var e=this.get("description");if(e)return e=Soundboard.Utils.htmlEscape(e),e.replace(/(https?:\/\/.*?)(?=[.:\?]?(\s|$))/g,'<a href="$1" target="_blank" rel="nofollow">$1</a>');return},photoType:function(){return this.get("type")!=="photo"?null:this.get("cover_image").src.match(/fbcdn/)?"facebook":"other"},view:function(){window.open(this.get("url"),"_blank")},setComments:function(){var e=this,t=this.get("comments"),n=this.get("comment_count");if(t.length===n)return;$.ajax({url:this.commentUrl(),type:"GET"}).done(function(t){e.set("comments",t),e.trigger("aftersetcomments")})},comment:function(e){var t=this;$.ajax({url:this.commentUrl(),type:"POST",data:{comment:e}}).done(function(e){var n=t.get("comments"),r=t.get("comment_count");Soundboard.currentUser.incCommentCount(1),n.push(e),t.set("comments",n),t.set("comment_count",r+1),t.trigger("aftercomment",t)}).fail(function(){})},uncomment:function(e){var t=this;$.ajax({url:this.commentUrl()+"/"+e.id,type:"DELETE"}).done(function(){var n=t.get("comments"),r=t.get("comment_count");Soundboard.currentUser.incCommentCount(-1),n.splice($.inArray(e,n),1),t.set("comments",n),t.set("comment_count",r-1),t.trigger("afteruncomment",e)}).fail(function(){})},like:function(){var e=this;Soundboard.Dispatcher.trigger("beforelike",this.id),$.ajax({url:Soundboard.currentUser.url()+"/likes/"+this.id,type:"PUT"}).done(function(){var t=e.get("like_count");Soundboard.currentUser.incLikeCount(1),e.set("like_count",t+1),e.set("liked",!0),Soundboard.Dispatcher.trigger("afterlike",e.id)}).fail(function(){e.trigger("likeerror")})},unlike:function(){var e=this;Soundboard.Dispatcher.trigger("beforeunlike",this.id),$.ajax({url:Soundboard.currentUser.url()+"/likes/"+this.id,type:"DELETE"}).done(function(){var t=e.get("like_count");Soundboard.currentUser.incLikeCount(-1),e.set("like_count",t-1),e.set("liked",!1),Soundboard.Dispatcher.trigger("afterunlike",e.id)}).fail(function(){e.trigger("unlikeerror")})},share:function(){if(this.photoType()==="facebook"){var e="http://www.facebook.com/sharer.php?u="+encodeURIComponent(this.get("url"))+"&t="+encodeURIComponent(this.get("description"));window.open(e,"_blank","width=640,height=308")}else{var t={method:"feed",link:Soundboard.CONSTANTS.SHARE_OPTIONS.link+"/artists/"+this.get("artist").id+this.url(),picture:this.get("cover_image").src,name:this.get("artist").artist_name,description:this.get("description"),ref:"share_update",display:"popup"};FB.ui(t)}},url:function(e){var t="/updates/"+this.id;return e&&(t="/artists/"+e+t),t},commentUrl:function(){return this.url()+"/comments"}}),Soundboard.Collections.Stream=function(){var e={model:Soundboard.Models.ArtistUpdate,initialize:function(e,t){_.bindAll(this,"fetch"),this._owner=t&&t.owner,this.hasMore=!0},url:function(){return this._owner.url()+"/stream"}};return $.extend(!0,e,Soundboard.Mixins.MemoizableFetcher),Backbone.Collection.extend(e)}(),Soundboard.Collections.ArtistStream=function(){var e={url:function(){return"/artists/"+this.artist.id+"/stream"},search:function(e,t){var n=this,r;t=t||{},r={q:e,fields:"biography,tracks",with_updates:t.limit||!0},t.comments&&(r.comments=t.comments),this.artist=null,this.hasMore=!0,this.reset(),this._searching=!0,this._results=this._results||new Soundboard.Collections.Search,this._results.fetch({data:r,success:function(e,r){n._searching=!1;var i=e.at(0);i&&(n.artist=i,n.reset(i.get("artist_updates"))),t.success.call(this)},error:function(e,r){n._searching=!1,t.error&&t.error(e,r)}})},isLoading:function(){return this._searching||Soundboard.Collections.Stream.prototype.isLoading.call(this)}};return Soundboard.Collections.Stream.extend(e)}(),Soundboard.Models.User=Backbone.Model.extend({urlRoot:"/users",initialize:function(){var e=this,t,n;_.bindAll(this,"follow","unfollow","dismiss"),this.lightboxViews=0,this.bind("change:facebook_id",this.setPhotoUrl,this),this.setPhotoUrl(),n=["RecommendedArtists","FollowedArtists","DismissedArtists","LikedArtists","LikedArtistUpdates","Friends","Stream"],_(n).each(function(n){t=n.charAt(0).toLowerCase()+n.slice(1),e[t]=new Soundboard.Collections[n]([],{owner:e}),e[t].name=n})},isSoundboardUser:function(){return!!this.id},isCurrentUser:function(){return!!this.id&&this.id===Soundboard.currentUser.id},isGuest:function(){return this.id==="guest"},setPhotoUrl:function(){var e;this.isGuest()?e=Soundboard.CONSTANTS.IMAGES.default_user:this.get("facebook_id")?e="http://graph.facebook.com/"+this.get("facebook_id")+"/picture":e="",this.set({photoUrl:e})},follow:function(e){var t={success:function(t,n,r){Soundboard.Dispatcher.trigger("afterfollow",e.id),e.trigger("afterfollow")},error:function(t,n){e.trigger("followerror")}};e.trigger("beforefollow"),this.followedArtists.create({artist_id:e.id,source:e.bucket?e.bucket():Soundboard.CONSTANTS.BUCKET.FEED},t)},unfollow:function(e){var t={success:function(t,n,r){Soundboard.Dispatcher.trigger("afterunfollow",e.id),e.trigger("afterunfollow")},error:function(e,t){}};e.trigger("beforeunfollow"),this.dismissedArtists.create({artist_id:e.id,source:e.bucket()},t)},dismiss:function(e){var t={success:function(t,n,r){Soundboard.Dispatcher.trigger("afterdismiss",e.id)},error:function(e,t){}};e.trigger&&e.trigger("beforedismiss"),this.dismissedArtists.create({artist_id:e.id,source:e.bucket?e.bucket():Soundboard.CONSTANTS.BUCKET.FEED},t)},kudos:function(e){var t=this;$.ajax({url:this.url()+"/kudos/"+e.id,type:"PUT"}).done(function(){var t=e.get("kudos_received");e.set("kudos_received",t+1),e.set("kudos",!0),Soundboard.Utils.Tracking.kudos(this)}).fail(function(){e.trigger("kudoserror")})},unkudos:function(e){$.ajax({url:this.url()+"/kudos/"+e.id,type:"DELETE"}).done(function(){var t=e.get("kudos_received");e.set("kudos_received",t-1),e.set("kudos",!1),Soundboard.Utils.Tracking.unkudos(this)}).fail(function(){e.trigger("unkudoserror")})},vote:function(e){$.ajax({url:"/polls",type:"POST",data:{alt:e}}).done(function(){})},fetchS3Config:function(e,t,n,r,i){var s=this.url()+"/s3config";$.ajax({url:s,type:"GET",data:{artist_name:e,description:t,fb:n}}).done(function(e,t){r(e)}).fail(function(){i()})},url:function(){return"/users/"+this.id},fullName:function(){var e=this.get("name"),t=this.get("last_name");return t&&t!==""&&(Soundboard.currentUser.isGuest()&&(t=t[0]),e+=" "+t),e},resetLightboxClickCount:function(){this.lightboxViews=0},clickedLightbox:function(){this.lightboxViews++},getLightboxViewCount:function(){return this.lightboxViews},incCommentCount:function(e){this.set({comment_count:this.get("comment_count")+e})},incLikeCount:function(e){this.set({like_count:this.get("like_count")+e})},incUploadCount:function(e){this.set({upload_count:this.get("upload_count")+e})}}),Soundboard.Collections.ArtistTopFans=function(){var e={model:Soundboard.Models.User,baseSize:5,initialize:function(e,t){this._artist=t&&t.artist},artist:function(){return this._artist},url:function(){return"/artists/"+this._artist.id+"/top_fans?limit="+this.baseSize}};return $.extend(!0,e,Soundboard.Mixins.MemoizableFetcher),Backbone.Collection.extend(e)}(),Soundboard.Models.Artist=Backbone.Model.extend({initialize:function(e){this.bind("change:image",this.embedImage,this),this.embedImage({silent:!0}),this.bind("followerror",this.onFollowError,this),this.topFans=new Soundboard.Collections.ArtistTopFans([],{artist:this})},onAfterFollow:function(){Soundboard.Utils.Tracking.followedArtist(this),this.set({collected:!0})},onAfterUnfollow:function(){Soundboard.Utils.Tracking.unfollowedArtist(this),this.set({collected:!1})},onFollowError:function(){this.change()},url:function(e){return!e&&this.collection?Backbone.Model.prototype.url.call(this):"/artists/"+this.id},bucket:function(){if(!this.collection)return;return this.collection.bucketType},owner:function(){if(!this.collection)return;return this.collection.owner()},embedImage:function(e){var t=this,n=this.get("image");if(!n)return;this.unset("image",{silent:!0}),this._image=new Soundboard.Models.ArtistImage({artist_id:this.id,url:n.url,status:n.status}),this._image.bind("change",function(){t.trigger("change:image")}),(!e||!e.silent)&&this.trigger("change:image")},toJSON:function(){var e=Backbone.Model.prototype.toJSON.call(this);return this._image&&(e.image=this._image.toJSON()),e},getImageUrl:function(){var e=null;return this._image&&this._image.get("status")==="completed"&&(e=this._image.get("url")),e},hasTracks:function(){var e=this.get("tracks");return!!e&&e.length!==0}}),Soundboard.Collections.Artists=function(){var e={model:Soundboard.Models.Artist,owner:function(){return this._owner},initialize:function(e,t){_.bindAll(this,"findById","onAfterFollow","onAfterUnfollow"),Soundboard.Dispatcher.bind("afterfollow",this.onAfterFollow),Soundboard.Dispatcher.bind("afterunfollow",this.onAfterUnfollow),this._owner=t&&t.owner},findById:function(e){var t=this.find(function(t){return t.id===e});return t},onAfterFollow:function(e){var t=this.findById(e);t&&t.onAfterFollow()},onAfterUnfollow:function(e){var t=this.findById(e);t&&t.onAfterUnfollow()}};return $.extend(!0,e,Soundboard.Mixins.MemoizableFetcher),Backbone.Collection.extend(e)}(),Soundboard.Collections.DismissedArtists=Soundboard.Collections.Artists.extend({bucketType:Soundboard.CONSTANTS.BUCKET.DISMISSED,url:function(){return this._owner.url()+"/dismissed"}}),Soundboard.Models.FollowedArtist=Soundboard.Models.Artist.extend({onAfterUnfollow:function(){Soundboard.Utils.Tracking.unfollowedArtist(this),this.collection.owner().isCurrentUser()?this.collection.remove(this):this.set({collected:!1})}}),Soundboard.Collections.FollowedArtists=Soundboard.Collections.Artists.extend({model:Soundboard.Models.FollowedArtist,bucketType:Soundboard.CONSTANTS.BUCKET.FOLLOWED,comparator:function(e){return e.get("collected_at")*-1},url:function(){return this._owner.url()+"/collected"}}),Soundboard.Collections.LikedArtists=Soundboard.Collections.Artists.extend({bucketType:Soundboard.CONSTANTS.BUCKET.LIKED,url:function(){var e=this._owner.get("facebook_id");return Soundboard.currentUser.url()+"/friends/"+e+"/liked"}}),Soundboard.Models.RecommendedArtist=Soundboard.Models.Artist.extend({initialize:function(e){Soundboard.Models.Artist.prototype.initialize.call(this,e),_.bindAll(this,"onAfterFollow","onAfterDismiss")},onAfterFollow:function(){Soundboard.Utils.Tracking.followedArtist(this),this.nextRecommendation()},onAfterDismiss:function(){Soundboard.Utils.Tracking.dismissedArtist(this),this.nextRecommendation()},url:function(e){return e?Soundboard.Models.Artist.prototype.url.call(this,e):this.collection.nextUrl()},nextRecommendation:function(){var e=this;this.isFetching=!0,this.fetch({success:function(t,n){e.isFetching=!1,n&&(e.id===e.collection.lastFetchedId?e.nextRecommendation():(e.collection.lastFetchedId=e.id,e.trigger("newrec",!0)))}}),this.clear({silent:!0})}}),Soundboard.Collections.RecommendedArtists=Soundboard.Collections.Artists.extend({model:Soundboard.Models.RecommendedArtist,bucketType:Soundboard.CONSTANTS.BUCKET.FEED,initialize:function(e,t){Soundboard.Collections.Artists.prototype.initialize.call(this,e,t),Soundboard.Dispatcher.bind("afterdismiss",this.onAfterDismiss,this),Soundboard.Dispatcher.bind("afterfollow",this.onAfterFollow,this)},url:function(){return this._owner.url()+"/discover"},nextUrl:function(){return this.url()+"/next"},onAfterDismiss:function(e){var t=this.findById(e);t&&(this._moveToEnd(t),t.onAfterDismiss())},onAfterFollow:function(e){var t=this.findById(e);t&&(this._moveToEnd(t),t.onAfterFollow())},_moveToEnd:function(e){this.remove(e),this.push(e,{silent:!0})}}),Soundboard.Collections.Search=function(){var e={bucketType:Soundboard.CONSTANTS.BUCKET.SEARCH,url:function(){return"/search"},fetch:function(e){var t=e.data,n=t&&t.q;!n||n.replace(/\s/g,"")===""?(this.reset([]),e.success(this,[])):Backbone.Collection.prototype.fetch.call(this,e),Soundboard.Utils.Tracking.searchedFor(n)}};return Soundboard.Collections.Artists.extend(e)}(),Soundboard.Models.SimilarArtist=Soundboard.Models.RecommendedArtist.extend({skip:function(){this.collection.skipArtist(this)},onAfterSkip:function(){this.nextRecommendation()},parse:function(e){return e instanceof Array?e[0]:e}}),Soundboard.Collections.SimilarArtists=Soundboard.Collections.Artists.extend({model:Soundboard.Models.SimilarArtist,baseSize:5,initialize:function(e,t){Soundboard.Collections.Artists.prototype.initialize.call(this,e,t),this._artist=t.artist,Soundboard.Dispatcher.bind("afterfollow",this.onAfterFollow,this)},url:function(){return this._urlBase()+"?limit="+this.baseSize},nextUrl:function(){return this.nextOffset===undefined?this.nextOffset=this.baseSize:this.nextOffset++,this._urlBase()+"?limit=1&offset="+this.nextOffset},_urlBase:function(){return Soundboard.currentUser.isGuest()?"/artists/"+this._artist.id+"/similar":this._owner.url()+"/artists/"+this._artist.id+"/similar"},skipArtist:function(e){this._moveToEnd(e),e.onAfterSkip()},onAfterFollow:function(e){var t=this.findById(e);t&&(this._moveToEnd(t),t.onAfterFollow())},_moveToEnd:function(e){this.remove(e),this.push(e,{silent:!0})}}),Soundboard.Collections.TrendingArtists=function(){var e={model:Soundboard.Models.Artist,baseSize:10,url:function(){return"/artists/trending?d=3&limit="+this.baseSize}};return $.extend(!0,e,Soundboard.Mixins.MemoizableFetcher),Soundboard.Collections.Artists.extend(e)}(),Soundboard.Collections.Friends=function(){var e={model:Soundboard.Models.User,initialize:function(e,t){this._owner=t.owner},comparator:function(e){var t=e.isSoundboardUser()?0:1;return t},selectFriend:function(e){this.selected=e,this.trigger("select",this.selected)},search:function(e){if(!e||e==="")return this;var t=new RegExp(e,"i"),n=this.filter(function(e){return t.test(e.get("name"))});return new this.constructor(n,{owner:this._owner})},limit:function(e){return new this.constructor(this.first(e),{owner:this._owner})},soundboardUsers:function(){var e=this.filter(function(e){return!!e.get("id")});return new this.constructor(e,{owner:this._owner})},url:function(){return this._owner.url()+"/friends"}};return $.extend(!0,e,Soundboard.Mixins.MemoizableFetcher),Backbone.Collection.extend(e)}(),Soundboard.Collections.LikedArtistUpdates=function(){var e={model:Soundboard.Models.ArtistUpdate,initialize:function(e,t){this._owner=t&&t.owner,this.on("change:liked",this.removeUnliked,this)},owner:function(){return this._owner},removeUnliked:function(e,t,n){t===!1&&this.remove(e)},url:function(){return this._owner.url()+"/likes"}};return $.extend(!0,e,Soundboard.Mixins.MemoizableFetcher),Backbone.Collection.extend(e)}(),Soundboard.Models.Track=function(){var e=Backbone.Model.extend({initialize:function(e,t){this.url=e.url}});return e.createWithOptions=function(e,t){var n=t&&t.key||"url";return e.url=e[n],e.data=e,new Soundboard.Models.Track(e)},e}(),Soundboard.Collections.Queue=function(){function e(e,t){t.clear(),_(e).each(function(e){var n=songbird.siteLibrary.createMediaItem(e.url),r=e.get("data");n.setProperty("http://songbirdnest.com/data/1.0#url",e.url),n.setProperty("http://songbirdnest.com/data/1.0#trackName",r.title),n.setProperty("http://songbirdnest.com/data/1.0#artistName",r.artist),n.setProperty("http://songbirdnest.com/data/1.0#albumName",r.release),n.setProperty("http://songbirdnest.com/data/1.0#duration",r.duration*1e6),e.mediaItem=n,t.add(n)})}var t={model:Soundboard.Models.Track,initialize:function(t,n){Soundboard.isDesktop&&(this.mediaList=songbird.siteLibrary.createSimpleMediaList("Songbird.me"),t&&e(t,this.mediaList)),this._currentIndex=0},current:function(){return this.at(this._currentIndex)},next:function(e){return!e&&this._currentIndex>=this.length-1?null:(this._currentIndex=++this._currentIndex%this.length,this.current())},prev:function(){return this._currentIndex=(--this._currentIndex+this.length)%this.length,this.current()},skipTo:function(e){return this._currentIndex=e,this.current()},restart:function(){this._currentIndex=0},reset:function(t,n){return Soundboard.isDesktop&&(t?e(t,this.mediaList):this.mediaList.clear()),this.restart(),Backbone.Collection.prototype.reset.call(this,t,n)}};return Backbone.Collection.extend(t)}(),Soundboard.Models.TabDocument=Backbone.Model.extend({enableSearch:!1,unload:function(){this._view&&(this._view.close&&this._view.close(),this._view.remove(),this._view=null)}}),Soundboard.Collections.TabbedDocuments=Backbone.Collection.extend({model:Soundboard.Models.TabDocument,select:function(e){var t=this.get(e);return t!==this._selected&&(this._selected&&this._selected.set({selected:!1}),this._selected=t.set({selected:!0})),this._selected}}),Soundboard.Collections.TrendingUsers=function(){var e={model:Soundboard.Models.User,baseSize:16,url:function(){return"/users/trending?d=7&limit="+this.baseSize}};return $.extend(!0,e,Soundboard.Mixins.MemoizableFetcher),Backbone.Collection.extend(e)}(),Soundboard.Mixins.ActionableArtist=function(){var e={events:{"mouseenter .artist-action-btn":"toggleButton","mouseleave .artist-action-btn":"toggleButton"},toggleButton:function(e){var t=$(e.currentTarget),n=e.type==="mouseenter",r=t.prev(),i=t.next();_.each([r,i],function(e){if(e.length>0){var t=e.find(".artist-divider-line");n?t.css("visibility","hidden"):t.css("visibility","visible")}})}};return e}(),Soundboard.Mixins.DismissableArtist={events:{"click .artist-dismiss":"dismiss"},dismiss:function(e){Soundboard.currentUser.dismiss(this._artist),e.stopPropagation()}},Soundboard.Mixins.ExpandedItem={_sidebarWidth:262,_minImageSize:390,contentDimensions:function(e,t){var n=e?e-this._sidebarWidth:0,r=t||0,i=640,s=480,o=i/s;return n&&r&&(n<i?(i=n,s=Math.round(i/o)):r<s&&(s=r,i=Math.round(s*o))),[i,s]},updateSize:function(e,t){var n=this.contentDimensions(e,t);this.$el.css({width:e,height:t}),this.$(".box").css({width:e-this._sidebarWidth,height:t}),this.$(".box.photo img, .box .widget").css({top:Math.max(Math.round((t-n[1])/2),0),left:Math.max(Math.round((e-this._sidebarWidth-n[0])/2),0),width:n[0],height:n[1]}),this.$(".box .widget").html(this.widget(n[0],n[1]))},getDimensions:function(e,t){var n=this.contentDimensions(e,t);return{maxWidth:Math.max(n[0],this._minImageSize),maxHeight:Math.max(n[1],this._minImageSize),minWidth:this._minImageSize,minHeight:this._minImageSize,horizontalPadding:this._sidebarWidth,resizeable:this.obj().get("type")==="photo"}}},Soundboard.Mixins.FollowableArtist={events:{"click .artist-follow":"follow","click .artist-unfollow":"unfollow"},follow:function(e){Soundboard.currentUser.follow(this._artist),e.stopPropagation()},unfollow:function(e){Soundboard.currentUser.unfollow(this._artist),e.stopPropagation()}},Soundboard.Mixins.FollowableArtistPanel={events:{"mouseleave .unfollow":"onLeaveUnfollow","mouseover .unfollow":"onEnterUnfollow"},onLeaveUnfollow:function(e){var t=this.$el.find("span.unfollow");t&&(t.removeClass("active"),t.text("following"))},onEnterUnfollow:function(e){var t=this.$el.find("span.unfollow");t&&(t.addClass("active"),t.text("unfollow"))},_toggleFollow:function(e){var t=this.$el.find("span."+e);e==="follow"?(t.removeClass("follow"),t.addClass("unfollow active"),t.text("unfollow")):(t.removeClass("unfollow"),t.addClass("follow"),t.text("follow"))},_animatAndFollow:function(){var e=this,t=this.$el.height(),n=this.$("img.artist-image"),r=$("#profile-tab"),i=400,s=n.offset(),o={height:n.innerHeight(),width:n.innerWidth()},u=r.offset(),a={height:r.innerWidth(),width:r.innerWidth()},f={top:u.top,left:u.left+r.innerWidth()/2-a.width/2,height:a.height,width:a.width};this._toggleFollow("follow"),n.appendTo(document.body).css({top:s.top,left:s.left,height:o.height,width:o.width,position:"absolute","z-index":5}).animate(f,i,function(){Soundboard.currentUser.follow(e.artist)}),r.animate({opacity:.1},100,function(){r.animate({opacity:1},800)}),n.animate({opacity:"hide"},300)}},Soundboard.Mixins.SharableArtist={events:{"click .artist-share":"share"},share:function(e){var t=this,n;Soundboard.CONSTANTS.SWF.ENABLED&&this._artist.hasTracks()?n=this._getSWFShareOptions():n=this._getShareOptions(),FB.ui(n,function(e){t._shareCallback(e)}),e.stopPropagation()},shareType:function(){var e=this._artist.owner(),t=!e||e.isCurrentUser()?"Share":"Comment";return t},_getShareImage:function(e){var t=e.getImageUrl();return t&&/^\//.test(t)&&(t=Soundboard.CONSTANTS.SHARE_OPTIONS.link+t),t},_getShareOptions:function(){var e=this._getShareImage(this._artist),t={name:this._artist.get("artist_name"),caption:"<a></a>"},n={};return $.extend(n,Soundboard.CONSTANTS.SHARE_OPTIONS),n.link+=this._artist.url(!0),n.actions[0].link=n.link,e&&(t.picture=e),_.defaults(t,n),this.shareType()==="Comment"&&(t.to=this._artist.owner().get("facebook_id")),t},_getSWFShareOptions:function(){var e=this._getShareImage(this._artist),t=this._getFlashSource(),n={name:this._artist.get("artist_name"),caption:"<a></a>",href:Soundboard.CONSTANTS.SHARE_OPTIONS.link+this._artist.url(!0)},r;return e&&(n.media=[_.defaults({swfsrc:t,imgsrc:e},Soundboard.CONSTANTS.SWF.OPTIONS)]),r={method:Soundboard.CONSTANTS.SWF.METHOD,attachment:n},this.shareType()==="Comment"&&(r.target_id=this._artist.owner().get("facebook_id")),r},_getFlashSource:function(){var e=Soundboard.CONSTANTS.SWF.URI,t=e.SCHEME,n=window.location.hostname,r=e.PATH,i;return n==="localhost"&&e.PORT&&(n+=":"+e.PORT),i=_({user_id:Soundboard.currentUser.id,artist_id:this._artist.id}).map(function(e,t){return[t,e].join("=")}).join("&"),t+"://"+n+r+"?"+i},_shareCallback:function(e){e&&e.post_id&&Soundboard.Utils.Tracking.sharedArtist(this.shareType(),this._artist)}},Soundboard.Models.ArtistImage=Backbone.Model.extend({POLL_INTERVAL:1e3,initialize:function(e){_.bindAll(this,"_onFetchSuccess"),e.status==="pending"&&this.poll()},url:function(){return"/artists/"+this.get("artist_id")+"/image"},poll:function(){var e=this;_.delay(function(){e.fetch({success:e._onFetchSuccess})},this.POLL_INTERVAL)},_onFetchSuccess:function(e,t){e.get("status")==="pending"&&this.poll()}}),Soundboard.Models.OtherList=Backbone.Model.extend({urlRoot:"/internal/tools/data",defaults:{title:"List of Other Data",list:null}}),Soundboard.Models.Player=function(){var e={READY:"play-state-ready",PLAYING:"play-state-playing",PAUSED:"play-state-paused"},t={PLAY_STATE:e,defaults:{state:e.READY},initialize:function(e,t){_.bindAll(this,"onplay","onresume","onpause","onfinish"),Soundboard.Dispatcher.on("artistinfo:change",this.clear,this),Soundboard.Dispatcher.on("tab:selected",this.clear,this),this.queue=new Soundboard.Collections.Queue},play:function(e){},pause:function(){},toggleState:function(){},clear:function(){},next:function(){var e=this.queue.next(!0);this.trigger("trackchange",e),this.play(e)},prev:function(){var e=this.queue.prev();this.trigger("trackchange",e),this.play(e)},skipTo:function(e){var t=this.queue.skipTo(e);this.trigger("trackchange",t),this.play(t)},onplay:function(){this.set({state:this.PLAY_STATE.PLAYING})},onpause:function(){this.set({state:this.PLAY_STATE.PAUSED})},onresume:function(){this.set({state:this.PLAY_STATE.PLAYING})},onfinish:function(e){var t=this.queue.next();t?(this.play(t),this.trigger("trackchange",t)):(e&&e(),this.queue.restart(),this.set({state:this.PLAY_STATE.READY}),this.trigger("restart",this.queue.current()))}};return Backbone.Model.extend(t)}(),Soundboard.Models.Playlist=Backbone.Model.extend({widgetEmbed:function(e,t){var n=this.get("youtube_url").match(/list=([^&]+)/)[1];return'<iframe class="youtube-player" type="text/html" width="'+e+'" height="'+t+'" src="http://www.youtube.com/embed/videoseries?list='+n+'&autoplay=1" frameborder="0"></iframe>'},image:function(e){return this.get("images")[e]},share:function(){var e={method:"feed",link:Soundboard.CONSTANTS.SHARE_OPTIONS.link+this.url(),picture:this.image("medium"),name:this.get("name"),description:this.get("description"),ref:"share_playlist",display:"popup"};FB.ui(e)},url:function(){return"/playlists/"+this.id}}),Soundboard.TabDocuments.Artists=function(){var e={initialize:function(){_.bindAll(this,"_onFetchSuccess","_onFetchError"),this._viewOptions={}},load:function(){return this._view?this._view.bucket=this._viewOptions.bucket=this.bucket:this._view=new this.viewCtor(this._viewOptions),this.bucket&&this.bucket.memoizedFetch({success:this._onFetchSuccess,error:this._onFetchError}),this._view},afterLoad:function(){this._view.truncateText&&this._view.truncateText(),this._view.positionItems&&this._view.positionItems()},_onFetchSuccess:function(e,t){this._view&&this._view.render()},_onFetchError:function(e,t){this._view&&
this._view.onError(t)}};return Soundboard.Models.TabDocument.extend(e)}(),Soundboard.Views.WhatsNew=Backbone.View.extend({className:"whatsnew-container",events:{"click .scroll-to-top":"scrollToTop"},initialize:function(){_.bindAll(this,"render","run","scrollToTop","_onWhatsNewPanelReset","_onArtistInfoReposition"),this.stream=this.options.stream,this.stream.bind("add",this._onItemAdded,this),this.recommendedArtists=this.options.recommendedArtists,this.trendingArtists=this.options.trendingArtists,this.trendingUsers=this.options.trendingUsers,this.perPage=30,this.currentPage=Math.floor(this.stream.length/this.perPage)||1,this.maxComments=Soundboard.CONSTANTS.FEED_COMMENTS,this.fetching=!1,this.errorFetching=!1,this.$el.html(JST["soundboard/templates/whatsnew"]()),this.$feedItems=this.$(".feed-items"),this.$scrollButton=this.$(".scroll-to-top"),this._layout=new Soundboard.Layouts.ColumnarStack(this,this.$feedItems)},remove:function(){this._removeWhatsNewPanel(),this._removeArtistInfo(),this._layout.clean(),this._resetMasonry(),this.stream.unbind("add",this._onItemAdded),$(window).off("scroll",this.run),Backbone.View.prototype.remove.call(this)},render:function(){var e=this,t=this.stream.artist;if(this.fetching||this.$el.is(":hidden"))return this;this._resetMasonry(),this._layout.clean(),this._layout.setup(),this.$feedItems.empty(),t!==undefined?this._showArtistInfo(t)&&this._insertArtistInfo(t):this._insertWhatsNewPanel(),$(window).on("scroll",this.run);if(this.stream.length===0&&!this.stream.isLoading()){var n,r,i,s=!1;this.stream instanceof Soundboard.Collections.ArtistStream?(s=!0,t?(r="Content currently unavailable. Search other artists or check back later.",i="artistupdates-empty"):(r="Unable to find any artists with that name",i="artist-empty")):this.errorFetching?(r="Oops something went wrong, please try again by refreshing this page.",i="feed-error"):(i="whatsnew-empty blurred-background",r="Follow artists to see their latest photos, videos & more!"),this.renderEmptyStream(r,i,s),Soundboard.Utils.VariableWidth.updateEmptyStream()}else{var o=this.stream.length,u=Soundboard.Utils.VariableWidth.getNumOfColumns()-1-o;Soundboard.Utils.VariableWidth.setNumOfArtistUpdates(o);for(var a=0;a<u;a++)e.$feedItems.append((new Soundboard.Views.ArtistUpdateEmpty).render().el);this.stream.each(function(t){var n=new Soundboard.Views.ArtistUpdate({item:t});e.$feedItems.append(n.render().el),e._layout.positionView(n)}),this.stream.isLoading()||this.$(".loading").toggle(this.stream.hasMore),this.$feedItems.masonry({isAnimated:!1,isRTL:!0,columnWidth:242,gutterWidth:10,isFitWidth:!0})}return this.$scrollButton.removeClass("visible"),Soundboard.Utils.VariableWidth.updateSize(!0),this},renderEmptyStream:function(e,t,n){var r=new Soundboard.Views.EmptyStream({className:t,message:e,isArtistView:n});this.stream.hasMore=!1,this.$(".loading").hide(),this.$feedItems.find("li."+t).length===0&&this.$feedItems.append(r.render().el),this._layout.positionView(r),r.$el.css("width","")},run:function(){var e,t,n,r,i,s,o;if(!this.$el.is(":visible"))return;if(this.fetching)return;t=$(window).height(),e=$(document).height(),n=t*.66,r=window.scrollY||$(window).scrollTop(),i=t+r,s=this.$el.offset().top,o=this.stream.length>0&&r>s+1,o!==this._scrolled&&(this.$scrollButton.toggleClass("visible",o),this._scrolled=o),e>n&&e<i+n&&this._getNextPage()},scrollToTop:function(){$("html,body").animate({scrollTop:0},200)},onFetchArtist:function(){this.stream.artist.has("artist_name")&&!this.stream.isLoading()&&(this.fetching=!1,this.render(),this.run())},_resetMasonry:function(){this.$feedItems.hasClass("masonry")&&this.$feedItems.masonry("destroy")},_onItemAdded:function(e,t,n){var r=new Soundboard.Views.ArtistUpdate({item:e});this.$feedItems.append(r.render().el),this._layout.positionView(r)},_insertArtistInfo:function(e){this._removeArtistInfo(),this._artistInfoView=new Soundboard.Views.ArtistInfo({artist:e}),this._artistInfoView.bind("reposition",this._onArtistInfoReposition,this),this.$feedItems.prepend(this._artistInfoView.render().el),this._layout.positionView(this._artistInfoView,!0,!0),this._artistInfoView.afterLoad()},_onArtistInfoReposition:function(){this.$feedItems.hasClass("masonry")&&this.$feedItems.masonry("reload")},_removeArtistInfo:function(){this._artistInfoView&&(this._artistInfoView.remove(),this._artistInfoView.unbind("reposition",this._onArtistInfoReposition))},_insertWhatsNewPanel:function(){this._removeWhatsNewPanel(),this._whatsNewPanelView=new Soundboard.Views.WhatsNewPanel({recommendedArtists:this.recommendedArtists,trendingArtists:this.trendingArtists,trendingUsers:this.trendingUsers}),this._whatsNewPanelView.bind("resetArtists",this._onWhatsNewPanelReset,this),this.$feedItems.append(this._whatsNewPanelView.render().el),this._layout.positionView(this._whatsNewPanelView,!0)},_removeWhatsNewPanel:function(){this._whatsNewPanelView&&(this._whatsNewPanelView.remove(),this._whatsNewPanelView.unbind("resetArtists",this._onWhatsNewPanelReset))},_onWhatsNewPanelReset:function(){this._layout.repositionView(this._whatsNewPanelView)},_showArtistInfo:function(e){var t,n,r,i,s;return e?(t=e.get("image"),n=e.get("tracks"),r=t?t.url!==null:!1,i=!!e.get("biography"),s=n?n.length!==0:!1,r||i||s):(this.stream.hasMore=!1,!1)},_getNextPage:function(){var e=this,t;if(!this.stream.hasMore||this.stream.isLoading())return;this.$(".loading").show(),this.fetching=!0,t=this.stream.fetch({success:function(n,r){var i=JSON.parse(t.getResponseHeader("Pagination")),s=i&&i.next;e.currentPage++,e.fetching=!1,e.stream.hasMore=s,e.$(".loading").toggle(s)},add:!0,data:{offset:this.currentPage*this.perPage,limit:this.perPage,comments:this.maxComments}})}}),Soundboard.Views.Discovery=Backbone.View.extend({id:"whats-new",events:{"click .follow":"toggleArtistFollow","mouseover  .following":"_onHoverFollowing","mouseleave .following":"_onHoverFollowing"},initialize:function(){this._stream=this.options.stream,this._recommendedArtists=this.options.recommendedArtists,this._trendingArtists=this.options.trendingArtists,this._trendingUsers=this.options.trendingUsers,this._search=this.options.search,this._search.bind("search:enter",this.search,this),this._search.bind("search:clear",this.clearSearch,this),this._artistStream=this.options.artistStream,this._artistResults=this.options.artistResults,_.bindAll(this,"fetchArtistStream","gotoView","searchStream"),this._whatsNewView=new Soundboard.Views.WhatsNew({stream:this._stream,recommendedArtists:this._recommendedArtists,trendingArtists:this._trendingArtists,trendingUsers:this._trendingUsers}),this._fetchingTrendingUsers=!1,this._fetchingTrendingArtists=!1,this._fetchingRecommendedArtists=!1,this._profileView=null,this.$el.html(JST["soundboard/templates/discovery"]()),this.$el.append(this._whatsNewView.el),this.$follow=this.$(".follow")},render:function(){return this},remove:function(){this._search.unbind("search:enter",this.search),this._search.unbind("search:clear",this.clearSearch),this._unBindArtistEvents(),this._whatsNewView.remove(),Backbone.View.prototype.remove.call(this)},search:function(e){var t=encodeURIComponent(e),n="discover/"+this.activeTab+"/search/"+t;Soundboard.router.navigate(n,{trigger:!0}),Soundboard.Dispatcher.trigger("artistinfo:change")},fetchArtistStream:function(e){var t=this,n=new Soundboard.Models.Artist({id:e}),r,i=this._setupStream(),s=!0;i.fetching=!0,i.scrollToTop(),this._artistStream.artist=n,this._artistStream.hasMore=!0,n.fetch({data:{fields:"biography,tracks"},success:function(e,o){if(i!==t._artistStreamView)return;r=n.get("artist_name"),t._search.val(r),t._bindArtistEvents(),t._setBreadcrumbs(n),t.onFetchArtistPage(i,s)},error:function(e,t){i.fetching=!1,i.renderEmptyStream("Unable to find any artists with that name","artist-empty",!1)}}),this._artistStream.memoizedFetch({data:{limit:this._whatsNewView.perPage,comments:this._whatsNewView.maxComments},success:function(){if(i!==t._artistStreamView)return;t.onFetchArtistPage(i,s)},error:function(e,t){i.fetching=!1,i.renderEmptyStream("Unable to find any artists with that name","artist-empty",!1)},reset:!0}),n.topFans.memoizedFetch({success:function(e,n){s=!1,t.onFetchArtistPage(i,s)},error:function(e,n){s=!1,t.onFetchArtistPage(i,s)}}),this._afterFetchArtistStream(r,i)},onFetchArtistPage:function(e,t){t||(e.onFetchArtist(),e.stream.artist&&e.stream.artist.get("artist_name")&&Soundboard.promptArtist&&Soundboard.currentUser.isGuest()&&(Soundboard.lightbox.showArtistJoinPrompt(e.stream.artist,this._trendingUsers),Soundboard.promptArtist=!1))},searchStream:function(e){var t=this,n=this._setupStream();this._artistStreamView&&this._artistStreamView.remove(),n=new Soundboard.Views.WhatsNew({stream:this._artistStream}),this._artistStream.hasMore=!0,this._artistStream.search(e,{success:function(){var e;if(n!==t._artistStreamView)return;e=t._artistStream.artist,e?(t._bindArtistEvents(),t._setBreadcrumbs(e),e.topFans.memoizedFetch({success:function(e,t){n.render()},error:function(e,t){n.render()}})):n.render()},limit:this._whatsNewView.perPage,comments:this._whatsNewView.maxComments}),this._afterFetchArtistStream(e,n)},clearSearch:function(){Soundboard.router.navigate("discover/"+this.activeTab,{trigger:!0}),Soundboard.Dispatcher.trigger("artistinfo:change")},toggleArtistFollow:function(){var e=this._artistStream.artist,t=e.get("collected")?"unfollow":"follow";Soundboard.currentUser[t].call(this,e)},fetchStream:function(){var e=this,t,n;this._whatsNewView.fetching=!0,n=this._stream.fetch({success:function(t,r){var i=JSON.parse(n.getResponseHeader("Pagination")),s=i&&i.next;e._whatsNewView.fetching=!1,e._whatsNewView.stream.hasMore=s,e.renderViews()},error:function(t,n){e._whatsNewView.fetching=!1,e._whatsNewView.errorFetching=!0,e.renderViews()},data:{offset:0,limit:this._whatsNewView.perPage,comments:this._whatsNewView.maxComments}})},fetchRecommendedArtists:function(){var e=this;this._fetchingRecommendedArtists=!0,this._recommendedArtists.fetch({success:function(t,n){e._fetchingRecommendedArtists=!1,e.renderViews()},error:function(t,n){e._fetchingRecommendedArtists=!1,e.renderViews()}})},fetchTrendingArtists:function(){var e=this;this._fetchingTrendingArtists=!0,this._trendingArtists.memoizedFetch({success:function(t,n){e._fetchingTrendingArtists=!1,e.renderViews()},error:function(t,n){e._fetchingTrendingArtists=!1,e.renderViews()}})},fetchTrendingUsers:function(){var e=this;this._fetchingTrendingUsers=!0,this._trendingUsers.memoizedFetch({success:function(t,n){e._fetchingTrendingUsers=!1,e.renderViews()},error:function(t,n){e._fetchingTrendingUsers=!1,e.renderViews()}})},fetchProfile:function(e,t){var n=this,r=new Soundboard.Models.User({id:e});this._profileView&&this._profileView.user.id===e?this._profileView.gotoView(t):(this._profileView&&(this._profileView.remove(),this._profileView=null),r.fetch({success:function(e,r){n._profileView=new Soundboard.Views.Profile({user:e,context:"public"}),n.$("#public-profile").html(n._profileView.el),n._profileView.afterLoad(),n._profileView.gotoView(t)},error:function(e,t){}}))},renderViews:function(){if(this._fetchingRecommendedArtists||this._whatsNewView.fetching||this._fetchingTrendingArtists||this._fetchingTrendingUsers)return;this._whatsNewView.render()},gotoView:function(e){this._artistStream.artist=null,this._artistStreamView&&(this._artistStreamView.remove(),this._artistStreamView=null),e==="profile"?(this._whatsNewView.$el.hide(),this.$("#discover-nav").hide(),this.$("#public-profile").show()):(this.activeTab=e,this.$follow.hide(),this.$("#public-profile").hide(),this.$("#discover-nav").show(),this._whatsNewView.$el.show(),this._whatsNewView.render(),this.$("#whats-new-breadcrumbs").hide(),this.$("#whats-new-link").toggleClass("active",!0))},afterLoad:function(){this.fetchRecommendedArtists(),this.fetchTrendingUsers(),this.fetchTrendingArtists(),this.fetchStream()},_onFollow:function(){this._onFollowChange(!0)},_onUnfollow:function(){this._onFollowChange(!1)},_beforeUnfollow:function(){this._setFollow(!1)},_beforeFollow:function(){this._setFollow(!0,"unfollow")},_onFollowChange:function(e){var t=this._artistStream.artist;t&&t.id&&t.set({collected:e}),this.fetchStream()},_onHoverFollowing:function(e){this.$follow.text(this.$follow.text()==="following"?"unfollow":"following")},_bindArtistEvents:function(){var e=this._artistStream.artist;e&&e.id&&(e.on("beforefollow",this._beforeFollow,this),e.on("afterfollow",this._onFollow,this),e.on("beforeunfollow",this._beforeUnfollow,this),e.on("afterunfollow",this._onUnfollow,this))},_unBindArtistEvents:function(){var e=this._artistStream.artist;e&&e.id&&(e.off("beforefollow",this._beforeFollow),e.off("afterfollow",this._onFollow),e.off("beforeunfollow",this._beforeUnfollow),e.off("afterunfollow",this._onUnfollow))},_setBreadcrumbs:function(e){this._setFollow(e.get("collected")),this.$follow.show(),this.$("#whats-new-breadcrumbs").html(e.get("artist_name"))},_setFollow:function(e,t){e?(this.$follow.addClass("following"),this.$follow.html(t?t:"following")):(this.$follow.removeClass("following"),this.$follow.html("follow"))},_afterFetchArtistStream:function(e,t){this._whatsNewView.$el.hide(),this.$el.append(t.el),this._artistStreamView=t,this.$("#whats-new-link").removeClass("active"),this.$("#whats-new-breadcrumbs").html(e).show(),this.$follow.hide()},_setupStream:function(){var e;return this.$("#whats-new-breadcrumbs").html(""),this._artistStreamView&&this._artistStreamView.remove(),e=new Soundboard.Views.WhatsNew({stream:this._artistStream}),e}}),Soundboard.TabDocuments.Discovery=Soundboard.Models.TabDocument.extend({defaults:{displayName:"Discover"},enableSearch:!0,initialize:function(){this._artistStream=new Soundboard.Collections.ArtistStream,this._trendingArtists=new Soundboard.Collections.TrendingArtists,this._trendingUsers=new Soundboard.Collections.TrendingUsers,this._artistResults=new Soundboard.Collections.Search([],{owner:Soundboard.currentUser})},load:function(){return this._view=new Soundboard.Views.Discovery({recommendedArtists:Soundboard.currentUser.recommendedArtists,trendingArtists:this._trendingArtists,trendingUsers:this._trendingUsers,stream:Soundboard.currentUser.stream,artistStream:this._artistStream,search:Soundboard.search,artistResults:this._artistResults}),this._view.activeTab=this.activeTab,this._view},navigateTo:function(e){return this._view.gotoView(e),this.activeTab=e,this._view},afterLoad:function(){this._view.afterLoad()}}),Soundboard.Views.Friends=Backbone.View.extend({id:"friends-container",initialize:function(){this._friends=this.options.friends,this._friends.bind("select",this.selectFriend,this),this._facepileView=new Soundboard.Views.Facepile({friends:this._friends}),this._artistsView=new Soundboard.Views.FriendArtists({friends:this._friends}),this._headerView=new Soundboard.Views.FriendHeader({friends:this._friends})},remove:function(){return this._friends.unbind("select",this.selectFriend),this._facepileView.remove(),this._artistsView.remove(),this._headerView.remove(),Backbone.View.prototype.remove.call(this)},render:function(){return this.$el.append(this._facepileView.render().el),this.$el.append(this._headerView.render().el),this.$el.append(this._artistsView.render().el),this},selectFriend:function(e){var t=this,n=this._artistsView.setBucketFor(e);if(!n)return;n.memoizedFetch({success:function(n,r){e.isSoundboardUser()||t._headerView.render(),t._artistsView.render()}}),this._headerView.render(),this._artistsView.render()},truncateText:function(){this._artistsView.truncateText()}}),Soundboard.TabDocuments.Friends=Soundboard.TabDocuments.Artists.extend({defaults:{displayName:"Friends"},viewCtor:Soundboard.Views.Friends,initialize:function(){Soundboard.TabDocuments.Artists.prototype.initialize.call(this),Soundboard.currentUser.isGuest()||(this.friends=this._viewOptions.friends=Soundboard.currentUser.friends,this.friends.memoizedFetch())}}),Soundboard.Views.Liked=Backbone.View.extend({className:"feed-container",events:{"click .scroll-to-top":"scrollToTop"},initialize:function(){_.bindAll(this,"render","run","scrollToTop"),this.user=this.options.user,this.likedArtistUpdates=this.user.likedArtistUpdates,this.context=this.options.context,this.likedArtistUpdates.bind("add",this._onItemAdded,this),this.likedArtistUpdates.bind("remove",this._onItemRemoved,this),this.perPage=30,this.currentPage=Math.floor(this.likedArtistUpdates.length/this.perPage)||1,this.maxComments=Soundboard.CONSTANTS.FEED_COMMENTS,this.fetching=!1,this.$el.html(JST["soundboard/templates/liked"]()),this.$likedItems=this.$(".feed-items"),this.$scrollButton=this.$(".scroll-to-top"),this._layout=new Soundboard.Layouts.ColumnarStack(this,this.$likedItems)},render:function(){var e=this,t;if(this.fetching||this.$el.is(":hidden"))return this;$("#profile-nav span.share").show(),Soundboard.Utils.VariableWidth.flagProfileView(!0),this._resetMasonry(),this._layout.clean(),this._layout.setup(),this.$likedItems.empty(),this._insertProfileInfoView(),$(window).on("scroll",this.run),this.user.id===Soundboard.currentUser.id?t='Items you &ldquo;like&rdquo; from the <a href="/#discover">discover tab</a> will be saved for you here.':t=this.user.get("name")+" has not liked any updates yet.";if(this.likedArtistUpdates.length===0&&!this.likedArtistUpdates.isLoading()){var n=new Soundboard.Views.EmptyStream({className:"liked-empty",message:t});e.$likedItems.append(n.render().el),e._layout.positionView(n),n.$el.css("width",""),this.$(".loading").hide(),Soundboard.Utils.VariableWidth.flagLikedEmptyStream(!0),Soundboard.Utils.VariableWidth.updateLikedEmpty(!0)}else{var r=this.likedArtistUpdates.length,i=Soundboard.Utils.VariableWidth.getNumOfColumns()-1-r;Soundboard.Utils.VariableWidth.flagLikedEmptyStream(!1),Soundboard.Utils.VariableWidth.setNumOfArtistUpdates(r);for(var s=0;s<i;s++)e.$likedItems.append((new Soundboard.Views.ArtistUpdateEmpty).render().el);this.likedArtistUpdates.each(function(t){var n=new Soundboard.Views.ArtistUpdate({item:t});e.$likedItems.append(n.render().el),e._layout.positionView(n)}),this.likedArtistUpdates.isLoading()||(this.likedArtistUpdates.hasMore=this.likedArtistUpdates.length>=this.perPage,this.$(".loading").toggle(this.likedArtistUpdates.hasMore)),this.$likedItems.masonry({isAnimated:!1,isRTL:!0,columnWidth:242,gutterWidth:10,isFitWidth:!0})}return this.$scrollButton.removeClass("visible"),Soundboard.Utils.VariableWidth.updateLikedFeedItems(),this},run:function(){var e,t,n,r,i,s,o;if(!this.$el.is(":visible"))return;if(this.fetching)return;t=$(window).height(),e=$(document).height(),n=t*.66,r=window.scrollY||$(window).scrollTop(),i=t+r,s=this.$el.offset().top,o=this.likedArtistUpdates.length>0&&r>s+1,o!==this._scrolled&&(this.$scrollButton.toggleClass("visible",o),this._scrolled=o),e>n&&e<i+n&&this._getNextPage()},remove:function(){this._layout.clean(),this._resetMasonry(),Soundboard.Utils.VariableWidth.flagProfileView(!1),this.likedArtistUpdates.unbind("add",this._onItemAdded),this.likedArtistUpdates.unbind("remove",this._onItemRemoved),$(window).off("scroll",this.run),Backbone.View.prototype.remove.call(this)},scrollToTop:function(){$("html,body").animate({scrollTop:0},200)},_onItemAdded:function(e){var t=new Soundboard.Views.ArtistUpdate({item:e});this.$likedItems.append(t.render().el),this._layout.positionView(t)},_resetMasonry:function(){this.$likedItems.hasClass("masonry")&&this.$likedItems.masonry("destroy")},_onItemRemoved:function(e){var t=this,n=!1;if(this.context==="public")return;this._layout.childViews.each(function(r){if(r.item===e){t.$likedItems.masonry("remove",r),t.$likedItems.masonry("reload"),t.likedArtistUpdates.size()<5?t.render():(n=t._layout.removeView(r),n&&t.render()),Soundboard.currentUser.likedArtistUpdates.length<=6&&Soundboard.Utils.VariableWidth.updateLikedFeedItems(),Soundboard.currentUser.likedArtistUpdates.length<1&&Soundboard.Utils.VariableWidth.updateLikedEmpty();return}})},_insertProfileInfoView:function(){var e=new Soundboard.Views.ProfileInfo({user:this.options.user});this.$likedItems.prepend(e.render().el),this._layout.positionView(e,!0,!0)},_getNextPage:function(){var e=this,t;if(!this.likedArtistUpdates.hasMore||this.likedArtistUpdates.isLoading())return;this.$(".loading").show(),this.fetching=!0,t=this.likedArtistUpdates.fetch({success:function(n,r){var i=JSON.parse(t.getResponseHeader("Pagination")),s=i&&i.next;e.currentPage++,e.fetching=!1,e.likedArtistUpdates.hasMore=s,e.$(".loading").toggle(s)},add:!0,data:{offset:this.currentPage*this.perPage,limit:this.perPage}})}}),Soundboard.Views.Profile=Backbone.View.extend({id:"profile-container",events:{"click span.share-profile":"shareProfile","click a.kudo-object":"unkudos","mouseenter .kudo":"startKudos","mouseleave .kudo":"endKudos"},initialize:function(){this.user=this.options.user,this.context=this.options.context||"private",_.bindAll(this,"fetchLikedArtistUpdates","gotoView"),this._likedView=new Soundboard.Views.Liked({user:this.user,context:this.context}),this._followedArtistsView=new Soundboard.Views.FollowedArtists({bucket:this.user.followedArtists,context:this.context}),this.$el.html(JST["soundboard/templates/profile"]({name:this.user.fullName(),imageUrl:this.user.get("photoUrl")+"?type=square",user_id:this.user.id,kudos:this.user.get("kudos"),kudosCount:this.user.get("kudos_received")})),this.$el.append(this._likedView.el),this.$el.append(this._followedArtistsView.el),this.sendingKudos=!1,this.kudosTimeout=!1,this.user.on("change:kudos_received",this.onKudosChange,this),Soundboard.Utils.VariableWidth.flagProfileView(!0)},render:function(){return this},renderSubviews:function(){if(this._likedView.fetching||this._followedArtistsView.fetching)return;this._likedView.render(),this._followedArtistsView.render()},remove:function(){this._likedView.remove(),this._followedArtistsView.remove(),Soundboard.Utils.VariableWidth.flagProfileView(!1),this.kudosTimeout&&window.clearTimeout(this.kudosTimeout),Backbone.View.prototype.remove.call(this)},fetchLikedArtistUpdates:function(){var e=this;this._likedView.fetching=!0,this.user.likedArtistUpdates.fetch({complete:function(t,n){e._likedView.fetching=!1,e.renderSubviews()},data:{comments:e._likedView.maxComments,offset:0,limit:e._likedView.perPage}})},fetchFollowedArtists:function(){var e=this;this._followedArtistsView.fetching=!0,this.user.followedArtists.fetch({complete:function(t,n){e._followedArtistsView.fetching=!1,e.renderSubviews()},data:{offset:0,limit:e._followedArtistsView.perPage}})},scrollToTop:function(){$("html,body").animate({scrollTop:0},200)},shareProfile:function(e){var t=this;Soundboard.Utils.Tracking.sharedProfile(!1),FB.ui(this._getShareOptions(),function(e){t._shareCallback(e)})},_getShareOptions:function(){var e="Check out my profile on Songbird.me.",t=this.user.followedArtists.models,n=t.length,r,i={method:"feed",link:Soundboard.CONSTANTS.SHARE_OPTIONS.link+"/profiles/"+this.user.id,ref:"share_user"};return n>0&&(e+=" I'm following "),n===1?e+=t[0].get("artist_name"):n>3?(r=t.slice(n-3,n),e+=r[0].get("artist_name"),e+=", "+r[1].get("artist_name"),e+=", "+r[2].get("artist_name"),e+=" and "+(n-3)+" others."):n<=3&&n>0&&(e+=t[0].get("artist_name"),n===3&&(e+=", "+t[1].get("artist_name")),e+=" and "+t[n-1].get("artist_name")),i.description=e,i},_shareCallback:function(e){e&&e.post_id&&Soundboard.Utils.Tracking.sharedProfile(!0)},gotoView:function(e){this.scrollToTop(),this._likedView.$el.toggle(!e),this._followedArtistsView.$el.toggle(e==="following"),e?e==="following"&&(this._followedArtistsView.render(),this.$("#profile-breadcrumbs").show(),$("#profile-nav span.share-profile").hide()):(this._likedView.render(),this.$("#profile-breadcrumbs").hide(),this.user.isCurrentUser()&&$("#profile-nav span.share-profile").show()),this.$("#profile-link").toggleClass("active",!e)},kudos:function(){var e=this,t=this.$(".kudo");this.sendingKudos||(this.sendingKudos=!0,t.removeClass("active kudoable"),t.addClass("complete completed"),Soundboard.currentUser.kudos(this.user))},unkudos:function(){var e=this.$(".kudo");if(!e.hasClass("complete"))return;e.removeClass("complete completed"),e.addClass("kudoable"),Soundboard.currentUser.unkudos(this.user)},startKudos:function(){var e=this,t=this.$(".kudo");t.hasClass("kudoable")&&(t.addClass("active"),$.browser.msie&&this.$(".circle").fadeOut(900,function(){e.$(".circle").fadeIn(10)}),this.kudosTimeout=window.setTimeout(function(){e.kudos()},700))},endKudos:function(){var e=this.$(".kudo");$.browser.msie&&this.$(".circle").fadeIn(900),this.kudosTimeout&&window.clearTimeout(this.kudosTimeout),e.hasClass("kudoable")&&e.removeClass("active")},onKudosChange:function(){var e=this.user.get("kudos_received"),t=this.$(".count .num"),n=this.$(".count .txt");this.sendingKudos=!1,e===0?(t.hide(),n.text("Give Kudos")):(t.text(e),t.show(),n.text("Kudos"))},afterLoad:function(){this.fetchFollowedArtists(),this.fetchLikedArtistUpdates()}}),Soundboard.TabDocuments.Profile=Soundboard.Models.TabDocument.extend({defaults:{displayName:"Profile"},enableSearch:!1,initialize:function(){},load:function(){return this._view=new Soundboard.Views.Profile({user:Soundboard.currentUser}),this._view.activeTab=this.activeTab,this._view},navigateTo:function(e){return this._view.gotoView(e),this.activeTab=e,this._view},afterLoad:function(){this._view.afterLoad()}}),function(){var e=Backbone.History.prototype.loadUrl;Backbone.History.prototype.loadUrl=function(t){var n=e.call(this,t);return n&&Soundboard.Utils.Tracking.loadedUrl(this.fragment),n}}(),Soundboard.Routers.TabbedDocument=Backbone.Router.extend({home:"discover/stream",routes:{discover:"discover","discover/:subtab":"discover","discover/:subtab/search/:term":"search","profiles/:id":"profile","profiles/:id/:subtab":"profile",friends:"friends","artists/:id":"viewArtist","artists/:artist_id/updates/:id":"viewArtistUpdate","playlists/:id":"viewPlaylist"},initialize:function(e){var t;this._documents=new Soundboard.Collections.TabbedDocuments([new Soundboard.TabDocuments.Discovery({id:"discover"}),new Soundboard.TabDocuments.Profile({id:"profile"}),new Soundboard.TabDocuments.Friends({id:"friends"})]),t=new Soundboard.Views.TabContainer({documents:this._documents}),$(e.selector).html(t.render().el)},discover:function(e){var t=this._documents.select("discover");Soundboard.search.val("");if(e)t.navigateTo(e);else{var n=t.activeTab,r=n?"discover/"+n:this.home;this.navigate(r,{replace:!0,trigger:!0})}},profile:function(e,t){var n,r;Soundboard.search.val(""),e===Soundboard.currentUser.id?(n=this._documents.select("profile"),n.navigateTo(t)):(n=this._documents.select("discover"),r=n.navigateTo("profile"),r.fetchProfile(e,t),n.activeTab="stream",r.activeTab="stream")},search:function(e,t){var n=this._documents.select("discover"),r=n.navigateTo(e),i=decodeURIComponent(t);Soundboard.search.val(i),i=Soundboard.Utils.htmlEscape(i),r.searchStream(i)},following:function(){this._documents.select("following")},friends:function(){this._documents.select("friends")},viewPlaylist:function(e){var t=this._documents.select("discover"),n=t.navigateTo("stream"),r=this,i=new Soundboard.Models.Playlist({id:e});i.fetch({success:function(e,t){Soundboard.lightbox.showPlaylist(e,{onCloseHandler:function(){r.navigate("/discover/stream")}})}})},viewArtist:function(e){var t=this._documents.select("discover"),n=t.navigateTo("stream");n.fetchArtistStream(e)},viewArtistUpdate:function(e,t){var n=this,r=new Soundboard.Models.ArtistUpdate({id:t});this.viewArtist(e),r.fetch({success:function(t,r){Soundboard.lightbox.showArtistUpdate(t,{onCloseHandler:function(){n.navigate("/artists/"+e)}})}})}}),function(){this.JST||(this.JST={}),this.JST["soundboard/templates/artist"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push(""),model&&model.id&&(__p.push('\n  <img class="primary-photo" '),model.image&&model.image.url&&__p.push("\n       src=",model.image.url,""),__p.push('></img>\n  <div class="artist-header">\n  </div>\n  <div class="artist-article">\n    <div class="artist-title">\n      <span class="ellipsize title-text">',_.escape(model.artist_name),"</span>\n    </div>\n  </div>\n")),__p.push("\n");return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["soundboard/templates/artist_info"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="inner">\n  '),imageUrl&&__p.push('\n    <div class="artist-image-container">\n      <img class="artist-image" src=\'',imageUrl,'\' />\n      <div class="artist-header"></div>\n      <div class="artist-article">\n        <div class="artist-title">\n          <span class="ellipsize title-text">',name,"</span>\n        </div>\n      </div>\n    </div>\n  "),__p.push('\n\n  <div class="top-fans"></div>\n\n  '),hasTrack&&__p.push('\n    <div class="artist-info-player">\n    </div>\n  '),__p.push("\n\n  "),biography&&(__p.push('\n    <div class="biography">\n      <div class="biography-inner">\n        <p>\n          <strong>BIOGRAPHY &ndash;</strong> ',biography.text,"\n          "),biography.providerUrl&&__p.push('\n            &mdash; <a class="bio-provider" href="',biography.providerUrl,'" target="_blank" rel="nofollow">provided by ',biography.provider,'</a></p><br>\n            <p class="bio-license-info">Biography is available under the <a href="',biography.licenseUrl,'" target="_blank" rel="nofollow">Creative Commons Attribution/Share-Alike License</a>\n          '),__p.push("\n        </p>\n      </div>\n    </div>\n  ")),__p.push('\n\n  <div class="similar-recommended-artists recommended-artists">\n  </div>\n</div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["soundboard/templates/artist_info_player"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push(""),track&&__p.push('\n  <div class=\'artist-info-player-inner\'>\n    <div class="controls">\n        <h2>TOP TRACKS</h2>\n        <div class="player"></div>\n        <div class="trackmarks"></div>\n    </div>\n\n    <div class="buy-now">\n        <a class=\'attribution\' href="',track.purchase_url,'" target="_blank">\n          <div class="seven-digital"></div>\n          <div class="button">buy now</div>\n        </a>\n    </div>\n\n    <p class=\'track\'>',track.title||"","</p>\n    <p class='artist'>by ",name||"","</p>\n  </div>\n"),__p.push("\n");return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["soundboard/templates/artist_interstitial"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="empty-tiles-img">\n  <div class="artist-loading"></div>\n</div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["soundboard/templates/artist_join_prompt"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="lightbox-close-btn"></div>\n<div class="join">\n  <div class="artist-image">\n    <img src="',imageUrl,'" />\n  </div>\n\n  <div class="text-message">\n    Get <span class="artist-name">',name,'</span> content from across the web in one place.\n  </div>\n\n  <div class="join-button">join</div>\n  <div class="account-text">\n    already have an account? <span class="login">Login</span>\n  </div>\n</div>\n\n<div class="gutter continue">\n  Continue without logging in\n</div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["soundboard/templates/artist_join_prompt_fans"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="lightbox-close-btn"></div>\n<div class="join-fans">\n  <div class="text-message">\n    Connect with other <span class="artist-name">',name,'</span> fans and discover new music.\n  </div>\n\n  <div class="fans users-facepile">\n    <div class="artist-image">\n      <img src="',imageUrl,'" />\n    </div>\n  </div>\n\n  <div class="join-button">join</div>\n  <div class="account-text">\n    already have an account? <span class="login">Login</span>\n  </div>\n</div>\n\n<div class="gutter continue">\n  Continue without logging in\n</div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["soundboard/templates/artist_rollover"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="artist-rollover-dim" />\n<div class="artist-rollover-img" />\n<div class="artist-actions-wrapper"></div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["soundboard/templates/artist_title"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<span class="ellipsized title-text title-text-first-row">'
,_.escape(topLine),"</span>\n"),bottomLine&&__p.push('\n  <span class="ellipsized title-text title-text-second-row">',_.escape(bottomLine),"</span>\n"),__p.push('\n<span class="clearer"></span>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["soundboard/templates/artist_update"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push("");var topOffset=Math.round((height-cropHeight)/2);__p.push('\n<div class="image" style="height: ',cropHeight,'px;">\n  <img width="',width,'" height="',height,'" src="',src,'" style="top: ',-topOffset,'px" alt="',artist.artist_name,'">\n  '),liked?__p.push('\n    <span class="liked"></span>\n  '):__p.push('\n    <span class="liked" style="display:none"></span>\n  '),__p.push('\n\n  <div class="overlay">\n    '),(type==="video"||type==="audio")&&__p.push('\n      <div class="play"></div>\n    '),__p.push('\n  </div>\n</div>\n\n<div class="description">\n  <p><a href="#artists/',artist.id,'" class="artist">',artist.artist_name,'</a>  <span class="inner">',description,"</span></p>\n\n  "),user&&(__p.push('\n    <div class="attribution">\n      <a href="#profiles/',user.id,'">\n        <img src="http://graph.facebook.com/',user.facebook_id,'/picture?width=22&height=22"/>\n        <span class="via">by </span>\n        <span class="user-name">',user.name,"\n          "),Soundboard.currentUser.isGuest()?__p.push("\n            ",user.last_name[0],"\n            "):__p.push("\n            ",user.last_name,"\n            "),__p.push("\n        </span>\n      </a>\n    </div>\n  ")),__p.push('\n\n  <div class="actions">\n    '),liked?__p.push('\n      <span class="action unlike">Unlike</span>\n    '):__p.push('\n      <span class="action like">Like</span>\n    '),__p.push('\n    <span class="dot">&#9642;</span>\n\n    <span class="action comment">Comment</span>\n    <span class="dot">&#9642;</span>\n    <span class="action share">Share</span>\n\n    <span class="count comment-count">',commentCount,'</span>\n    <span class="count like-count">',likeCount,'</span>\n  </div>\n\n  <ul class="comments">\n  </ul>\n\n  '),commentCount>3&&__p.push('\n    <div class="more_comments">\n      <span class="view_comments" data-comments=true>',commentCount," comments ...</span>\n    </div>\n  "),__p.push("\n\n</div>\n")}return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["soundboard/templates/artist_update_empty"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="inner"></div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["soundboard/templates/artists_panel"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push("<h2>",title,"</h2>\n"),showLoader&&__p.push('\n  <div class="artist-panel-loading">\n    <img src="',Soundboard.CONSTANTS.IMAGES.loader_gray,'">\n  </div>\n'),__p.push("\n<ul></ul>\n"),linkToMore&&__p.push('\n  <a href="',linkToMoreURL,'" class="more">see all</a>\n'),__p.push("\n");return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["soundboard/templates/comment"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="hr"></div>\n<div class="user-image">\n  '),lightbox?__p.push('\n    <a href="#profiles/',user.id,'" target="_blank">\n  '):__p.push('\n    <a href="#profiles/',user.id,'">\n  '),__p.push('\n    <img src="http://graph.facebook.com/',user.facebook_id,'/picture?width=32&height=32" class="user-image"/>\n  </a>\n</div>\n\n<div class="comment-body">\n\n  '),lightbox?__p.push('\n    <a class="comment-user" href="#profiles/',user.id,'" target="_blank">\n  '):__p.push('\n    <a class="comment-user" href="#profiles/',user.id,'">\n  '),__p.push("\n    ",user.name,"\n    "),Soundboard.currentUser.isGuest()?__p.push("\n      ",user.last_name[0],"\n    "):__p.push("\n      ",user.last_name,"\n    "),__p.push('\n  </a>\n\n  <span class="comment-text">\n    ',comment,"\n  </span>\n\n</div>\n\n"),deleteable&&__p.push('\n  <div class="delete" style="display:none">\n    <span class="delete-tooltip" style="display: none;">Delete</span>\n  </div>\n'),__p.push('\n\n<div class="clearer"></div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["soundboard/templates/discovered_artist_rollover"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<ul class="artist-actions discovered-artist">\n  <li class="artist-action-btn rollover-follow artist-follow">\n    <span>Follow</span>\n  </li>\n  <li class="artist-action-divider">\n    <div class="artist-divider-line"></div>\n  </li>\n  <li class="artist-action-btn rollover-share artist-share">\n    <span>Share</span>\n  </li>\n  <li class="artist-action-divider">\n    <div class="artist-divider-line"></div>\n  </li>\n  <li class="artist-action-btn rollover-skip artist-dismiss">\n    <span>Skip</span>\n  </li>\n</ul>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["soundboard/templates/discovery"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div id="public-profile" style="display:none"></div>\n<div id="discover-nav">\n  <a href="#discover/stream" id="whats-new-link">What\'s New</a>\n  <span id="whats-new-breadcrumbs" style="display:none"></span>\n  <span class="follow" style="display:none">Follow</a>\n</div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["soundboard/templates/empty_artist"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="empty-tiles-img">\n  '),message&&__p.push('\n    <div class="artist-message">\n      <p class="artist-prompt">',message,"</p>\n    </div>\n  "),__p.push("\n</div>\n");return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["soundboard/templates/empty_facepile"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<span class="pos ',pos,'">',pos,"</span>\n");return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["soundboard/templates/empty_stream"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="empty-background"></div>\n<div class="message-container">\n  <div class="message">',message,"</div>\n</div>\n");return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["soundboard/templates/expanded_artist"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push("");var track=artistModel.track;__p.push("\n");var title=_.escape(artistModel.artist_name);__p.push('\n\n<div class="expanded-headline">\n  <div class="inner">\n    <span class="expanded-title">\n      '),title&&__p.push("\n        ",title.toUpperCase(),"\n      "),__p.push('\n    </span>\n  </div>\n</div>\n<img class="expanded-photo"\n  ');var image=artistModel.image;__p.push("\n  "),image&&image.url&&__p.push("\n     src=",image.url,"\n  "),__p.push('></img>\n<div class="expanded-summary-container">\n  <div class="expanded-summary"></div>\n</div>\n')}return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["soundboard/templates/expanded_artist/expanded_artist_bio"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push('<div class="expanded-bio">\n  ');if(bio){__p.push("\n    ");var license=bio.license;__p.push("\n    <p><b>ARTIST BIO</b> - ",bio.text," "),license&&__p.push('&mdash; <a class="bio-provider" href="',license["attribution-url"],'" target="_blank" rel="nofollow">provided by ',bio.site,'</a></p><br>\n    <p class="bio-license-info">Biography is available under the <a href="',license.url,'" target="_blank" rel="nofollow">Creative Commons Attribution/Share-Alike License</a>'),__p.push("</p>\n  ")}__p.push("\n</div>\n")}return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["soundboard/templates/expanded_artist_actions"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<ul class="expanded-actions',discoverable?" discoverable":"",'">\n  <li class="artist-action-btn artist-',followed?"unfollow":"follow",'">\n    <span>',followed?"Unfollow":"Follow",'</span>\n  </li>\n  <li class="artist-action-divider">\n    <div class="artist-divider-line"></div>\n  </li>\n  <li class="artist-action-btn artist-share">\n    <span>',shareType,"</span>\n  </li>\n  "),discoverable&&__p.push('\n    <li class="artist-action-divider">\n      <div class="artist-divider-line"></div>\n    </li>\n    <li class="artist-action-btn artist-dismiss">\n      <span>Skip</span>\n    </li>\n  '),__p.push("\n</ul>\n");return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["soundboard/templates/expanded_artist_update"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="box ',type,'">\n'),type==="photo"?__p.push('\n  <img src="',src,'">\n  <div class="overlay"></div>\n'):__p.push('\n  <div class="widget"></div>\n'),__p.push('\n</div>\n\n<div class="lightbox-close-btn"></div>\n\n<div class="description">\n\n  <div class="controls">\n    <span class="button share">Share</span>\n    '),liked?__p.push('\n      <span class="button unlike">\n        <span class="text">Liked</span>\n        <span class="hover">Unlike</span>\n        <span class="star"></span>\n      </span>\n    '):__p.push('\n      <span class="button like">\n        <span class="text">Like</span>\n        <span class="hover"></span>\n        <span class="star"></span>\n      </span>\n    '),__p.push('\n  </div>\n\n  <div class="content">\n    '),user&&(__p.push('\n      <div class="attribution">\n        <a href="#profiles/',user.id,'" target="_blank">\n          <img src="http://graph.facebook.com/',user.facebook_id,'/picture?width=22&height=22"/>\n          <span class="via">via </span>\n          <span class="user-name">',user.name,"\n            "),Soundboard.currentUser.isGuest()?__p.push("\n              ",user.last_name[0],"\n            "):__p.push("\n              ",user.last_name,"\n            "),__p.push("\n          </span>\n        </a>\n      </div>\n    ")),__p.push("\n    <h2>",artist.artist_name,"</h2>\n    <p>",description,'<a href="',url,'" target="_blank" class="source">source</a></p>\n    <ul class="comments"></ul>\n  </div>\n\n  <div class="comment-box">\n    <div class="hr"></div>\n    '),commentCount>=Soundboard.CONSTANTS.MAX_COMMENTS?__p.push('\n      <span class="comments-closed">Comments are closed.</span>\n    '):(__p.push('\n      <img src="',Soundboard.currentUser.get("photoUrl"),'?width=32&height=32"/>\n      <input maxlength="250" type="text" autocomplete="off" spellcheck="false" placeholder="Add a comment..." '),Soundboard.currentUser.isGuest()||__p.push(' autofocus="autofocus" '),__p.push(">\n    ")),__p.push("\n  </div>\n</div>\n");return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["soundboard/templates/expanded_login_prompt"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="lightbox-close-btn"></div>\n<div id="expanded-login-prompt-logo"></div>\n<div id="expanded-login-prompt-blurb">\n  <a id="expanded-login-prompt-fb" class="fb" href="',facebookOauthUrl,'">\n    <span class="image"></span>\n  </a>\n\n  <span class="text">\n    Donât worry, weâll never post anything to<br>\n    Facebook without your permission.\n  </span>\n\n</div>\n\n<div class="poll">\n  <span class="text">\n    Not a Facebook user?<br>\n    What other sign up methods would you prefer?<br>\n  </span>\n\n  <div class="buttons">\n    <span class="button twitter"></span>\n    <span class="button google"></span>\n    <span class="button email"></span>\n  </div>\n</div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["soundboard/templates/expanded_player"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push(""),track&&__p.push('\n  <div class="attribution-ribbon column">\n    <div class="inner">\n      <div class="player"></div>\n        <div class="trackmarks"></div>\n        <p class=\'track\'>',track.title||"","<br>by ",name||"","</p>\n        <a class='attribution' href=\"",track.purchase_url,'" target="_blank">\n          Get it here:<br>\n          <div class="seven-digital"></div>\n        </a>\n    </div>\n  </div>\n'),__p.push("\n");return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["soundboard/templates/expanded_playlist"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="box video">\n  <div class="widget"></div>\n</div>\n\n<div class="lightbox-close-btn"></div>\n\n<div class="description">\n\n  <div class="controls">\n    <span class="button share">Share</span>\n  </div>\n\n  <div class="content">\n    <h2>',playlist.get("name"),"</h2>\n    <p>",playlist.get("description"),'<a href="',playlist.get("youtube_url"),'" target="_blank" class="source">source</a></p>\n    <div class="playlist-artists">\n      '),artists.length>0&&__p.push("\n        Featuring: ",artists,"\n      "),__p.push("\n    </div>\n  </div>\n\n</div>\n");return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["soundboard/templates/expanded_signup_prompt"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="lightbox-close-btn"></div>\n\n  <img class="artist-image" src="',Soundboard.CONSTANTS.IMAGES.loader_black,'" />\n  <div class="description">\n    <h2>Get Free ',artist.artist_name," Updates</h2>\n    <p>Login to follow ",artist.artist_name,' and we\'ll\n       automatically add the latest content to your\n       personalized feed.</p>\n  </div>\n  <div class="hr"></div>\n  <a class="no-thanks-btn">No Thanks</a>\n  <a href= "',facebookOauthUrl,'" id="expanded-login-prompt-fb">\n    <span class="f-logo"></span>\n    <span class="divider"></span>\n    <span class="text">Login with Facebook</span>\n  </a>\n\n</div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["soundboard/templates/expanded_ugc_form"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="ugc-image-uploader">\n  <h2>Upload Content</h2>\n  <p>Add your own concert photos or fan art to any artist\'s page</p>\n  <form enctype="multipart/form-data" action="" method="post">\n    <input class="uploader" type="file" name="file" id="uploader"/>\n  </form>\n  <div class="choose-file-button">Choose File</div>\n</div>\n\n<div class="ugc-disclaimer">\n  <p>When posting, I agree to:<br>\n     1) only upload content that I have created or have permission to post</br>\n     2) never post nudity or explicit images</br>\n     3) be respectful of community standards including artists & other users\n  </p>\n  <a href=\'http://getsongbird.com/about/terms.php\' target=\'_blank\'>Read the full terms of use</a>\n</div>\n\n<div class="ugc-content-inputs">\n  <div class="hr"></div>\n  <div class="content-image-container">\n  </div>\n  <div class="artist-name-input"></div>\n  <div class="artist-name-error">\n    No page for that artist exists. Please enter a different artist name or\n    <a href="mailto:feedback@songbirdnest.com">email us</a>\n    so that a page can be created.\n  </div>\n  <textarea class="content-description-input" spellcheck="false" placeholder="Describe your Post..."></textarea>\n  <div class="fb-share-container">\n    <div class="fb-share-box-sprite"></div>\n    <span> Share on Facebook </span>\n    <input type="checkbox" checked="true" class="fb-share-box" />\n  </div>\n  <div class="post-button">Post</div>\n</div>\n\n\n\n\n\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["soundboard/templates/facepile"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<ul class="facepile-friends"></ul>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["soundboard/templates/facepile_friend"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push("");var photoUrl=friend.photoUrl;__p.push("\n");var name=friend.name;__p.push('\n\n<img src="',photoUrl,'">\n<span class="facepile-tooltip" style="display: none;">',name,"</span>\n")}return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["soundboard/templates/followed_artist_in_panel"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<a href="#artists/',artistId,'" class="artist">\n  <img class="artist-image"'),artistImageUrl&&__p.push("src=",artistImageUrl,""),__p.push(' />\n  <span class="artist-name">',artistName,"</span>\n</a>\n"),isFollowed?__p.push('\n  <span class="unfollow">following</span>\n'):__p.push('\n  <span class="follow">follow</span>\n'),__p.push("\n");return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["soundboard/templates/followed_artists_panel_empty"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<h2>NOT FOLLOWING ANY ARTISTS</h2>\n<p class="empty-instructions">Follow artists from the <a href="/#discover">discover tab</a>\n to have their content included in your What\'s New feed</p>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["soundboard/templates/followed_artists_panel_empty_public"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push("<h2>NOT FOLLOWING ANY ARTISTS</h2>\n");return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["soundboard/templates/friend_header"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push(""),soundboardUser?__p.push('\n  <div class="friend-collection-wrapper">\n    <img src="',friend.photoUrl,'">\n    <p class="friend-notice">',message,"</p>\n  </div>\n"):__p.push('\n    <p class="friend-notice">',message||"","</p>\n"),__p.push("\n");return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["soundboard/templates/guest_header"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="promo-banner-fixed">\n  <div class="inner">\n    <span id="join" title="Join" class="button join">\n      Join\n    </span>\n    <span id="log_in" title="Login" class="button login">\n      Login\n    </span>\n    <span class="signed-out-copy">\n      Get personalized content from artists you love instantly.\n    </span>\n    <a class="promo-button signed-out android" href="https://play.google.com/store/apps/details?id=com.songbirdnest.mediaplayer" target="_blank"><span></span></a>\n    <a class="promo-button signed-out ios" href="https://itunes.apple.com/app/songbird.me/id561535312" target="_blank"><span></span></a>\n    <span class="divider"></span>\n  </div>\n</div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["soundboard/templates/lightbox"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="darkbox">\n  <div class="lightbox-details">\n    <div id="left-column" class="column gutter">\n    </div>\n\n    <div class="expanded-content column">\n    </div>\n\n    <div class="column gutter">\n      <a class="lightbox-close-btn">\n        <span></span>\n      </a>\n    </div>\n\n  </div>\n</div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["soundboard/templates/liked"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<ul class="feed-items"></ul>\n<div class="loading">\n  <img src="',Soundboard.CONSTANTS.IMAGES.loader_gray,'">\n</div>\n<div class="scroll-to-top">\n  <strong>Back to Top</strong>\n</div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["soundboard/templates/message"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="message-actions" >\n  <button type="button"></button>\n  <div class="content">\n    '),title&&__p.push("\n      <b>",title,".</b>\n    "),__p.push("\n    ",message,"\n  </div>\n</div>\n");return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["soundboard/templates/other_info"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push("");if(otherInfo){__p.push("\n  ");for(var key in otherInfo){__p.push('\n    <div class="other-data-box">\n      <h2>',key,"</h2>\n      <ul>\n        "),values=otherInfo[key],__p.push("\n        ");for(var i=0;i<values.length;i++)__p.push("\n          <li>",values[i].name,"</li>\n        ");__p.push("\n      </ul>\n    </div>\n  ")}__p.push("\n")}__p.push("\n")}return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["soundboard/templates/other_list"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push("<h2>",title,"</h2>\n");if(list){__p.push("\n  <ul>\n    ");var len=list.length;__p.push("\n    ");for(var i=0;i<len;i++)__p.push("\n      <li>",list[i].name,"</li>\n    ");__p.push("\n  </ul>\n")}else __p.push("\n  <p>wait for it ...</p>\n");__p.push("\n")}return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["soundboard/templates/player"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div id="play-button" class="',state,' player-button"></div>\n<div id="prev-button" class="player-button"></div>\n<div id="next-button" class="player-button"></div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["soundboard/templates/profile"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div id="profile-nav">\n  <a href="#profiles/',user_id,"\">\n    <img src='",imageUrl,"' />\n  </a>\n  <a href=\"#profiles/",user_id,'" id="profile-link">\n    ',name,'\n  </a>\n  <span id="profile-breadcrumbs" style="display:none"></span>\n  <span class="share-profile">Share</span>\n\n  '),Soundboard.currentUser.isGuest()||(__p.push("\n\n    "),Soundboard.currentUser.id===user_id?(__p.push("\n\n      "),kudosCount>0&&__p.push('\n        <span class="count own">\n          <span class="num">',kudosCount,'</span>\n          <span class="txt">Kudos</span>\n        </span>\n\n        <span class="divider"></span>\n      '),__p.push("\n\n    ")):(__p.push('\n\n      <div class="kudo ',kudos?"complete":"kudoable",'">\n        <a class="kudo-object">\n          <div class="opening">\n            <div class="circle">&nbsp;</div>\n          </div>\n        </a>\n      </div>\n\n      <span class="count">\n        '),kudosCount===0?__p.push('\n          <span class="num"></span>\n          <span class="txt">Give Kudos</span>\n        '):__p.push('\n          <span class="num">',kudosCount,'</span>\n          <span class="txt">Kudos</span>\n        '),__p.push("\n      </span>\n\n    ")),__p.push("\n\n  ")),__p.push("\n</div>\n\n");return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["soundboard/templates/profile_info"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="inner">\n'),imageUrl&&__p.push('\n  <div class="profile-image profile-info-section" style="background-image: url(',imageUrl,')" />\n'),__p.push('\n\n  <div class="followed-artists profile-info-section">\n  </div>\n</div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["soundboard/templates/promo_banner"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="promo-banner-fixed">\n  <div class="inner">\n    <span class="signed-in-copy">\n      Take Songbird on the go! Free apps for iOS & Android\n    </span>\n    <a class="promo-button signed-in android" href="https://play.google.com/store/apps/details?id=com.songbirdnest.mediaplayer" target="_blank"><span></span></a>\n    <a class="promo-button signed-in ios" href="https://itunes.apple.com/app/songbird.me/id561535312" target="_blank"><span></span></a>\n  </div>\n  <div class="close-btn"></div>\n</div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["soundboard/templates/prompt/follow_prompt"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div id="banner" class="prompt-banner">\n  <span id="banner-content">Follow artists you like</span>\n  <span id="banner-arrow" class="prompt-banner"></span>\n</div>\n<div id="banner-shadow" class="prompt-banner"></div>\n<div id="prompt-details">\n  <p>Select artists to follow from <a href="#discover" id="prompt-discover-link">Discover</a></p>\n</div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["soundboard/templates/prompt/friend_prompt"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div id="banner" class="prompt-banner">\n  <span id="banner-content">Select a friend to see artists they follow</span>\n  <span id="banner-arrow"></span>\n</div>\n<div id="banner-shadow" class="prompt-banner"></div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["soundboard/templates/prompt/invite_prompt"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="friend-collection-wrapper">\n  <img src="',friend.photoUrl,'">\n  <p class="inactive friend-notice">',friend.name,' hasn\'t followed any artists yet &#x2026;</p>\n</div>\n<div id="invite-banner-container">\n  <div id="banner" class="invite-banner">\n    <span id="banner-content">Help ',friend.first_name,' get started</span>\n    <span id="invite-button">Invite</span>\n    <div id="invite-pointer">\n      <span id="invite-pointer-head"></span>\n    </div>\n    <span id="banner-arrow"></span>\n  </div>\n  <div id="banner-shadow" class="invite-banner"></div>\n</div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["soundboard/templates/recommended_artist_in_panel"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<a href="#artists/',artistId,'" class="artist">\n  <img class="artist-image"'),artistImageUrl&&__p.push("src=",artistImageUrl,""),__p.push(' />\n  <span class="artist-name">',artistName,'</span>\n</a>\n<span class="dismiss"></span>\n<span class="follow">follow</span>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["soundboard/templates/search"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<input class="search-input" type="text" autocomplete="off" spellcheck="false" placeholder="',placeholder,'">\n<span class="search-button"></span>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["soundboard/templates/shared_artist_rollover"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<ul class="artist-actions standard-actions">\n'),isFollowed?__p.push('\n  <li class="artist-action-btn rollover-unfollow artist-unfollow">\n    <span>Unfollow</span>\n  </li>\n'):__p.push('\n  <li class="artist-action-btn rollover-follow artist-follow">\n    <span>Follow</span>\n  </li>\n'),__p.push('\n  <li class="artist-action-divider">\n    <div class="artist-divider-line"></div>\n  </li>\n  <li class="artist-action-btn rollover-share artist-share">\n    <span>',shareType,"</span>\n  </li>\n</ul>\n");return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["soundboard/templates/tab_container"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="document-selector">\n  <ul>\n    '),_.each(documents,function(e){__p.push('\n      <li id="',e.id,'-tab" class="document-tab">\n        <span class="tab-text"><a href="#',e.id=="profile"?"profiles/"+user.id:e.id,'">',e.displayName,"</a></span>\n        <img class='tab-notch' src=\"",Soundboard.CONSTANTS.IMAGES.tab_notch,'"></img>\n      </li>\n    ')}),__p.push('\n  </ul>\n</div>\n<div class="clearer"></div>\n<div class="document-pane"></div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["soundboard/templates/trending_artist_in_panel"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<a href="#artists/',artistId,'" class="artist">\n  <img class="artist-image"'),artistImageUrl&&__p.push("src=",artistImageUrl,""),__p.push(' />\n  <span class="artist-name">',artistName,"</span>\n</a>\n"),isFollowed?__p.push('\n<span class="unfollow">following</span>\n'):__p.push('\n<span class="follow">follow</span>\n'),__p.push("\n");return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["soundboard/templates/update_item"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="image">\n  <img width="',width,'" height="',height,'" src="',src,'">\n  <div class="border"></div>\n</div>\n\n<div class="description">\n  <span class="artist">',artist.artist_name,"</span> ",description,"\n</div>\n");return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["soundboard/templates/user_facepile"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<a href="#profiles/',user.id,'">\n  <img src="',imageUrl,'" />\n  <span class="pos ',pos,'">',pos,'</span>\n</a>\n<div class="face-tooltip" style="display: none;">\n  <span class="name">',user.fullName(),'</span>\n  <span class="likes">',user.get("like_count"),'</span>\n  <span class="comments">',user.get("comment_count"),'</span>\n  <span class="uploads">',user.get("upload_count"),'</span>\n  <span class="tail"></span>\n</div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["soundboard/templates/users_facepile"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push("<h2>",title,'</h2>\n\n<div class="facepile"></div>\n<div class="clearer"></div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["soundboard/templates/whats_new_panel"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="inner"></div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["soundboard/templates/whatsnew"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<ul class="feed-items"></ul>\n<div class="loading">\n  <img src="',Soundboard.CONSTANTS.IMAGES.loader_gray,'">\n</div>\n<div class="scroll-to-top">\n  <strong>Back to Top</strong>\n</div>\n');return __p.join("")}}.call(this),Soundboard.Utils.ABTesting={allocate:function(e,t){var n=$.cookie("ab-"+e),r;return n?n:(r=Math.random(),r<.5?n=t[0]:n=t[1],$.cookie("ab-"+e,n,{expires:90,path:"/"}),n)},track:function(e,t){Soundboard.Utils.Tracking.trackGA("AB-Testing",e+"-"+t)}},window.Soundboard=window.Soundboard||{Utils:{}},Soundboard.Utils.resizeableBackground=function(e){function o(){var e=$(window),t=e.width()/e.height();n.toggleClass("lock-bottom",t>i)}var t=new Image,n=$(e),r=n.css("backgroundImage").match(/url\((.+)\)/),i,s;r&&(t.onload=function(){$("body").addClass("background-loaded"),i=this.width/this.height,o()},s=r[1],s=s.replace(/(^")|("$)/g,""),t.src=s,$(window).resize(o))},function(e){e.fn.ellipsize=function(){function t(e,n,r){r=r||" ";var i=e.split(r),o=i.slice(0,i.length-1).join(r),u;return s.text(o),u=s.height(),n!==u?t(o,n,r):o}function n(e,t){var n=t.width(),r=!1;return e.addClass("nobreak"),e.outerWidth()>n&&(e.addClass("ellipsis"),r=!0),r}var r=this.children(".ellipsize"),i=r.text(),s,o,u,a,f,l,c,h;if(r.length===0||i.length===0)return;s=r.after("<span id='tmp-ellipsize' class='title-text'style='position:absolute;visibility:hidden'>A</span>").next("#tmp-ellipsize"),o=s.height();if(o===0){s.remove();return}u=r.height()/o,u===1?(this.html(JST["soundboard/templates/artist_title"]({topLine:i,bottomLine:null})),e.browser.msie&&e.browser.version==="7.0"&&(h=this.children(".title-text-first-row").after("<span id='hack' class='ellipsized title-text title-text-second-row'></span>"
).next("#hack")),this.children(".title-text-first-row").addClass("pad-bottom"),n(this.children(".title-text-first-row"),this),h&&h.remove()):(l=t(i,o),c=i.substring(l.length+1),this.html(JST["soundboard/templates/artist_title"]({topLine:l,bottomLine:c})),a=this.children(".title-text-first-row"),f=this.children(".title-text-second-row"),n(a,this)?f.hide():n(f,this),a.outerWidth()>=f.outerWidth()?a.addClass("pad-bottom"):f.addClass("pad-top")),s.remove()}}(jQuery),Soundboard.Utils.resizeErrorDiv=function(){var e=$("#footer .inner").outerHeight(!0),t=$("#header").outerHeight(!0)+$(".document-selector").outerHeight(!0),n=$(window).height();$("#app > div.error").height(n-t-e)},Soundboard.Utils.htmlEscape=function(e){function n(e){return t[e]||e}if(!e)return e;var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"};return e.replace(/[&"'><]/g,n)};var _gaq=_gaq||[];_gaq.push(["_setAccount",Soundboard.CONSTANTS.GA.account]),Soundboard.Utils.Tracking={isTrackable:function(){return Soundboard.CONSTANTS.GA.enabled},startTracking:function(){if(!this.isTrackable()||!Soundboard.currentUser)return;this.userId=Soundboard.currentUser.id,FB.api("/me")},trackGA:function(e,t,n,r){if(!Soundboard.CONSTANTS.GA.enabled)return;var i=["_trackEvent",e,t];n&&i.push(n),r&&i.push(r),_gaq.push(i)},trackGAPage:function(e){if(!Soundboard.CONSTANTS.GA.enabled)return;_gaq.push(["_trackPageview",e])},invitedFriend:function(e,t){this.trackGA("Friends","invitation",e,t)},sharedArtist:function(e,t){var n=t.get("artist_name");this.trackGA("Artists",e,n)},sharedProfile:function(e){var t=e?"Share (completed)":"Share (clicked)";this.trackGA("Profile",t)},followedArtist:function(e){var t=e.get("artist_name");this.trackGA("Artists","follow",t)},unfollowedArtist:function(e){var t=e.get("artist_name");this.trackGA("Artists","unfollow",t)},dismissedArtist:function(e){var t=e.get("artist_name");this.trackGA("Artists","dismiss",t)},uploadedUgc:function(e){this.trackGA("Artists","upload ugc",e)},loadedUrl:function(e){e!=="discover"&&this.trackGAPage("/#"+e)},sawWelcomeScreen:function(){this.trackGA("Navigation","saw welcome screen")},searchedFor:function(e){this.trackGA("Artists","search",e)},guest:function(e,t){this.trackGA("Guest",e,t)},rightRail:function(e,t){this.trackGA("Right rail",e,t)},kudos:function(e){this.trackGA("Profile","kudos",e.id)},unkudos:function(e){this.trackGA("Profile","unkudos",e.id)}},Soundboard.Utils.VariableWidth={maxWidth0:1020,maxWidth1:1272,maxWidth2:1524,width0:756,width1:1008,width2:1260,width3:1512,setupFlags:function(){var e=!1,t=!1,n=!1,r=!1,i=!1,s=3,o=0;this.flagEmptyStream=function(t){e=t},this.isEmptyStream=function(){return e},this.flagLikedEmptyStream=function(e){t=e},this.isLikedEmptyStream=function(){return t},this.flagProfileView=function(e){n=e},this.isProfileView=function(){return n},this.flagArtistEmptyStream=function(e){r=e},this.isArtistEmptyStream=function(){return r},this.flagArtistInfoView=function(e){i=e},this.hasArtistsInfoView=function(){return i},this.setNumOfColumns=function(e){s=e},this.getNumOfColumns=function(){return s},this.setNumOfArtistUpdates=function(e){o=e},this.getNumOfArtistsUpdates=function(){return o}},updateSize:function(e){function t(e){$("ul.feed-items").hasClass("masonry")&&(e||$("ul.feed-items.masonry").masonry("option",{isFitWidth:!1}),$("ul.feed-items.masonry").masonry("reload"))}function n(e){$("#app, #footer, #header.resize").css("width",e),$("ul.feed-items").css("width",e-10),$("#message").css("width",e-2)}function r(e){e===!0?($(".promo-banner-fixed").css("left","50%"),$(".promo-banner-fixed").css("margin-left","-376px")):($(".promo-banner-fixed").css("left","0%"),$(".promo-banner-fixed").css("margin-left","1px"))}var i=$(window).width(),s=$("div.instant-search-field"),o=$("#app");$("#friends-tab").css("border-right","1px solid rgb(255, 255, 255)"),i<=this.maxWidth0&&$("#friends-tab").css("border-right","1px solid rgb(0, 0, 0)"),i<=this.width0+10?r(!1):r(!0),i<=this.maxWidth0&&(o.width()!==this.width0||e)?(this.setNumOfColumns(3),this.getNumOfArtistsUpdates()<Soundboard.CONSTANTS.MAX_COLUMNS-1&&this.getNumOfArtistsUpdates()>0&&!e&&this.updateEmptyTiles(),n(this.width0),t(e)):i>this.maxWidth0&&i<=this.maxWidth1&&(o.width()!==this.width1||e)?(this.setNumOfColumns(4),this.getNumOfArtistsUpdates()<Soundboard.CONSTANTS.MAX_COLUMNS-1&&this.getNumOfArtistsUpdates()>0&&!e&&this.updateEmptyTiles(),n(this.width1),t(e)):i>this.maxWidth1&&i<=this.maxWidth2&&(o.width()!==this.width2||e)?(this.setNumOfColumns(5),this.getNumOfArtistsUpdates()<Soundboard.CONSTANTS.MAX_COLUMNS-1&&this.getNumOfArtistsUpdates()>0&&!e&&this.updateEmptyTiles(),n(this.width2),t(e)):i>this.maxWidth2&&(o.width()!==this.width3||e)&&(this.setNumOfColumns(6),this.getNumOfArtistsUpdates()<Soundboard.CONSTANTS.MAX_COLUMNS-1&&this.getNumOfArtistsUpdates()>0&&!e&&this.updateEmptyTiles(),n(this.width3),t(e))},updateEmptyStream:function(){this.isEmptyStream()?this.updateWhatsNewEmpty():this.isArtistEmptyStream()&&this.updateArtistUpdatesEmpty()},updateWhatsNewEmpty:function(){var e=$(window).width(),t=$("li.whatsnew-empty, li.whatsnew-empty div.message-container"),n=$("li.whatsnew-empty, li.whatsnew-empty div.message");$("li.whats-new-panel").css("right",11),e<=this.maxWidth0?(t.css("width",493),n.css("top",48),n.css("width",400)):e<=this.maxWidth1?(t.css("width",745),n.css("top",63),n.css("width","100%")):e<=this.maxWidth2?(t.css("width",997),n.css("top",63),n.css("width","100%")):(t.css("width",1252),n.css("top",63),n.css("width","100%"))},updateArtistUpdatesEmpty:function(){var e=$(window).width(),t=$("li.artistupdates-empty div.message");Soundboard.Utils.VariableWidth.hasArtistsInfoView()?($("ul.feed-items").css("width","100%"),$("li.artist-info").css("right",11),e<=this.maxWidth0?t.css("width",493):e<=this.maxWidth1?t.css("width",746):e<=this.maxWidth2?t.css("width",996):t.css("width",1250)):e>this.maxWidth0&&this.updateWhatsNewNoticeNoPanel($("ul.feed-items"))},updateWhatsNewNoticeNoPanel:function(e){var t=$(window).width();t<=this.maxWidth0?e.css("width",this.width0-10):t<=this.maxWidth1?e.css("width",this.width1-10):t<=this.maxWidth2?e.css("width",this.width2-10):e.css("width",this.width3-10)},updateLikedFeedItems:function(){var e=$(window).width();this.updateWhatsNewNoticeNoPanel($("ul.feed-items")),$("li.profile-info").removeClass("masonry-brick"),$("li.profile-info").css("position","relative"),$("li.profile-info").css("float","right")},updateEmptyTiles:function(){var e=this.getNumOfColumns()-1-Soundboard.Utils.VariableWidth.getNumOfArtistsUpdates(),t;Soundboard.Utils.VariableWidth.isProfileView()?t=$("li.profile-info"):Soundboard.Utils.VariableWidth.hasArtistsInfoView()?t=$("li.artist-info:first"):t=$("li.whats-new-panel"),$("ul.masonry").masonry("remove",$(".artist-update-empty"));for(var n=0;n<e;n++)$((new Soundboard.Views.ArtistUpdateEmpty).render().el).insertAfter(t);$("ul.masonry").masonry("reload")},updateLikedEmpty:function(e){var t=$(window).width(),n=$("li.liked-empty div.message-container"),r=$("li.liked-empty div.message");$("ul.feed-items").css("width","100%"),e||$("li.profile-info").css("right",11),t<=this.maxWidth0?(n.css("width",494),r.css("top",55),r.css("width",440)):t<=this.maxWidth1?(n.css("width",746),r.css("top",70),r.css("width","100%")):t<=this.maxWidth2?(n.css("width",998),r.css("top",70),r.css("width","100%")):(n.css("width",1250),r.css("top",70),r.css("width","100%"))},updateInviteBanner:function(){var e=$(window).width();$("#invite-banner-container li").removeClass("display-none"),$("#invite-banner-container li").removeAttr("style"),e<=this.maxWidth0?($("#invite-banner-container li:nth-child(4)").addClass("display-none"),$("#invite-banner-container li:nth-child(5)").addClass("display-none"),$("#invite-banner-container li:nth-child(6)").addClass("display-none")):e<=this.maxWidth1?($("#invite-banner-container li:nth-child(4)").addClass("display-none"),$("#invite-banner-container li:nth-child(5)").addClass("display-none")):$("#invite-banner-container li:nth-child(6)").addClass("display-none")}},$.fn.animateWidth=function(e){this.css("width",e)},window.onresize=function(){Soundboard.Utils.VariableWidth.updateInviteBanner(),Soundboard.Utils.VariableWidth.updateSize(!1),Soundboard.Utils.VariableWidth.isProfileView()&&Soundboard.Utils.VariableWidth.isLikedEmptyStream()&&Soundboard.Utils.VariableWidth.updateLikedEmpty(),Soundboard.Utils.VariableWidth.updateEmptyStream()},Soundboard.Views.Artist=Backbone.View.extend({className:"artist",tagName:"li",events:{click:"onclick"},initialize:function(){_.bindAll(this,"render","renderLoading","truncateText","updateImage"),this.model&&(this.rolloverView=Soundboard.Views.ArtistRollover.viewFor({model:this.model}),this.model.bind("newrec",this.render,this),this.model.bind("change:image",this.updateImage,this),this.model.bind("change:collected",this.rolloverView.render,this),this.model.bind("beforedismiss",this.renderLoading,this),this.model.bind("afterfollow",this.render,this))},remove:function(){return this.model&&(this.model.unbind("newrec",this.render),this.model.unbind("change:image",this.updateImage),this.model.unbind("change:collected",this.rolloverView.render),this.model.unbind("beforedismiss",this.renderLoading),this.model.unbind("afterfollow",this.render)),this.rolloverView&&this.rolloverView.remove(),Backbone.View.prototype.remove.call(this)},render:function(e){var t=this.model&&this.model.id;return this.model.isFetching?this.renderLoading():(this.$el.html(JST["soundboard/templates/artist"]({model:t&&this.model.toJSON(),message:this.options.message})),t&&(this.$el.append(this.rolloverView.render().el),e&&(this.rolloverView.delegateEvents(),this.truncateText())),this)},renderLoading:function(){return this.$el.html(JST["soundboard/templates/artist_interstitial"]()),this},updateImage:function(){this.$(".primary-photo").attr("src",this.model.getImageUrl())},truncateText:function(){this.$(".artist-title").ellipsize()},onclick:function(){if(!this.model||!this.model.id||this.model.isFetching)return;this.trigger("showLightbox",this.model)}}),Soundboard.Views.Player=Backbone.View.extend({events:{"click #play-button.play-state-ready":"play","click #play-button.play-state-playing":"pause","click #play-button.play-state-paused":"play","click #next-button":"next","click #prev-button":"prev"},template:"soundboard/templates/artist_info_player",initialize:function(){_.bindAll(this,"render"),this._artist=this.options.artist,this._player=this.options.player,this._artist.on("change:tracks",this.render,this),this._player.on("change",this.update,this),this._player.on("trackchange",this.update,this),this._player.on("restart",this.update,this)},hasTrack:function(){var e=this._player.queue.current();return!!e&&!!e.url},render:function(){var e=this._player,t=_(this._artist.get("tracks")).map(function(e){return Soundboard.Models.Track.createWithOptions(e)});return e.queue.reset(t),this.update(),this},isReady:function(){return this._player.get("state")===this._player.PLAY_STATE.READY},update:function(){var e=this._player.queue.current();this.$el.html(JST[this.template]({name:this._artist.toJSON().artist_name,track:e&&e.get("data")})),this.$(".player").html(JST["soundboard/templates/player"](this._player.toJSON())),this._updateMarkers()},_updateMarkers:function(){var e=this,t=this._player.queue,n=t.current(),r="trackmark-",i="";t.each(function(e){var s=r+t.indexOf(e),o="trackmark";e===n&&(o+=" now-trackmark"),i+='<div id="'+s+'" class="'+o+'"></div>'}),this.$(".trackmarks").html(i),_(t.length).times(function(t){var n="#"+r+t;e.$(n).bind("click",function(n){e._player.skipTo(t)})})},remove:function(){return this._artist.off("change:tracks",this.render),this._player.off("change",this.update),this._player.off("trackchange",this.update),this._player.off("restart",this.update),this._player.clear(),Backbone.View.prototype.remove.call(this)},play:function(){this._player.play()},pause:function(){this._player.toggleState()},next:function(){this._player.next()},prev:function(){this._player.prev()}}),Soundboard.Views.ArtistInfoPlayer=Soundboard.Views.Player.extend({className:"artist-info-player",template:"soundboard/templates/artist_info_player"}),Soundboard.Views.ArtistInfo=function(){var e={tagName:"li",className:"artist-info feed-item data-panel",initialize:function(){_.bindAll(this,"render"),this._artist=this.options.artist,this._player=new Soundboard.Views.ArtistInfoPlayer({artist:this._artist,player:Soundboard.player}),this._topFansView=new Soundboard.Views.UsersFacepile({title:"TOP FANS",users:this._artist.topFans,maxCount:5,showLoader:!0,gridStyle:"1x4"}),this._similarArtists=new Soundboard.Collections.SimilarArtists([],{owner:Soundboard.currentUser,artist:this._artist}),this._similarArtistsView=new Soundboard.Views.ArtistsPanel({artistViewClass:Soundboard.Views.SimilarArtistInPanel,title:"SIMILAR ARTISTS",artists:this._similarArtists,maxCount:5,showLoader:!0})},owner:function(){return this._artist&&this._artist.owner()},viewLocals:function(){var e=this._artist.toJSON(),t=e.biography,n=e.image&&e.image.url;return{imageUrl:n,name:this._artist.get("artist_name"),hasTrack:this._artist.hasTracks(),biography:t&&t.text&&{text:t.text,provider:t.site,providerUrl:t.license&&t.license["attribution-url"],licenseUrl:t.license&&t.license.url}}},render:function(){return Soundboard.Utils.VariableWidth.flagArtistInfoView(!0),this.$el.html(JST["soundboard/templates/artist_info"](this.viewLocals())),this.$(".artist-info-player").replaceWith(this._player.render().el),this._artist.topFans&&this._artist.topFans.length>0&&this.$(".top-fans").html(this._topFansView.render().el),this.$(".similar-recommended-artists").html(this._similarArtistsView.render().el),this},fetchSimilarArtists:function(){var e=this;this._similarArtists.fetch({success:function(t,n){t&&t.size()===0&&e.$(".similar-recommended-artists").hide(),e.trigger("reposition")},error:function(t,n){e.$(".similar-recommended-artists").hide(),e.trigger("reposition")}})},afterLoad:function(){this.truncateText(),this.fetchSimilarArtists(),this.$(".biography-inner").jScrollPane({verticalDragMinHeight:16,autoReinitialise:!0,hideFocus:!0})},remove:function(){this._player.remove(),this._similarArtists.remove(),this._similarArtistsView.remove(),this._topFansView.remove(),Soundboard.Utils.VariableWidth.flagArtistInfoView(!1),Backbone.View.prototype.remove.call(this)},truncateText:function(){this.$(".artist-title").ellipsize()}};return Backbone.View.extend(e)}(),Soundboard.Views.ArtistJoinPrompt=function(){var e={className:"artist-join-prompt",events:{"click .join-button":"join","click .login":"login","click .continue":"trackContinue","click .lightbox-close-btn":"trackClose"},initialize:function(){_.bindAll(this,"render"),this.artist=this.options.artist,this.users=this.options.users},render:function(){var e=this.artist.get("artist_name"),t=this.artist.toJSON(),n=t.image&&t.image.url,r="Landing-OrgVsFans",i=Soundboard.Utils.ABTesting.allocate(r,["original","fans"]),s=[];return i==="original"?(this.$el.html(JST["soundboard/templates/artist_join_prompt"]({imageUrl:n,name:e})),e.length>17&&this.$(".text-message").css({"font-size":"18px"})):(this.$el.html(JST["soundboard/templates/artist_join_prompt_fans"]({imageUrl:n,name:e})),s=this.artist.topFans.models.concat(this.users.models),_.each(_.first(s,16),function(e,t){this.$(".fans").append($("<span></span>").addClass("user-facepile").append($("<img/>").attr("src",e.get("photoUrl")+"?width=53&height=53")))},this)),Soundboard.Utils.ABTesting.track(r,i),Soundboard.Utils.Tracking.trackGA("Artist Landing","display",this.artist.get("artist_name")),this},join:function(e){Soundboard.Utils.Tracking.trackGA("Artist Landing","join",this.artist.get("artist_name")),Soundboard.promptGuestToLogin()},login:function(e){Soundboard.Utils.Tracking.trackGA("Artist Landing","login",this.artist.get("artist_name")),Soundboard.promptGuestToLogin()},trackContinue:function(e){Soundboard.Utils.Tracking.trackGA("Artist Landing","continue",this.artist.get("artist_name"))},trackClose:function(){Soundboard.Utils.Tracking.trackGA("Artist Landing","close",this.artist.get("artist_name"))}};return Backbone.View.extend(e)}(),Soundboard.Views.FollowedArtistInPanel=Backbone.View.extend({mixins:[Soundboard.Mixins.FollowableArtistPanel],tagName:"li",events:{"click .follow":"follow","click .unfollow":"unfollow"},initialize:function(){_.bindAll(this,"unfollow","follow"),this.artist=this.options.artist,this.user=this.options.user,this.user.isCurrentUser()||(this.artist.on("followerror",this.render,this),this.artist.on("afterfollow",this.render,this))},render:function(){var e={artistId:this.artist.id,artistName:this.artist.get("artist_name"),artistImageUrl:this.artist.getImageUrl(),isFollowed:this.artist.get("collected")};return this.$el.html(JST["soundboard/templates/followed_artist_in_panel"](e)),this.renderAsNew?(this.renderAsNew=!1,this.$el.animate({opacity:"show"},400)):this.$el.show(),this},remove:function(){return this.user.isCurrentUser()||(this.artist.off("followerror",this.render),this.artist.off("afterfollow",this.render)),Backbone.View.prototype.remove.call(this)},_fixParentHeight:function(){this.$el.parent().css("height",this.$el.parent().height())},follow:function(e){this._animatAndFollow(),e.stopPropagation()},unfollow:function(e){var t=this,n=this.$el.height();this.user.isCurrentUser()?(t._fixParentHeight(),t.$el.animate({height:0},500,function(){t.$el.hide().height(n),Soundboard.currentUser.unfollow.call(t,t.artist)})):(this._toggleFollow("unfollow"),Soundboard.currentUser.unfollow.call(t,t.artist)),e.stopPropagation()}}),Soundboard.Views.RecommendedArtistInPanel=Backbone.View.extend({tagName:"li",events:{"click .follow":"follow","click .dismiss":"dismiss","click a.artist":"_track"},initialize:function(){_.bindAll(this,"follow"),this.artist=this.options.artist,this.artist.bind("newrec",this.onNewRecommendation,this)},remove:function(){return this.artist&&this.artist.unbind("newrec",this.onNewRecommendation),Backbone.View.prototype.remove.call(this)},onNewRecommendation:function(){this.renderAsNew=!0,this.render()},render:function(){var e={artistId:this.artist.id,artistName:this.artist.get("artist_name"),artistImageUrl:this.artist.getImageUrl()};return e.artistId!==undefined&&e.artistName!==undefined&&e.artistImageUrl!==undefined?(this.$el.html(JST["soundboard/templates/recommended_artist_in_panel"](e)),this.renderAsNew?(this.renderAsNew=!1,this.$el.animate({opacity:"show"},400)):this.$el.show()):this.$el.hide(),this},_fixParentHeight:function(){this.$el.parent().css("height",this.$el.parent().height())},follow:function(e){var t=this,n=this.$el.height(),r=this.$("img.artist-image"),i=$("#profile-tab"),s=400,o=r.offset(),u={height:r.innerHeight(),width:r.innerWidth()},a=i.offset(),f={height:i.innerWidth(),width:i.innerWidth()},l={top:a.top,left:a.left+i.innerWidth()/2-f.width/2,height:f.height,width:f.width};t._fixParentHeight(),r.appendTo(document.body).css({top:o.top,left:o.left,height:u.height,width:u.width,position:"absolute","z-index":5}).animate(l,s,function(){t.$el.animate({height:0},300,function(){t.$el.hide().height(n),t.$el.appendTo(t.$el.parent()),t._followArtist()}),i.animate({opacity:.1},100,function(){i.animate({opacity:1},800)}),r.animate({opacity:"hide"},300)}),Soundboard.Utils.Tracking.rightRail("click (recommended artists)","follow"),e.stopPropagation()},dismiss:function(e){var t=this,n=this.$el.height();t._fixParentHeight(),t.$el.animate({height:0},300,function(){t.$el.hide().height(n),t.$el.appendTo(t.$el.parent()),t._dismissArtist()}),Soundboard.Utils.Tracking.rightRail("click (recommended artists)","dismiss"),e.stopPropagation()},_followArtist:function(){Soundboard.currentUser.follow(this.artist)},_dismissArtist:function(){Soundboard.currentUser.dismiss(this.artist)},_track:function(e){Soundboard.Utils.Tracking.rightRail("click (recommended artists)","artist")}}),Soundboard.Views.SimilarArtistInPanel=Soundboard.Views.RecommendedArtistInPanel.extend({_dismissArtist:function(){this.artist.skip()}}),Soundboard.Views.TrendingArtistInPanel=Backbone.View.extend({mixins:[Soundboard.Mixins.FollowableArtistPanel],tagName:"li",events:{"click .follow":"follow","click .unfollow":"unfollow","click a.artist":"_track"},initialize:function(){_.bindAll(this,"follow","unfollow"),this.artist=this.options.artist,this.artist.on("followerror",this.render,this),this.artist.on("afterfollow",this.render,this)},render:function(){return this.$el.html(JST["soundboard/templates/trending_artist_in_panel"]({artistId:this.artist.id,artistName:this.artist.get("artist_name"),artistImageUrl:this.artist.getImageUrl(),isFollowed:this.artist.get("collected")})),this},remove:function(){return this.artist.off("followerror",this.render),this.artist.off("afterfollow",this.render),Backbone.View.prototype.remove.call(this)},follow:function(e){this._animatAndFollow(),Soundboard.Utils.Tracking.rightRail("click (trending artists)","follow"),e.stopPropagation()},unfollow:function(e){this._toggleFollow("unfollow"),Soundboard.currentUser.unfollow.call(this,this.artist),Soundboard.Utils.Tracking.rightRail("click (trending artists)","unfollow"),e.stopPropagation()},_track:function(e){Soundboard.Utils.Tracking.rightRail("click (trending artists)","artist")}}),Soundboard.Views.ArtistRollover=function(){var e,t;return e={viewFor:function(e){var t=e.model,n=t.bucket&&t.bucket(),r=Soundboard.Views,i=[],s=r.ArtistRollover;return n===Soundboard.CONSTANTS.BUCKET.FEED&&(s=r.RecommendedArtistRollover),new s({model:t})}},t={className:"artist-rollover",actionsTemplate:"soundboard/templates/shared_artist_rollover",initialize:function(){_.bindAll(this,"render"),this._artist=this.options.model,this.$el.html(JST["soundboard/templates/artist_rollover"]())},render:function(){return"actionsTemplate"in this&&this.$(".artist-actions-wrapper").html(JST[this.actionsTemplate]({isFollowed:this._artist.get("collected"),shareType:this.shareType&&this.shareType()})),this}},$.extend(!0,t,Soundboard.Mixins.FollowableArtist,Soundboard.Mixins.SharableArtist,Soundboard.Mixins.ActionableArtist),Backbone.View.extend(t,e)}(),Soundboard.Views.RecommendedArtistRollover=function(){var e={actionsTemplate:"soundboard/templates/discovered_artist_rollover"};return $.extend(!0,e,Soundboard.Mixins.DismissableArtist),_(e.events).defaults(Soundboard.Views.ArtistRollover.prototype.events),Soundboard.Views.ArtistRollover.extend(e)}(),Soundboard.Views.ArtistUpdateEmpty=Backbone.View.extend({tagName:"li",className:"artist-update-empty",defaultWidth:242,defaultHeight:242,render:function(){return this.$el.html(JST["soundboard/templates/artist_update_empty"]({width:this.defaultWidth,height:this.defaultHeight})),this}}),Soundboard.Views.ArtistUpdate=Backbone.View.extend({tagName:"li",className:"feed-item",defaultWidth:242,descriptionChars:250,events:{"click .image":"viewUpdate","click .view_comments":"viewUpdate","click .action.comment":"commentUpdate","click .share":"shareUpdate","click .like":"likeUpdate","click .unlike":"unlikeUpdate"},initialize:function(){this.item=this.options.item,this.item.on("change:liked",this.onLikeChanged,this),this.item.on("change:comment_count",this.updateCommentCount,this),this.item.on("afteruncomment",this.onUncomment,this)},render:function(){var e=this.item.get("cover_image"),t=this.item.get("type"),n=e.thumb,r=n?n.src:e.src,i=n?n.height:e.height,s=n?n.width:e.width,o,u=this,a=this.item.get("comment_count"),f=this.item.get("like_count");return i=Math.round(i/s*this.defaultWidth),o=t==="video"?Math.round(this.defaultWidth/16*9):i,this.$el.html(JST["soundboard/templates/artist_update"]({height:i,width:this.defaultWidth,cropHeight:o,src:r,artist:this.item.get("artist"),liked:this.item.get("liked"),description:this.item.linkifiedDescription(),type:t,user:this.item.get("user"),commentCount:a,likeCount:f})),$.each(this.item.get("comments"),function(e,t){var n=new Soundboard.Views.Comment({comment:t,update:u.item});u.$(".comments").append(n.render().el),e===0&&n.$el.addClass("first");if(e>=Soundboard.CONSTANTS.FEED_COMMENTS-1)return!1}),this.$el.addClass(t),this.$(".description span.inner").truncate({max_length:this.descriptionChars,more:"&hellip;"}),a===0&&(this.$(".comments").hide(),this.$(".actions .comment-count").hide()),f===0&&this.$(".actions .like-count").hide(),this},remove:function(){return this.item.off("change:liked",this.onLikeChanged),this.item.off("change:updateCommentCount",this.render),this.item.off("afteruncomment",this.onUncomment),this.timeout&&clearTimeout(this.timeout),Backbone.View.prototype.remove.call(this)},updateCommentCount:function(){var e=this.item.get("comment_count");this.$(".actions .comment-count").text(e),this.$(".view_comments").text(e+" comments ..."),e<=0?this.$(".actions .comment-count").hide():this.$(".actions .comment-count").show()},onUncomment:function(e){var t=this.$(".comments ."+e.id);t&&t.children("div:gt(0)").css({"text-decoration":"line-through",opacity:.3,filter:"alpha(opacity=30)"}),this.updateCommentCount()},onLikeChanged:function(e,t){var n=this.$("span.like, span.unlike"),r=this.item.get("like_count");e&&t||!e&&this.item.get("liked")?(n.addClass("unlike"),n.removeClass("like"),n.text("Unlike"),this.$("span.liked").show(),e===!0&&r++):(n.addClass("like"),n.removeClass("unlike"),n.text("Like"),this.$("span.liked").hide(),e===!0&&r--),this.$(".actions .like-count").text(r),r<=0?this.$(".actions .like-count").hide():this.$(".actions .like-count").show()},commentUpdate:function(e){this.viewUpdate(e)},viewUpdate:function(e){var t=$(e.target);if(t.is(".share")||t.is(".like")||t.is(".unlike")||t.is(".comment-user")||t.is(".user-image"))return;var n=t.data("comments")||!1;if(Soundboard.currentUser.isGuest()){Soundboard.currentUser.clickedLightbox(),Soundboard.Utils.Tracking.guest("ligtbox",this.item.id);if(Soundboard.currentUser.getLightboxViewCount()>1){Soundboard.lightbox.showSignupPrompt(this.item),Soundboard.Utils.Tracking.guest("ligtbox nag",this.item.id);return}}Soundboard.lightbox.showArtistUpdate(this.item,{scrollToComments:n})},shareUpdate:function(e){this.item.share(),e.stopPropagation()},likeUpdate:function(e){this.onLikeChanged(!0,!0),this.item.like(),e.stopPropagation()},unlikeUpdate:function(e){this.onLikeChanged(!0,!1),this.item.unlike(),e.stopPropagation()}}),Soundboard.Views.EmptyArtists=Backbone.View.extend({tagName:"ul",className:"artists",initialize:function(){this.loading=this.options.loading,this.message=this.options.message,this.promptClass=this.options.promptClass},render:function(){var e=this,t={message:e.message,loading:e.loading};return this.renderPrompt(),e.$el.append(e.createArtist(t).render().el),this.$el.append('<div id="bottom-mask"></div>'),this},renderPrompt:function(){if(!this.promptClass)return;var e=(new this.promptClass).render();this.$el.prepend(e.el)},createArtist:function(e){return new Soundboard.Views.EmptyArtist(e)}}),Soundboard.Views.Artists=Backbone.View.extend({tagName:"div",className:"artists-container",pageSize:30,initialize:function(){_.bindAll(this,"render","run"),this.bucket=this.options.bucket,this.fetching=!1,this.offset=0},render:function(){return this.offset=0,$(window).on("scroll",this.run),this.$el.html('<ul class="artists"></ul>'),this.addArtists(),this},remove:function(){return $(window).off("scroll",this.run),Backbone.View.prototype.remove.call(this)},onEmpty:function(){},onError:function(e){return this.$el.html('<div class="error"><p>'+e.status+" error</p></div>"),this},run:function(){var e,t,n,r,i,s,o;if(!this.$el.is(":visible"))return;if(this.offset>=this.bucket.length)return;t=$(window).height(),e=$(document).height(),n=t*.66,r=window.scrollY||$(window).scrollTop(),i=t+r,s=this.$el.offset().top,o=this.bucket.length>0&&r>s+1,o!==this._scrolled&&(this._scrolled=o),e>n&&e<i+n&&this._renderArtists()},addArtists:function(){this.bucket.comparator&&this.bucket.sort();if(this.bucket.length===0)return this.onEmpty();this._renderArtists()},_renderArtists:function(){var e=this,t=this.$("ul.artists");$.each(this.bucket.models.slice(this.offset,this.offset+this.pageSize),function(n,r){var i=e.createArtist(r);t.append(i.render().el),i.truncateText&&i.truncateText()}),this.offset+=this.pageSize},createArtist:function(e,t){var n=e&&e.id?"Artist":"EmptyArtist",r,i;return i=t?_.clone(t):{},_.defaults(i,{model:e}),r=new Soundboard.Views[n](i),r.bind("showLightbox",Soundboard.lightbox.showArtist),r},truncateText:function(){this.$(".artist-title").each(function(){$(this).ellipsize()})}}),Soundboard.Views.ArtistsFeed=Soundboard.Views.Artists.extend({onEmpty:function(){this.bucket.constructor===Soundboard.Collections.Search&&this.$("ul.artists").append(this.createArtist(null,{message:"No Results"}).render().el)}}),Soundboard.Views.FollowedArtists=Soundboard.Views.Artists.extend({initialize:function(){Soundboard.Views.Artists.prototype.initialize.call(this),this.bucket.bind("remove",this.render,this)},render:function(){var e=this.bucket.size();return $("#profile-breadcrumbs").html("Following "+(e===0?"No":e)+" "+(e===1?"Artist":"Artists")),Soundboard.Views.Artists.prototype.render.call(this)},remove:function(){return this.bucket.unbind("remove",this.render),Soundboard.Views.Artists.prototype.remove.call(this)},onEmpty:function(){this.$el.html(this.emptyArtistsView().render().el)},addArtists:function(){var e=this.bucket.length,t=6-e%3,n=this,r=this.$("ul.artists");Soundboard.Views.Artists.prototype.addArtists.call(this);if(e===0)return},emptyArtistsView:function(){var e={promptClass:Soundboard.Views.FollowPrompt};return new Soundboard.Views.EmptyArtists(e)}}),Soundboard.Views.FriendArtists=Soundboard.Views.Artists.extend({id:"friend-collection",initialize:function(){var e;Soundboard.Views.Artists.prototype.initialize.call(this),this._friends=this.options.friends,e=this._friends.selected,e&&this.setBucketFor(e)},emptyArtistsView:function(){return new Soundboard.Views.EmptyArtists({promptClass:Soundboard.Views.FriendPrompt})},render:function(){return this.bucket?Soundboard.Views.Artists.prototype.render.call(this):this.$el.html(this.emptyArtistsView().render().el),this},onEmpty:function(){var e;this.bucket.constructor===Soundboard.Collections.FollowedArtists&&(e=this.bucket.owner().get("first_name"),this.$el.html((new Soundboard.Views.EmptyArtists({message:e+" hasn't followed any artists yet.",loading:this.bucket.isLoading()})).render().el))},setBucketFor:function(e){var t=e.isSoundboardUser()?"followedArtists":"likedArtists";return this.bucket=e[t],this.bucket}}),Soundboard.Views.ArtistsPanel=Backbone.View.extend({initialize:function(){_.bindAll(this,"render","_onArtistsReset"),this._childViews=[],this.title=this.options.title,this.artists=this.options.artists,this.maxCount=this.options.maxCount,this.linkToMore=this.options.linkToMore||!1,this.linkToMoreURL=this.options.linkToMoreURL,this.artistViewClass=this.options.artistViewClass,this.emptyTemplate=this.options.emptyTemplate,this.showLoader=this.options.showLoader,this.user=this.options.user||Soundboard.currentUser,this.artists.bind("reset",this._onArtistsReset,this)},templateTitle:function(){var e=_.template(this.title);return e({count:this.artists.size()})},_onArtistsReset:function(){this.render(),this.trigger("resetArtists")},render:function(){return this._removeChildViews(),this.showLoader&&this.$el.find(".artist-panel-loading").show(),this.artists.size()===0&&this.emptyTemplate?this.$el.html(JST[this.emptyTemplate]()):(this.$el.html(JST["soundboard/templates/artists_panel"]({title:this.templateTitle(),linkToMore:this.linkToMore,linkToMoreURL:this.linkToMoreURL,showLoader:this.showLoader})),_.each(this.artists.first(this.maxCount),function(e){var t=new this.artistViewClass({artist:e,user:this.user});this._childViews.push(t),this.$("ul").append(t.render().el),this.showLoader&&this.$el.find(".artist-panel-loading").hide()},this)),this},remove:function(){return this._removeChildViews(),this.artists.unbind("reset",this._onArtistsReset),Backbone.View.prototype.remove.call(this)},_removeChildViews:function(){_.each(this._childViews,function(e){e.remove()})}}),Soundboard.Views.Comment=Backbone.View.extend({tagName:"li",className:"comment",events:{"click .delete":"uncomment","mouseover .delete":"toggleTooltip","mouseleave .delete":"toggleTooltip",mouseover:"toggleControls",mouseleave:"toggleControls"},initialize:function(){this.comment=this.options.comment,this.update=this.options.update,this.lightbox=this.options.lightbox||!1},render:function(){return this.$el.html(JST["soundboard/templates/comment"]({comment:Soundboard.Utils.htmlEscape(this.comment.comment),user:this.comment.user,deleteable:this._showDelete(),lightbox:this.lightbox})),this.$el.addClass(this.comment.id),this},uncomment
:function(){var e=this;this.$el.slideUp(150,function(){e.update.uncomment(e.comment),e.remove()})},toggleControls:function(e){this._showDelete()&&this.$(".delete").toggle(e.type==="mouseover")},toggleTooltip:function(e){this.$(".delete-tooltip").toggle(e.type==="mouseover")},_showDelete:function(){return this.lightbox&&this.comment.user.id===Soundboard.currentUser.id}}),Soundboard.Views.EmptyArtist=Backbone.View.extend({className:"empty-artist",tagName:"li",render:function(){return this.options.loading?this.$el.html(JST["soundboard/templates/artist_interstitial"]()):this.$el.html(JST["soundboard/templates/empty_artist"]({message:this.options.message})),this}}),Soundboard.Views.EmptyFacepile=Backbone.View.extend({className:"empty-facepile",initialize:function(){this.pos=this.options.pos},render:function(){return this.$el.html(JST["soundboard/templates/empty_facepile"]({pos:this.pos})),this}}),Soundboard.Views.EmptyStream=Backbone.View.extend({tagName:"li",initialize:function(){this.message=this.options.message,this.isArtistView=this.options.isArtistView},render:function(){return this.isArtistView?(Soundboard.Utils.VariableWidth.flagEmptyStream(!1),Soundboard.Utils.VariableWidth.flagArtistEmptyStream(!0)):(Soundboard.Utils.VariableWidth.flagArtistEmptyStream(!1),Soundboard.Utils.VariableWidth.flagEmptyStream(!0)),this.$el.html(JST["soundboard/templates/empty_stream"]({message:this.message})),this},remove:function(){Soundboard.Utils.VariableWidth.flagArtistEmptyStream(!1),Soundboard.Utils.VariableWidth.flagEmptyStream(!1),Backbone.View.prototype.remove.call(this)}}),Soundboard.Views.ExpandedArtist=function(){var e={className:"expanded-artist",initialize:function(){this._artist=this.options.artist,_.bindAll(this,"render","renderActions"),this._artist.bind("change:image",this.updateImage,this),this._artist.bind("change:collected",this.renderActions,this),this._bioView=new Soundboard.Views.ExpandedArtistBio({artist:this._artist})},owner:function(){return this._artist&&this._artist.owner()},render:function(){var e=this._artist.toJSON();return this.$el.html(JST["soundboard/templates/expanded_artist"]({artistModel:e})),this.renderActions(),this.$(".expanded-summary").append(this._bioView.render().el),!this._artist.get("tracks")&&!this._artist.get("biography")&&this._artist.fetch({data:{fields:"biography,tracks"},url:this._artist.url(!0)}),this},renderActions:function(){var e=this._artist.get("collected");this.$(".expanded-actions").remove(),this.$el.append(JST["soundboard/templates/expanded_artist_actions"]({shareType:this.shareType(),followed:e,discoverable:this._artist.bucket()===Soundboard.CONSTANTS.BUCKET.FEED}))},follow:function(e){var t=this._artist.owner();t&&t.isCurrentUser()&&Soundboard.lightbox.close(),Soundboard.Mixins.FollowableArtist.follow.call(this,e)},unfollow:function(e){var t=this._artist.owner();t&&t.isCurrentUser()&&Soundboard.lightbox.close(),Soundboard.Mixins.FollowableArtist.unfollow.call(this,e)},dismiss:function(e){Soundboard.lightbox.close(),Soundboard.Mixins.DismissableArtist.dismiss.call(this,e)},updateImage:function(){this.$(".expanded-photo").attr("src",this._artist.getImageUrl())},remove:function(){return this._artist&&(this._artist.unbind("change:image",this.updateImage),this._artist.unbind("change:collected",this.renderActions)),Backbone.View.prototype.remove.call(this)}};return e=$.extend(!0,{},Soundboard.Mixins.SharableArtist,Soundboard.Mixins.DismissableArtist,Soundboard.Mixins.FollowableArtist,Soundboard.Mixins.ActionableArtist,e),Backbone.View.extend(e)}(),Soundboard.Views.ExpandedArtistBio=function(){var e={className:"expanded-bio",initialize:function(){this._artist=this.options.artist,this._artist.on("change:biography",this.render,this)},render:function(){var e=this._artist.get("biography");return this.$el.html(JST["soundboard/templates/expanded_artist/expanded_artist_bio"]({bio:e})),e&&this.$el.jScrollPane({autoReinitialise:!0}),this},remove:function(){return this._artist.off("change:biography",this.render),Backbone.View.prototype.remove.call(this)}};return Backbone.View.extend(e)}(),Soundboard.Views.ExpandedArtistUpdate=function(){var e={className:"expanded-artist-update",events:{"click .box.photo":"viewUpdate","click .share":"shareUpdate","click .like":"likeUpdate","click .unlike":"unlikeUpdate","keyup .comment-box input":"onInput","focus .comment-box input":"promptGuest"},initialize:function(){this.$el=$(this.el),this.item=this.options.item,this.scrollToComments=this.options.scrollToComments||!1,this.item.on("aftersetcomments",this.renderComments,this),this.item.on("aftercomment",this.onComment,this),_.bindAll(this,"contentDimensions","render","viewUpdate","shareUpdate")},contentDimensions:function(e,t){var n=e?e-this._sidebarWidth:0,r=t||0,i,s,o,u;o=this.item.get("type")==="video"&&this.item.get("url").match(/youtu\.?be/);if(this.item.get("type")==="audio")i=this._minImageSize,s=81;else if(o)i=640,s=480,u=i/s,n&&r&&(n<i?(i=n,s=Math.round(i/u)):r<s&&(s=r,i=Math.round(s*u)));else{var a=this.item.get("cover_image");a?n&&r?a.width/a.height<n/r?(s=Math.min(r,a.height),i=Math.round(a.width/a.height*s)):(i=Math.min(n,a.width),s=Math.round(a.height/a.width*i)):(i=a.width,s=a.height):i=s=0}return[i,s]},render:function(){var e=this.item.get("cover_image"),t=this.item.get("type"),n=this,r;return(t==="video"||t==="audio")&&Soundboard.player.pause(),this.$el.html(JST["soundboard/templates/expanded_artist_update"]({update:this.item,type:t,src:e&&e.src,artist:this.item.get("artist"),description:this.item.linkifiedDescription(),user:this.item.get("user"),liked:this.item.get("liked"),url:this.item.get("url"),commentCount:this.item.get("comment_count")})),this.renderComments(),r=this.$(".description .content"),this.scrollToComments&&r.bind("jsp-initialised",function(e,t){var r=$(this);r.data("jsp")&&(r.data("jsp").scrollToElement(n.$(".comments li").first(),!0),r.unbind("jsp-initialised"))}),r.jScrollPane({isScrollableH:!1,stickToBottom:!0,hideFocus:!0}),window.setTimeout(function(){r.data("jsp")&&r.data("jsp").reinitialise()},500),this},remove:function(){return this.item.off("aftersetcomments",this.onComments),this.item.off("aftercomment",this.onComment),this.scrollToComments&&this.$(".description .content").unbind("jsp-initialised"),Backbone.View.prototype.remove.call(this)},onComment:function(){var e=this.item.get("comments"),t=this.$(".description .content");this._appendComment(e.slice(-1)[0]),this.item.get("comment_count")>=Soundboard.CONSTANTS.MAX_COMMENTS&&this.$(".comment-box").html('<div class="hr"></div><span class="comments-closed">Comments are closed.</span>'),this._reinitialiseScrollPane(),t.data("jsp")&&t.data("jsp").scrollToBottom(!1)},renderComments:function(){var e=this;this.$(".comments").empty(),$.each(this.item.get("comments"),function(t,n){e._appendComment(n)}),this._reinitialiseScrollPane()},_reinitialiseScrollPane:function(){var e=this.$(".description .content"),t=e&&e.data("jsp");t&&t.reinitialise()},_appendComment:function(e){var t=new Soundboard.Views.Comment({comment:e,update:this.item,lightbox:!0});this.$(".comments").append(t.render().el)},widget:function(e,t){return this.item.widgetEmbed(e,t)},obj:function(){return this.item},viewUpdate:function(){this.item.view()},shareUpdate:function(){this.item.share()},likeUpdate:function(){var e=this.$(".controls span.like");this.item.like(),e.removeClass("like"),e.addClass("unlike"),e.find(".hover").text("unlike"),e.find(".text").text("liked")},unlikeUpdate:function(){var e=this.$(".controls span.unlike");this.item.unlike(),e.removeClass("unlike"),e.addClass("like"),e.find(".hover").text(""),e.find(".text").text("like")},onInput:function(e){var t=e.target;e.keyCode===13&&t.value!==""&&(this.item.comment(t.value),t.value="")},promptGuest:function(){Soundboard.currentUser.isGuest()&&(Soundboard.promptGuestToLogin(),Soundboard.Utils.Tracking.guest("comment",this.item.id))}};return e=$.extend(!0,{},Soundboard.Mixins.ExpandedItem,e),Backbone.View.extend(e)}(),Soundboard.Views.ExpandedLoginPrompt=function(){var e={className:"expanded-login-prompt",events:{"click #expanded-login-prompt-fb":"trackClick","click .twitter":"vote","click .google":"vote","click .email":"vote"},initialize:function(e){this.url=e.url||Soundboard.CONSTANTS.FACEBOOK_OAUTH_URL,_.bindAll(this,"render")},render:function(){return this.$el.html(JST["soundboard/templates/expanded_login_prompt"]({facebookOauthUrl:this.url})),this},trackClick:function(){Soundboard.Utils.Tracking.guest("Login with facebook")},vote:function(e){var t=$(e.target),n;t.is(".twitter")?n="twitter":t.is(".google")?n="google":t.is(".email")&&(n="email"),Soundboard.currentUser.vote(n),this.$(".buttons .button").hide(),this.$(".poll span.text").animate({color:"rgb(204,204,204)",opacity:.7},500),this.$(".buttons").addClass("voted"),this.$(".buttons").text("Thanks for the input. We'll consider adding this.")}};return Backbone.View.extend(e)}(),Soundboard.Views.ExpandedPlayer=Soundboard.Views.Player.extend({className:"expanded-player",template:"soundboard/templates/expanded_player"}),Soundboard.Views.ExpandedPlaylist=function(){var e={className:"expanded-playlist",events:{"click .share":"share"},initialize:function(){this.$el=$(this.el),this.playlist=this.options.playlist,_.bindAll(this,"contentDimensions","render","share")},render:function(){var e,t=[];return Soundboard.player.pause(),_.each(this.playlist.get("artists"),function(e){t.push(e.name)},this),this.$el.html(JST["soundboard/templates/expanded_playlist"]({playlist:this.playlist,artists:t.join(", ")})),this.$(".description .content").jScrollPane({autoReinitialise:!0,isScrollableH:!1,stickToBottom:!0,hideFocus:!0}),this},widget:function(e,t){return this.playlist.widgetEmbed(e,t)},obj:function(){return this.playlist},share:function(){this.playlist.share()}};return e=$.extend(!0,{},Soundboard.Mixins.ExpandedItem,e),Backbone.View.extend(e)}(),Soundboard.Views.ExpandedSignupPrompt=function(){var e={className:"expanded-signup-prompt",width:492,height:252,initialize:function(){this.item=this.options.item,_.bindAll(this,"render")},render:function(){var e=this,t=this.item.get("artist"),n=new Soundboard.Models.ArtistImage({artist_id:t.id});return n.fetch({success:function(t,n){e.replaceArtistImage(t.get("url"))}}),this.$el.html(JST["soundboard/templates/expanded_signup_prompt"]({artist:this.item.get("artist"),facebookOauthUrl:Soundboard.getOauthUrl(this.item.get("artist").id)})),this},replaceArtistImage:function(e){e?this.$(".artist-image").attr("src",e):this.$(".artist-image").attr("src",Soundboard.CONSTANTS.IMAGES.default_artist)}};return Backbone.View.extend(e)}(),Soundboard.Views.ExpandedUgcForm=function(){var e={className:"expanded-ugc-form",events:{"click .post-button":"submit","change #uploader":"checkImage","click .choose-file-button":"chooseFile","change .artist-name-input":"togglePost","keyup .artist-name-input":"clearError","keyup .content-description-input":"togglePost","click .fb-share-container":"toggleShare"},initialize:function(){this.$el=$(this.el),this.item=this.options.item,this.uploading=!1,_.bindAll(this,"render"),this.search=new Soundboard.Views.InstantSearch({placeholder:"Tag artist name",formClass:this.className,resultClass:"ugc-uploader"})},render:function(e){var t=this;return this.$el.html(JST["soundboard/templates/expanded_ugc_form"]()),this.$(".description .content").jScrollPane({autoReinitialise:!0}),this.$(".artist-name-input").append(this.search.render().el),this.search.$el.show(),this.$uploader=this.$("#uploader"),$.browser.msie&&(this.$(".choose-file-button").hide(),this.$("form").css({visibility:"visible"}),this.$("#uploader").click(function(e){setTimeout(function(){t.$uploader.val().length>0&&t.checkImage()},0)})),this},remove:function(){return this.search.remove(),$(".instant-search-results.ugc-uploader ").remove(),Backbone.View.prototype.render.call(this)},submit:function(){if(!this._canUpload())return!1;this.uploading=!0;var e=this.$(".artist-name-input input").val(),t=this.$(".content-description-input").val(),n=0,r=this.$(".post-button"),i=this;r.text(""),r.addClass("post-button-loading"),$(".fb-share-container input").is(":checked")&&(n=1),Soundboard.currentUser.fetchS3Config(e,t,n,function(e){i.buildForm(e)},function(){i.onConfigError()})},checkImage:function(){var e=this._parseExtension(this.$uploader.val().toLowerCase());$.inArray(e,["gif","png","jpg","jpeg","jpe"])===-1?(window.alert("This is not a valid image. Please select a different file."),this.$uploader.val(""),this.togglePost(),this.$(".content-image-container img").remove()):(this.$(".ugc-content-inputs").css("display","block"),this.$(".ugc-disclaimer").css("display","none"),this.$el.css("height",380),$(".expanded-content").css("height",388),$(".lightbox-details").css("height",388),this.togglePost(),this.previewImage())},onConfigError:function(){this._resetUploadState(),window.alert("Oops something went wrong, please try again.")},buildForm:function(e){var t=e.data,n=e.url,r=e.status,i=this.$("form"),s=e.artist_id,o=this.$(".artist-name-input input").val();if(r==="not found"){this.onMissingArtist();return}i.attr("action",n),$.each(t,function(e,t){$("<input>").attr({type:"hidden",name:e,value:t}).prependTo(i)}),i.iframePostForm({complete:function(e){if(!e||e==="")window.alert("Oops something went wrong, please try again.");else{var t="artists/"+s+"/updates/"+e;Soundboard.currentUser.incUploadCount(1),Soundboard.currentUser.incLikeCount(1),Soundboard.Utils.Tracking.uploadedUgc(o),Soundboard.context===Soundboard.CONSTANTS.CONTEXT.MAIN?Soundboard.router.navigate(t,{trigger:!0}):window.location="/"+t}}}),i.submit()},onMissingArtist:function(){this.$(".artist-name-input").css("border","1px solid #E2116A"),this.$(".content-description-input").css("visibility","hidden"),this.$(".artist-name-error").css("display","block"),this._resetUploadState()},chooseFile:function(){this.$(".ugc-image-uploader input").click()},togglePost:function(){this._hasRequiredFields()?this.$(".post-button").addClass("active"):this.$(".post-button").removeClass("active")},toggleShare:function(){this.$("input.fb-share-box").is(":checked")?(this.$("input.fb-share-box").attr("checked",!1),this.$(".fb-share-box-sprite").css("background-position","0 0"),this.$(".fb-share-container").addClass("disabled")):(this.$("input.fb-share-box").attr("checked",!0),this.$(".fb-share-box-sprite").css("background-position","0 -16px"),this.$(".fb-share-container").removeClass("disabled"))},_parseExtension:function(e){if(e.match(/[.]([a-zA-Z][\w]+)$/))return RegExp.$1},_hasFile:function(){var e=this.$uploader;return e.val()&&e.val()!==""},_canUpload:function(){return this._hasRequiredFields()&&!this.uploading},_hasRequiredFields:function(){var e=this.$(".artist-name-input input").val(),t=this.$(".content-description-input").val();return e!==null&&$.trim(e)!==""&&t!==null&&$.trim(t)!==""&&this._hasFile()},_resetUploadState:function(){this.$(".post-button").removeClass("post-button-loading"),this.$(".post-button").text("Post"),this.uploading=!1},clearError:function(){this.$(".artist-name-input ").css("border","none"),this.$(".content-description-input").css("visibility","visible"),this.$(".artist-name-error, .server-error").css("display","none"),this.togglePost()},previewImage:function(){var e=this.$(".content-image-container"),t;try{t=new FileReader}catch(n){e.html('<div class="image-not-supported">Preview not supported in this browser</div>');return}this._hasFile()&&(t.onload=function(t){var n=new Image;n.src=t.target.result,e.find("img").remove(),n.onload=function(){var t=180,r=180,i=n.width,s=n.height,o=0,u=$("<img>");i>t&&(s=s*t/i,i=t),s>r&&(i=i*r/s,s=r),o=Math.ceil((174-s)/2),u.attr("src",n.src),u.css({height:Math.ceil(s),width:Math.ceil(i),margin:o+"px auto"}),e.append(u)}},t.readAsDataURL(this.$uploader[0].files[0]))}};return Backbone.View.extend(e)}(),Soundboard.Views.FacepileFriend=function(){var e={className:"facepile-friend",tagName:"li",events:{"mouseover img":"toggleTooltip","mouseleave img":"toggleTooltip","click img":"onClick"},initialize:function(){_.bindAll(this,"render"),this._friend=this.options.friend},render:function(){return this.$el.html(JST["soundboard/templates/facepile_friend"]({friend:this._friend.toJSON()})),this},toggleTooltip:function(e){this.$(".facepile-tooltip").toggle(e.type==="mouseover")},onClick:function(e){this._friend.collection.selectFriend(this._friend)}};return Backbone.View.extend(e)}(),Soundboard.Views.Facepile=Backbone.View.extend({FRIEND_LIMIT:15,id:"friends-selector",className:"facepile",initialize:function(){_.bindAll(this,"render"),this._friends=this.options.friends,this._friends.bind("reset",this.render,this),this._search=new Soundboard.Views.Search({instant:!0,placeholder:"Search Friends"}),this._search.bind("search:input",this.render),this._search.bind("search:clear",this.render),this.$el.append(this._search.render().el),this.$el.append(JST["soundboard/templates/facepile"]())},remove:function(){return this._friends.unbind("reset",this.render),this._search.unbind("search:input",this.render),this._search.unbind("search:clear",this.render),this._search.remove(),Backbone.View.prototype.remove.call(this)},render:function(e){var t=this.$(".facepile-friends"),n;return t.empty(),n=this._friends.search(e).first(this.FRIEND_LIMIT),_(n).each(function(e){var n=new Soundboard.Views.FacepileFriend({friend:e});t.append(n.render().el)}),this}}),Soundboard.Views.FriendHeader=Backbone.View.extend({id:"friend-header",initialize:function(){this._friends=this.options.friends},render:function(){var e=this._friend||this._friends.selected,t=e&&e.isSoundboardUser(),n=e&&e.toJSON(),r={friend:n,soundboardUser:t},i,s;return this.$el.empty(),e&&!t&&(i=new Soundboard.Views.InvitePrompt({friend:e}),this.$el.append(i.render().el)),r.message=this.messageFor(e),s=JST["soundboard/templates/friend_header"](r),this.$el.append(s),this},messageFor:function(e){var t=null;return e?(e.isSoundboardUser()?t=e.get("name")+" follows &#x2026;":e.likedArtists.length>0&&(t=e.get("first_name")+" likes these artists on Facebook"),t):"No Friend Selected"}}),Soundboard.Views.GuestHeader=Backbone.View.extend({className:"promo-banner",events:{"click #log_in":"showLoginPrompt","click #join":"showLoginPrompt"},render:function(){return this.$el.html(JST["soundboard/templates/guest_header"]({})),this},showLoginPrompt:function(e){Soundboard.lightbox.showLoginPrompt(),e.stopPropagation()}}),Soundboard.Views.Search=function(){var e="",t={className:"search",events:{"keyup .search-input":"onInput","click .search-button":"toggleSearch"},_searchOnEnter:!0,initialize:function(){_.bindAll(this,"render","toggleFocus"),this._instant=this.options.instant,this._placeholder=this.options.placeholder,this._formName=this.options.formClass,this._resultClass=this.options.resultClass},render:function(){var e;return this.$el.html(JST["soundboard/templates/search"]({placeholder:this._placeholder})),this._setupEvents(),this},val:function(e){var t=this.$(".search-input");if(!e&&e!=="")return t.val();t.val(e),t.blur()},_setupEvents:function(){var e=this.$(".search-input");e.focus(this.toggleFocus),e.blur(this.toggleFocus),this.toggleFocus($.Event("blur",{target:e})),this._placeholder&&e.placeholder()},onInput:function(e){var t=e.target,n=t.value,r=this.$(".search-button"),i=e.keyCode,s,o;if(i===27)return s=$.Event("escape",{target:r}),this.toggleSearch(s);r.toggleClass("search-clear",!0),this._instant?this.trigger("search:input",n):this._searchOnEnter&&i===13&&this.search(t,n)},search:function(e,t){e.blur(),this.formClass!=="expanded-ugc-form"&&this.trigger("search:enter",t)},toggleFocus:function(e){var t=$(e.target),n=e.type==="focus"||!this._isInputEmpty(t);this.$el.toggleClass("search-focus",n),this.$(".search-button").toggleClass("search-clear",n)},toggleSearch:function(t){var n=this.$(".search-input"),r=this._isInputEmpty(n);r?n.blur():(this.$(".search-button").toggleClass("search-clear",!1),n.val(e),n.blur(),this.trigger("search:clear"))},_isInputEmpty:function(t){return t.val()===e||t.val()===t.attr("placeholder")}};return Backbone.View.extend(t)}(),Soundboard.Views.InstantSearch=function(){var e={_searchOnEnter:!1,render:function(){var e=this;this.$el.html(JST["soundboard/templates/search"]({placeholder:this._placeholder}));var t=this.$(".search-input").instantSearch({source:function(e,t){$.ajax({url:"/api/v4/artist/suggest",dataType:"jsonp",data:{results:5,api_key:Soundboard.CONSTANTS.ECHONEST.api_key,format:"jsonp",name:e.term},success:function(e){var n=jQuery.map(e.response.artists,function(e){return e.name});t(n,null)},error:function(e,n,r){t(null,r)}})},action:function(t){e.search(this.$input,t)},closeOnBlur:!0,showNoResults:!0,resultClass:this._resultClass});return this.$(".search-input").attr("placeholder",this._placeholder),this._setupEvents(),this._instantSearch=t.data("instantsearch"),this.bind("search:clear",this._instantSearch.reset,this._instantSearch),this},remove:function(){return this._instantSearch&&this.unbind("search:clear",this._instantSearch.reset),Backbone.View.prototype.render.call(this)}};return Soundboard.Views.Search.extend(e)}(),Soundboard.Layouts.Column=function(){this.height=this.left=0},Soundboard.Layouts.Column.prototype={margin:5,width:242,stackView:function(e){var t=e.$el;return t.css({width:this.width}),e},reset:function(){}},Soundboard.Layouts.ColumnarStack=function(e,t){this.container=e,this.$el=t||e.$el,this.columns=_([]),this.childViews=_([])},Soundboard.Layouts.ColumnarStack.prototype={setup:function(){var e=Soundboard.Layouts.Column,t=e.prototype,n=t.width,r=t.margin,i=this,s,o;s=2*r+n,o=Math.max(1,Math.floor(this.$el.width()/s)),_(o).times(function(t){var n=new e;i.columns.push(n)})},clean:function(){this.childViews.each(function(e){e.remove()}),this.columns=_([]),this.childViews=_([])},next:function(){return this.columns.min(function(e){return e.height})},positionView:function(e,t,n){var r=t?this.columns.last():this.next();if(!r)return;e._columnarLayout=this,this.childViews.push(r.stackView(e)),this.container.$("ul.feed-items").hasClass("masonry")&&(n?this.container.$("ul.feed-items").masonry("reload"):this.container.$("ul.feed-items").masonry("appended",e.$el))},repositionView:function(e){var t=e._layoutColumn;t&&(t.reset(),this.childViews.each(function(e){e._layoutColumn===t&&t.stackView(e)}))},removeView:function(e){var t=e._layoutColumn,n=this,r=!0;if(t)return t.reset(),this.childViews.each(function(i,s){i===e?(n.childViews.splice(s,1),e.remove()):i._layoutColumn===t&&(t.stackView(i),r=!1)}),r}},Soundboard.Views.Lightbox=function(){var e={className:"lightbox",events:{click:"checkClose"},margin:20,initialize:function(){_.bindAll(this,"render","show","showArtist","showArtistUpdate","didResize","onescape","close"),this.$el.hide()},render:function(){return this.$el.html(JST["soundboard/templates/lightbox"]()),this._body&&this.$(".expanded-content").html(this._body.render().el),this._left&&this.$("#left-column").html(this._left.render().el),this},show:function(e){return this._left=e.left,this._body=e.body,this._className=e.className,this._minWidth=e.minWidth||e.width,this._maxWidth=e.maxWidth||e.width,this._minHeight=e.minHeight||e.height,this._maxHeight=e.maxHeight||e.height,this._horizontalPadding=e.horizontalPadding||0,this._verticalPadding=e.verticalPadding||0,this._resizeable=e.resizeable,this._centerVertical=e.centerVertical,this._onCloseHandler=e.onCloseHandler,this.render(),this.updateSize(!0),this.$el.show().addClass(this._className),$(window).on("resize",this.didResize),this},showArtist:function(e){return this.show({body:new Soundboard.Views.ExpandedArtist({artist:e}),left:new Soundboard.Views.ExpandedPlayer({artist:e,player:Soundboard.player})})},showLoginPrompt:function(e){return this.show({body:new Soundboard.Views.ExpandedLoginPrompt({url:e}),className:"login-prompt"})},showArtistJoinPrompt:function(e,t){return this.show({body:new Soundboard.Views.ArtistJoinPrompt({artist:e,users:t}),className:"join-prompt"})},showArtistUpdate:function(e,t){t=t||{};var n=$(window),r=new Soundboard.Views.ExpandedArtistUpdate({item:e,scrollToComments:t.scrollToComments}),i=r.getDimensions(),s=Backbone.history&&Backbone.history.fragment,o=t.onCloseHandler||function(){s!==undefined&&Soundboard.router.navigate("/"+s,{trigger:!1,replace:!0})};return Soundboard.router.navigate(e.url(e.get("artist").id),{trigger:!1,replace:!0}),e.setComments(),this.show({body:r,className:"artist-update",maxWidth:i.maxWidth,maxHeight:i.maxHeight,minWidth:i.minWidth,minHeight:i.minHeight,horizontalPadding:i.horizontalPadding,verticalPadding:i.verticalPadding,resizeable:i.resizeable,centerVertical:!0,onCloseHandler:o})},showPlaylist:function(e,t){t=t||{};var n=$(window),r=new Soundboard.Views.ExpandedPlaylist({playlist:e}),i=r.getDimensions(),s=Backbone.history&&Backbone.history.fragment,o=t.onCloseHandler||function(){s!==undefined&&Soundboard.router.navigate("/"+s,{trigger:!1,replace:!0})};return Soundboard.router.navigate(e.url(),{trigger:!1,replace:!0}),this.show({body:r,className:"playlist",maxWidth:i.maxWidth,maxHeight:i.maxHeight,minWidth:i.minWidth,minHeight:i.minHeight,horizontalPadding:i.horizontalPadding,verticalPadding:i.verticalPadding,resizeable:i.resizeable,centerVertical:!0,onCloseHandler:o})},showSignupPrompt:function(e,t){return this.show({body:new Soundboard.Views.ExpandedSignupPrompt({item:e}),className:"signup-prompt",onCloseHandler:function(){Soundboard.currentUser.resetLightboxClickCount(),Soundboard.lightbox.showArtistUpdate(e)}})},showUgcForm:function(){return this.show({body:new Soundboard.Views.ExpandedUgcForm,className:"ugc-form"})},updateSize:function(e){var t=this.$(".lightbox-details"),n=$(window),r=n.width()-this.margin*2-this._horizontalPadding,i=n.height()-this.margin*2-this._verticalPadding,s,o,u;this._resizeable||e?(this._maxWidth&&(s=Math.max(Math.min(r,this._maxWidth),this._minWidth||0)),this._maxHeight&&(o=Math.max(Math.min(i,this._maxHeight),this._minHeight||0)),s/o>this._maxWidth/this._maxHeight?s=this._maxWidth/this._maxHeight*o:o=this._maxHeight/this._maxWidth*s,this._lastWidth=s,this._lastHeight=o):(s=this._lastWidth,o=this._lastHeight),o&&this._centerVertical?u=Math.round((i-o)/2)+this.margin:u=null,s+=this._horizontalPadding,o+=this._verticalPadding,t.css({width:s||null,height:o||null,top:u||null}),(this._resizeable||e)&&this._body&&this._body.updateSize&&this._body.updateSize(s,o)},didResize:function(e){this.updateSize()},onescape:function(e){e.keyCode===27&&this.close()},checkClose:function(e){var t=$(e.target);(t.is(".darkbox")&&!t.parent().is(".join-prompt")||t.is(".darkbox2, .gutter, .lightbox-close-btn, .no-thanks-btn")||t.parent().is(".lightbox-close-btn"))&&this.close(e)},close:function(e){var t=this;_(["_left","_body"]).each(function(e){var n=t[e];n&&(n.remove(),n=null)}),$(window).off("resize",this.didResize),this.$el.hide(),this._className&&this.$el.removeClass(this._className),typeof t._onCloseHandler=="function"&&t._onCloseHandler()}};return Backbone.View.extend(e)}(),Soundboard.Views.MessageView=Backbone.View.extend({id:"message",className:"message",events:{"click .message-actions button":"remove"},initialize:function(){this.title=this.options.title,this.message=this.options.message,this.closeEvent=this.options.closeEvent,this.closeEvent&&Soundboard.Dispatcher.on(this.closeEvent,this.remove,this)},render:function(){return this.$el.html(JST["soundboard/templates/message"]({title:this.title,message:this.message})),$("#header").parent().prepend(this.$el),this},remove:function(){var e=this;this.closeEvent&&Soundboard.Dispatcher.off(this.closeEvent,this.remove),this.$("div.message-actions").slideUp("400",function(){Backbone.View.prototype.remove.call(e)})}}),Soundboard.Views.ProfileInfo=function(){var e={tagName:"li",className:"profile-info feed-item data-panel",initialize:function(){var e;_.bindAll(this,"render","_onArtistsReset"),this.user=this.options.user,this.user.isCurrentUser()?e="soundboard/templates/followed_artists_panel_empty":e="soundboard/templates/followed_artists_panel_empty_public",this._followedArtistsView=new Soundboard.Views.ArtistsPanel({artistViewClass:Soundboard.Views.FollowedArtistInPanel,title:"FOLLOWING <%= count %> ARTISTS",artists:this.user.followedArtists,linkToMore:!0,linkToMoreURL:"#profiles/"+this.user.id+"/following",maxCount:14,emptyTemplate:e,user:this.user}),this._followedArtistsView.bind("resetArtists",this._onArtistsReset,this)},_onArtistsReset:function(){this._columnarLayout&&this._columnarLayout.repositionView(this)},viewLocals:function(){return{imageUrl:this.user.get("photoUrl")+"?type=large"}},render:function(){return this.$el.html(JST["soundboard/templates/profile_info"](this.viewLocals())),this.$(".followed-artists").html(this._followedArtistsView.render().el),this},remove:function(){this._followedArtistsView.unbind("resetArtists",this._onArtistsReset),this._followedArtistsView.remove(),Backbone.View.prototype.remove.call(this)}};return Backbone.View.extend(e)}(),Soundboard.Views.PromoView=Backbone.View.extend({className:"promo-banner",cookieName:"promo_banner",cookieExpires:14,events:{"click .close-btn":"beforeClose","click .android":"_trackAndroid","click .ios":"_trackIos"},render:function(){return $.cookie(this.cookieName)===null&&!Soundboard.welcome&&(this.$el.html(JST["soundboard/templates/promo_banner"]({})),$("#header").parent().prepend(this.$el)),this},beforeClose:function(){var e=this;$.cookie(this.cookieName,1,{expires:this.cookieExpires,path:"/"}),this.$(".promo-banner-fixed").fadeOut("250"),this.$el.slideUp("300",function(){Soundboard.Utils.Tracking.trackGA("Promotion","close","header"),e.remove()})},_trackIos:function(){Soundboard.Utils.Tracking.trackGA("Promotion","ios","user")},_trackAndroid:function(){Soundboard.Utils.Tracking.trackGA("Promotion","android","user")}}),Soundboard.Views.Prompt=Backbone.View.extend({className:"prompt",render:function(){return this.$el.html(JST[this.template](this.options)),this}}),Soundboard.Views.FollowPrompt=Soundboard.Views.Prompt.extend({template:"soundboard/templates/prompt/follow_prompt"}),Soundboard.Views.FriendPrompt=Soundboard.Views.Prompt.extend({template:"soundboard/templates/prompt/friend_prompt"}),Soundboard.Views.InvitePrompt=Backbone.View.extend({className:"invite-prompt",template:"soundboard/templates/prompt/invite_prompt",events:{"click span#invite-button":"invite"},initialize:function(){this._friend=this.options.friend},render:function(){return this.$el.html(JST[this.template]({friend:this._friend.toJSON()})),this},invite:function(){var e={to:this._friend.get("facebook_id")};e=$.extend(e,Soundboard.CONSTANTS.INVITE_OPTIONS),FB.ui(e,function(e){e&&Soundboard.Utils.Tracking.invitedFriend("Friends tab",e.to.length)})}}),Soundboard.Views.TabContainer=Backbone.View.extend({className:"tab-container",events:{"hover .tab-text":"onhover"},initialize:function(){this.documents=this.options.documents,this.documents.bind("change:selected",this.onDocumentSelected,this),this._search=Soundboard.search},remove:function(){return this.documents.unbind("change:selected",this.onDocumentSelected),Backbone.View.prototype.remove.call(this)},render:function(e){var t,n=this.selected&&this.selected.enableSearch;return this.$(".document-selector").length===0&&(this.$el.html(JST["soundboard/templates/tab_container"]({documents:this.documents.toJSON(),user:Soundboard.currentUser})),this.$(".document-selector").append(this._search.render().el)),this._search.$el.toggle(n),e&&(t=this.$(".document-pane"),t.empty(),t.append(e.render().el)),this},onDocumentSelected:function(e){var t="#"+e.id+"-tab";e.get("selected")?(this.selected=e,Soundboard.Dispatcher.trigger("tab:selected"),this.$(t).addClass("selected"),this.render(e.load()),e.afterLoad&&e.afterLoad()):(e.unload(),this.$(t).removeClass("selected"))},onhover:function(e){$(e.target).toggleClass("hover",e.type==="mouseenter")}}),Soundboard.Views.UserFacepile=Backbone.View.extend({className:"user-facepile",events:{"mouseover  .tail":"showTooltip","mouseover  img":"showTooltip","mouseover  span.pos":"showTooltip","mouseleave .tail":"hideTooltip","mouseleave img":"hideTooltip","mouseleave span.pos":"hideTooltip","click a":"_track"},initialize:function(){this.user=this.options.user,this.user.on("change",this.render,this),this.track=this.options.track||!1,this.pos=this.options.pos},render:function(){var e=this.user.get("photoUrl");return this.$el.html(JST["soundboard/templates/user_facepile"]({user:this.user,imageUrl:this.pos===1?e+"?width=109&height=109":e+"?width=53&height=53",pos:this.pos})),this.user.get("like_count")===0&&this.$(".likes").addClass("off"),this.user.get("comment_count")===0&&this.$(".comments").addClass("off"),this.user.get
("upload_count")===0&&this.$(".uploads").addClass("off"),this},remove:function(){return this.user.off("change",this.render),Backbone.View.prototype.remove.call(this)},hideTooltip:function(e){this.$(".face-tooltip").hide(),e.stopPropagation()},showTooltip:function(e){this.$(".face-tooltip").show(),e.stopPropagation()},_track:function(e){this.track&&Soundboard.Utils.Tracking.rightRail("click (top fans)")}}),Soundboard.Views.UsersFacepile=Backbone.View.extend({className:"users-facepile",initialize:function(){this._childViews=[],this.title=this.options.title,this.users=this.options.users,this.maxCount=this.options.maxCount,this.track=this.options.track||!1,this.gridStyle=this.options.gridStyle||"normal"},render:function(){this._removeChildViews(),this.$el.html(JST["soundboard/templates/users_facepile"]({title:this.title})),_.each(this.users.first(this.maxCount),function(e,t){var n=new Soundboard.Views.UserFacepile({user:e.isCurrentUser()?Soundboard.currentUser:e,track:this.track,pos:t+1});this._childViews.push(n),this.$("div.facepile").append(n.render().el)},this);if(this.users.length<this.maxCount){var e=this.maxCount-this.users.length;for(var t=1;t<=e;t++){var n=new Soundboard.Views.EmptyFacepile({pos:this.users.length+t});this._childViews.push(n),this.$("div.facepile").append(n.render().el)}}return this.gridStyle==="normal"?this.$("div.facepile .user-facepile:nth-child(4n), .empty-facepile:nth-child(4n)").css("margin-right",0):(this.$("div.facepile .user-facepile:nth-child(3n), .empty-facepile:nth-child(3n)").css("margin-right",0),this.$("div.facepile .user-facepile:nth-child(5n), .empty-facepile:nth-child(5n)").css("margin-right",0)),this.$("div.facepile .user-facepile:first").addClass("first"),this},remove:function(){return this._removeChildViews(),Backbone.View.prototype.remove.call(this)},_removeChildViews:function(){_.each(this._childViews,function(e){e.remove()})}}),Soundboard.Views.WhatsNewPanel=Backbone.View.extend({tagName:"li",className:"whats-new-panel feed-item data-panel",initialize:function(){_.bindAll(this,"render"),this._trendingUsers=this.options.trendingUsers,this._trendingArtists=this.options.trendingArtists,this._recommendedArtists=this.options.recommendedArtists,this._trendingUsersView=new Soundboard.Views.UsersFacepile({title:"TOP FANS",users:this._trendingUsers,maxCount:16,track:!0}),this._trendingArtistsView=new Soundboard.Views.ArtistsPanel({artistViewClass:Soundboard.Views.TrendingArtistInPanel,className:"trending-artists",title:"TRENDING ARTISTS",artists:this._trendingArtists,maxCount:10}),this._recommendedArtistsView=new Soundboard.Views.ArtistsPanel({artistViewClass:Soundboard.Views.RecommendedArtistInPanel,className:"all-recommended-artists recommended-artists",title:Soundboard.currentUser.isGuest()?"Recommended":"Recommended For You",artists:this._recommendedArtists,maxCount:10})},render:function(){return this.$el.html(JST["soundboard/templates/whats_new_panel"]),this.$(".inner").prepend(this._trendingUsersView.render().el),this.$(".inner").append(this._recommendedArtistsView.render().el),this.$(".inner").append(this._trendingArtistsView.render().el),this},remove:function(){return this._recommendedArtistsView.remove(),this._trendingArtistsView.remove(),this._trendingUsersView.remove(),Backbone.View.prototype.remove.call(this)}}),function(e){function n(t,n){function qt(e){return function(t){return!this._t||!this._t._a?(this._t&&this._t.sID?i._wD(u+"ignoring "+t.type+": "+this._t.sID):i._wD(u+"ignoring "+t.type),null):e.call(this,t)}}this.flashVersion=8,this.debugMode=!0,this.debugFlash=!1,this.useConsole=!0,this.consoleOnly=!1,this.waitForWindowLoad=!1,this.nullURL="about:blank",this.allowPolling=!0,this.useFastPolling=!1,this.useMovieStar=!0,this.bgColor="#ffffff",this.useHighPerformance=!1,this.flashPollingInterval=null,this.flashLoadTimeout=1e3,this.wmode=null,this.allowScriptAccess="always",this.useFlashBlock=!1,this.useHTML5Audio=!0,this.html5Test=/^(probably|maybe)$/i,this.preferFlash=!0,this.audioFormats={mp3:{type:['audio/mpeg; codecs="mp3"',"audio/mpeg","audio/mp3","audio/MPA","audio/mpa-robust"],required:!0},mp4:{related:["aac","m4a"],type:['audio/mp4; codecs="mp4a.40.2"',"audio/aac","audio/x-m4a","audio/MP4A-LATM","audio/mpeg4-generic"],required:!1},ogg:{type:["audio/ogg; codecs=vorbis"],required:!1},wav:{type:['audio/wav; codecs="1"',"audio/wav","audio/wave","audio/x-wav"],required:!1}},this.defaultOptions={autoLoad:!1,stream:!0,autoPlay:!1,loops:1,onid3:null,onload:null,whileloading:null,onplay:null,onpause:null,onresume:null,whileplaying:null,onstop:null,onfailure:null,onfinish:null,onbeforefinish:null,onbeforefinishtime:5e3,onbeforefinishcomplete:null,onjustbeforefinish:null,onjustbeforefinishtime:200,multiShot:!0,multiShotEvents:!1,position:null,pan:0,type:null,usePolicyFile:!1,volume:100},this.flash9Options={isMovieStar:null,usePeakData:!1,useWaveformData:!1,useEQData:!1,onbufferchange:null,ondataerror:null},this.movieStarOptions={bufferTime:3,serverURL:null,onconnect:null,duration:null},this.version=null,this.versionNumber="V2.97a.20110801",this.movieURL=null,this.url=t||null,this.altURL=null,this.swfLoaded=!1,this.enabled=!1,this.o=null,this.movieID="sm2-container",this.id=n||"sm2movie",this.swfCSS={swfBox:"sm2-object-box",swfDefault:"movieContainer",swfError:"swf_error",swfTimedout:"swf_timedout",swfLoaded:"swf_loaded",swfUnblocked:"swf_unblocked",sm2Debug:"sm2_debug",highPerf:"high_performance",flashDebug:"flash_debug"},this.oMC=null,this.sounds={},this.soundIDs=[],this.muted=!1,this.debugID="soundmanager-debug",this.debugURLParam=/([#?&])debug=1/i,this.specialWmodeCase=!1,this.didFlashBlock=!1,this.filePattern=null,this.filePatterns={flash8:/\.mp3(\?.*)?$/i,flash9:/\.mp3(\?.*)?$/i},this.baseMimeTypes=/^\s*audio\/(?:x-)?(?:mp(?:eg|3))\s*(?:$|;)/i,this.netStreamMimeTypes=/^\s*audio\/(?:x-)?(?:mp(?:eg|3))\s*(?:$|;)/i,this.netStreamTypes=["aac","flv","mov","mp4","m4v","f4v","m4a","mp4v","3gp","3g2"],this.netStreamPattern=new RegExp("\\.("+this.netStreamTypes.join("|")+")(\\?.*)?$","i"),this.mimePattern=this.baseMimeTypes,this.features={buffering:!1,peakData:!1,waveformData:!1,eqData:!1,movieStar:!1},this.sandbox={type:null,types:{remote:"remote (domain-based) rules",localWithFile:"local with file access (no internet access)",localWithNetwork:"local with network (internet access only, no local access)",localTrusted:"local, trusted (local+internet access)"},description:null,noRemote:null,noLocal:null},this.hasHTML5=typeof Audio!="undefined"&&typeof (new Audio).canPlayType!="undefined",this.html5={usingFlash:null},this.flash={},this.html5Only=!1,this.ignoreFlash=!1;var r,i=this,s="soundManager",o=s+"::",u="HTML5::",a,f=navigator.userAgent,l=e,c=l.location.href.toString(),h=this.flashVersion,p=document,d,v,m=[],g=!0,y,b=!1,w=!1,E=!1,S=!1,x=!1,T,N=0,C,k,L,A,O,M,_,D,P,H,B,j,F,I,q,R,U,z,W=["log","info","warn","error"],X=8,V,$,J,K=null,Q=null,G,Y,Z,et,tt,nt,rt,it,st=!1,ot=!1,ut,at,ft,lt,ct=null,ht,pt,dt,vt,mt,gt,yt,bt=Array.prototype.slice,wt=!1,Et,St,xt,Tt,Nt,Ct=f.match(/(ipad|iphone|ipod)/i),kt=f.match(/(mobile|pre\/|xoom)/i)||Ct,Lt=f.match(/msie/i),At=f.match(/webkit/i),Ot=f.match(/safari/i)&&!f.match(/chrome/i),Mt=f.match(/opera/i),_t=!c.match(/usehtml5audio/i)&&!c.match(/sm2\-ignorebadua/i)&&Ot&&f.match(/OS X 10_6_([3-7])/i),Dt=typeof console!="undefined"&&typeof console.log!="undefined",Pt=typeof p.hasFocus!="undefined"?p.hasFocus():null,Ht=Ot&&typeof p.hasFocus=="undefined",Bt=!Ht,jt=/(mp3|mp4|mpa)/i,Ft=p.location?p.location.protocol.match(/http/i):null,It=Ft?"":"http:";this.useAltURL=!Ft,this._global_a=null,kt&&(i.useHTML5Audio=!0,i.preferFlash=!1,Ct&&(i.ignoreFlash=!0,wt=!0)),this.ok=function(){return ct?E&&!S:i.useHTML5Audio&&i.hasHTML5},this.supported=this.ok,this.getMovie=function(e){return Lt?l[e]:Ot?a(e)||p[e]:a(e)},this.createSound=function(e){function a(){return n=tt(n),i.sounds[u.id]=new r(u),i.soundIDs.push(u.id),i.sounds[u.id]}var t=s+".createSound(): ",n=null,o=null,u=null;return!E||!i.ok()?(rt(t+G(E?"notOK":"notReady")),!1):(arguments.length===2&&(e={id:arguments[0],url:arguments[1]}),n=k(e),u=n,u.id.toString().charAt(0).match(/^[0-9]$/)&&i._wD(t+G("badID",u.id),2),i._wD(t+u.id+" ("+u.url+")",1),it(u.id,!0)?(i._wD(t+u.id+" exists",1),i.sounds[u.id]):(pt(u)?(o=a(),i._wD("Loading sound "+u.id+" via HTML5"),o._setup_html5(u)):(h>8&&i.useMovieStar&&(u.isMovieStar===null&&(u.isMovieStar=u.serverURL||(u.type?u.type.match(i.netStreamPattern):!1)||u.url.match(i.netStreamPattern)?!0:!1),u.isMovieStar&&i._wD(t+"using MovieStar handling"),u.isMovieStar&&(u.usePeakData&&(T("noPeak"),u.usePeakData=!1),u.loops>1&&T("noNSLoop"))),u=nt(u,t),o=a(),h===8?i.o._createSound(u.id,u.onjustbeforefinishtime,u.loops||1,u.usePolicyFile):(i.o._createSound(u.id,u.url,u.onjustbeforefinishtime,u.usePeakData,u.useWaveformData,u.useEQData,u.isMovieStar,u.isMovieStar?u.bufferTime:!1,u.loops||1,u.serverURL,u.duration||null,u.autoPlay,!0,u.autoLoad,u.usePolicyFile),u.serverURL||(o.connected=!0,u.onconnect&&u.onconnect.apply(o))),!u.serverURL&&(u.autoLoad||u.autoPlay)&&o.load(u)),!u.serverURL&&u.autoPlay&&o.play(),o))},this.destroySound=function(e,t){if(!it(e))return!1;var n=i.sounds[e],r;n._iO={},n.stop(),n.unload();for(r=0;r<i.soundIDs.length;r++)if(i.soundIDs[r]===e){i.soundIDs.splice(r,1);break}return t||n.destruct(!0),n=null,delete i.sounds[e],!0},this.load=function(e,t){return it(e)?i.sounds[e].load(t):!1},this.unload=function(e){return it(e)?i.sounds[e].unload():!1},this.play=function(e,t){var n=s+".play(): ";return!E||!i.ok()?(rt(n+G(E?"notOK":"notReady")),!1):it(e)?i.sounds[e].play(t):(t instanceof Object||(t={url:t}),t&&t.url?(i._wD(n+'attempting to create "'+e+'"',1),t.id=e,i.createSound(t).play()):!1)},this.start=this.play,this.setPosition=function(e,t){return it(e)?i.sounds[e].setPosition(t):!1},this.stop=function(e){return it(e)?(i._wD(s+".stop("+e+")",1),i.sounds[e].stop()):!1},this.stopAll=function(){var e;i._wD(s+".stopAll()",1);for(e in i.sounds)i.sounds.hasOwnProperty(e)&&i.sounds[e].stop()},this.pause=function(e){return it(e)?i.sounds[e].pause():!1},this.pauseAll=function(){var e;for(e=i.soundIDs.length;e--;)i.sounds[i.soundIDs[e]].pause()},this.resume=function(e){return it(e)?i.sounds[e].resume():!1},this.resumeAll=function(){var e;for(e=i.soundIDs.length;e--;)i.sounds[i.soundIDs[e]].resume()},this.togglePause=function(e){return it(e)?i.sounds[e].togglePause():!1},this.setPan=function(e,t){return it(e)?i.sounds[e].setPan(t):!1},this.setVolume=function(e,t){return it(e)?i.sounds[e].setVolume(t):!1},this.mute=function(e){var t=s+".mute(): ",n=0;typeof e!="string"&&(e=null);if(!e){i._wD(t+"Muting all sounds");for(n=i.soundIDs.length;n--;)i.sounds[i.soundIDs[n]].mute();return i.muted=!0,!0}return it(e)?(i._wD(t+'Muting "'+e+'"'),i.sounds[e].mute()):!1},this.muteAll=function(){i.mute()},this.unmute=function(e){var t=s+".unmute(): ",n;typeof e!="string"&&(e=null);if(!e){i._wD(t+"Unmuting all sounds");for(n=i.soundIDs.length;n--;)i.sounds[i.soundIDs[n]].unmute();return i.muted=!1,!0}return it(e)?(i._wD(t+'Unmuting "'+e+'"'),i.sounds[e].unmute()):!1},this.unmuteAll=function(){i.unmute()},this.toggleMute=function(e){return it(e)?i.sounds[e].toggleMute():!1},this.getMemoryUse=function(){var e=0;return i.o&&h!==8&&(e=parseInt(i.o._getMemoryUse(),10)),e},this.disable=function(e){var t;typeof e=="undefined"&&(e=!1);if(S)return!1;S=!0,T("shutdown",1);for(t=i.soundIDs.length;t--;)V(i.sounds[i.soundIDs[t]]);return C(e),yt.remove(l,"load",O),!0},this.canPlayMIME=function(e){var t;return i.hasHTML5&&(t=dt({type:e})),!ct||t?t:e?e.match(i.mimePattern)?!0:!1:null},this.canPlayURL=function(e){var t;return i.hasHTML5&&(t=dt({url:e})),!ct||t?t:e?e.match(i.filePattern)?!0:!1:null},this.canPlayLink=function(e){return typeof e.type!="undefined"&&e.type&&i.canPlayMIME(e.type)?!0:i.canPlayURL(e.href)},this.getSoundById=function(e,t){if(!e)throw new Error(s+".getSoundById(): sID is null/undefined");var n=i.sounds[e];return!n&&!t&&i._wD('"'+e+'" is an invalid sound ID.',2),n},this.onready=function(e,t){var n="onready";if(e&&e instanceof Function)return E&&i._wD(G("queue",n)),t||(t=l),L(n,e,t),A(),!0;throw G("needFunction",n)},this.ontimeout=function(e,t){var n="ontimeout";if(e&&e instanceof Function)return E&&i._wD(G("queue",n)),t||(t=l),L(n,e,t),A({type:n}),!0;throw G("needFunction",n)},this._writeDebug=function(e,t,n){var r="soundmanager-debug",s,o,u;if(!i.debugMode)return!1;typeof n!="undefined"&&n&&(e=e+" | "+(new Date).getTime());if(Dt&&i.useConsole){u=W[t],typeof console[u]!="undefined"?console[u](e):console.log(e);if(i.useConsoleOnly)return!0}try{s=a(r);if(!s)return!1;o=p.createElement("div"),++N%2===0&&(o.className="sm2-alt"),typeof t=="undefined"?t=0:t=parseInt(t,10),o.appendChild(p.createTextNode(e)),t&&(t>=2&&(o.style.fontWeight="bold"),t===3&&(o.style.color="#ff3333")),s.insertBefore(o,s.firstChild)}catch(f){}return s=null,!0},this._wD=this._writeDebug,this._debug=function(){var e,t;T("currentObj",1);for(e=0,t=i.soundIDs.length;e<t;e++)i.sounds[i.soundIDs[e]]._debug()},this.reboot=function(){i._wD(s+".reboot()"),i.soundIDs.length&&i._wD("Destroying "+i.soundIDs.length+" SMSound objects...");var e,t;for(e=i.soundIDs.length;e--;)i.sounds[i.soundIDs[e]].destruct();try{Lt&&(Q=i.o.innerHTML),K=i.o.parentNode.removeChild(i.o),i._wD("Flash movie removed.")}catch(n){T("badRemove",2)}Q=K=ct=null,i.enabled=F=E=st=ot=b=w=S=i.swfLoaded=!1,i.soundIDs=i.sounds=[],i.o=null;for(e in m)if(m.hasOwnProperty(e))for(t=m[e].length;t--;)m[e][t].fired=!1;i._wD(s+": Rebooting..."),l.setTimeout(i.beginDelayedInit,20)},this.getMoviePercent=function(){return i.o&&typeof i.o.PercentLoaded!="undefined"?i.o.PercentLoaded():null},this.beginDelayedInit=function(){x=!0,j(),setTimeout(function(){return ot?!1:(q(),B(),ot=!0,!0)},20),M()},this.destruct=function(){i._wD(s+".destruct()"),i.disable(!0)},Tt={abort:qt(function(e){i._wD(u+"abort: "+this._t.sID)}),canplay:qt(function(e){if(this._t._html5_canplay)return!0;this._t._html5_canplay=!0,i._wD(u+"canplay: "+this._t.sID+", "+this._t.url),this._t._onbufferchange(0);var t=isNaN(this._t.position)?null:this._t.position/1e3;if(this._t.position&&this.currentTime!==t){i._wD(u+"canplay: setting position to "+t);try{this.currentTime=t}catch(n){i._wD(u+"setting position failed: "+n.message,2)}}}),load:qt(function(e){this._t.loaded||(this._t._onbufferchange(0),this._t._whileloading(this._t.bytesTotal,this._t.bytesTotal,this._t._get_html5_duration()),this._t._onload(!0))}),emptied:qt(function(e){i._wD(u+"emptied: "+this._t.sID)}),ended:qt(function(e){i._wD(u+"ended: "+this._t.sID),this._t._onfinish()}),error:qt(function(e){i._wD(u+"error: "+this.error.code),this._t._onload(!1)}),loadeddata:qt(function(e){var t=this._t,n=t.bytesTotal||1;i._wD(u+"loadeddata: "+this._t.sID),!t._loaded&&!Ot&&(t.duration=t._get_html5_duration(),t._whileloading(n,n,t._get_html5_duration()),t._onload(!0))}),loadedmetadata:qt(function(e){i._wD(u+"loadedmetadata: "+this._t.sID)}),loadstart:qt(function(e){i._wD(u+"loadstart: "+this._t.sID),this._t._onbufferchange(1)}),play:qt(function(e){i._wD(u+"play: "+this._t.sID+", "+this._t.url),this._t._onbufferchange(0)}),playing:qt(function(e){i._wD(u+"playing: "+this._t.sID+", "+this._t.url),this._t._onbufferchange(0)}),progress:qt(function(e){if(this._t.loaded)return!1;var t,n,r,s=0,o=e.type==="progress",a=e.target.buffered,f=e.loaded||0,l=e.total||1;if(a&&a.length){for(t=a.length;t--;)s=a.end(t)-a.start(t);f=s/e.target.duration;if(o&&a.length>1){r=[],n=a.length;for(t=0;t<n;t++)r.push(e.target.buffered.start(t)+"-"+e.target.buffered.end(t));i._wD(u+"progress: timeRanges: "+r.join(", "))}o&&!isNaN(f)&&i._wD(u+"progress: "+this._t.sID+": "+Math.floor(f*100)+"% loaded")}isNaN(f)||(this._t._onbufferchange(0),this._t._whileloading(f,l,this._t._get_html5_duration()),f&&l&&f===l&&Tt.load.call(this,e))}),ratechange:qt(function(e){i._wD(u+"ratechange: "+this._t.sID)}),suspend:qt(function(e){i._wD(u+"suspend: "+this._t.sID),Tt.progress.call(this,e)}),stalled:qt(function(e){i._wD(u+"stalled: "+this._t.sID)}),timeupdate:qt(function(e){this._t._onTimer()}),waiting:qt(function(e){i._wD(u+"waiting: "+this._t.sID),this._t._onbufferchange(1)})},r=function(e){var t=this,n,r,s;this.sID=e.id,this.url=e.url,this.options=k(e),this.instanceOptions=this.options,this._iO=this.instanceOptions,this.pan=this.options.pan,this.volume=this.options.volume,this._lastURL=null,this.isHTML5=!1,this._a=null,this.id3={},this._debug=function(){if(i.debugMode){var e=null,n=[],r,s,o=64;for(e in t.options)t.options[e]!==null&&(t.options[e]instanceof Function?(r=t.options[e].toString(),r=r.replace(/\s\s+/g," "),s=r.indexOf("{"),n.push(" "+e+": {"+r.substr(s+1,Math.min(Math.max(r.indexOf("\n")-1,o),o)).replace(/\n/g,"")+"... }")):n.push(" "+e+": "+t.options[e]));i._wD("SMSound() merged options: {\n"+n.join(", \n")+"\n}")}},this._debug(),this.load=function(e){var n=null;typeof e!="undefined"?(t._iO=k(e,t.options),t.instanceOptions=t._iO):(e=t.options,t._iO=e,t.instanceOptions=t._iO,t._lastURL&&t._lastURL!==t.url&&(T("manURL"),t._iO.url=t.url,t.url=null)),t._iO.url||(t._iO.url=t.url),i._wD("SMSound.load(): "+t._iO.url,1);if(t._iO.url===t.url&&t.readyState!==0&&t.readyState!==2)return T("onURL",1),t;t._lastURL=t.url,t.loaded=!1,t.readyState=1,t.playState=0;if(pt(t._iO))n=t._setup_html5(t._iO),n._called_load?i._wD(u+"ignoring request to load again: "+t.sID):(i._wD(u+"load: "+t.sID),t._html5_canplay=!1,n.load(),n._called_load=!0,t._iO.autoPlay&&t.play());else try{t.isHTML5=!1,t._iO=nt(tt(t._iO)),h===8?i.o._load(t.sID,t._iO.url,t._iO.stream,t._iO.autoPlay,t._iO.whileloading?1:0,t._iO.loops||1,t._iO.usePolicyFile):i.o._load(t.sID,t._iO.url,t._iO.stream?!0:!1,t._iO.autoPlay?!0:!1,t._iO.loops||1,t._iO.autoLoad?!0:!1,t._iO.usePolicyFile)}catch(r){T("smError",2),y("onload",!1),R({type:"SMSOUND_LOAD_JS_EXCEPTION",fatal:!0})}return t},this.unload=function(){return t.readyState!==0&&(i._wD('SMSound.unload(): "'+t.sID+'"'),t.isHTML5?(r(),t._a&&(t._a.pause(),t._a.src="")):h===8?i.o._unload(t.sID,i.nullURL):i.o._unload(t.sID),n()),t},this.destruct=function(e){i._wD('SMSound.destruct(): "'+t.sID+'"'),t.isHTML5?(r(),t._a&&(t._a.pause(),t._a.src="",wt||t._remove_html5_events(),t._a._t=null,t._a=null)):(t._iO.onfailure=null,i.o._destroySound(t.sID)),e||i.destroySound(t.sID,!0)},this.play=function(e,n){var r="SMSound.play(): ",o,u;n=n===undefined?!0:n,e||(e={}),t._iO=k(e,t._iO),t._iO=k(t._iO,t.options),t.instanceOptions=t._iO;if(t._iO.serverURL&&!t.connected)return t.getAutoPlay()||(i._wD(r+" Netstream not connected yet - setting autoPlay"),t.setAutoPlay(!0)),t;pt(t._iO)&&(t._setup_html5(t._iO),s());if(t.playState===1&&!t.paused){o=t._iO.multiShot;if(!o)return i._wD(r+'"'+t.sID+'" already playing (one-shot)',1),t;i._wD(r+'"'+t.sID+'" already playing (multi-shot)',1)}if(!t.loaded)if(t.readyState===0)i._wD(r+'Attempting to load "'+t.sID+'"',1),t.isHTML5||(t._iO.autoPlay=!0),t.load(t._iO);else{if(t.readyState===2)return i._wD(r+'Could not load "'+t.sID+'" - exiting',2),t;i._wD(r+'"'+t.sID+'" is loading - attempting to play..',1)}else i._wD(r+'"'+t.sID+'"');return!t.isHTML5&&h===9&&t.position>0&&t.position===t.duration&&(i._wD(r+'"'+t.sID+'": Sound at end, resetting to position:0'),t._iO.position=0),t.paused&&t.position&&t.position>0?(i._wD(r+'"'+t.sID+'" is resuming from paused state',1),t.resume()):(i._wD(r+'"'+t.sID+'" is starting to play'),t.playState=1,t.paused=!1,(!t.instanceCount||t._iO.multiShotEvents||!t.isHTML5&&h>8&&!t.getAutoPlay())&&t.instanceCount++,t.position=typeof t._iO.position!="undefined"&&!isNaN(t._iO.position)?t._iO.position:0,t.isHTML5||(t._iO=nt(tt(t._iO))),t._iO.onplay&&n&&(t._iO.onplay.apply(t),t._onplay_called=!0),t.setVolume(t._iO.volume,!0),t.setPan(t._iO.pan,!0),t.isHTML5?(s(),u=t._setup_html5(),t.setPosition(t._iO.position),u.play()):i.o._start(t.sID,t._iO.loops||1,h===9?t._iO.position:t._iO.position/1e3)),t},this.start=this.play,this.stop=function(e){return t.playState===1&&(t._onbufferchange(0),t.resetOnPosition(0),t.isHTML5||(t.playState=0),t.paused=!1,t._iO.onstop&&t._iO.onstop.apply(t),t.isHTML5?t._a&&(t.setPosition(0),t._a.pause(),t.playState=0,t._onTimer(),r(),t.unload()):(i.o._stop(t.sID,e),t._iO.serverURL&&t.unload()),t.instanceCount=0,t._iO={}),t},this.setAutoPlay=function(e){i._wD("sound "+t.sID+" turned autoplay "+(e?"on":"off")),t._iO.autoPlay=e,t.isHTML5||(i.o._setAutoPlay(t.sID,e),e&&!t.instanceCount&&t.readyState===1&&(t.instanceCount++,i._wD("sound "+t.sID+" incremented instance count to "+t.instanceCount)))},this.getAutoPlay=function(){return t._iO.autoPlay},this.setPosition=function(e){e===undefined&&(e=0);var n,r,s,o=t.isHTML5?Math.max(e,0):Math.min(t.duration||t._iO.duration,Math.max(e,0));n=t.position,t.position=o,s=t.position/1e3,t.resetOnPosition(t.position),t._iO.position=o;if(!t.isHTML5)r=h===9?t.position:s,t.readyState&&t.readyState!==2&&i.o._setPosition(t.sID,r,t.paused||!t.playState);else if(t._a)if(t._html5_canplay){if(t._a.currentTime!==s){i._wD("setPosition("+s+"): setting position");try{t._a.currentTime=s,(t.playState===0||t.paused)&&t._a.pause()}catch(u){i._wD("setPosition("+s+"): setting position failed: "+u.message,2)}}}else i._wD("setPosition("+s+"): delaying, sound not ready");return t.isHTML5&&t.paused&&t._onTimer(!0),t},this.pause=function(e){return t.paused||t.playState===0&&t.readyState!==1?t:(i._wD("SMSound.pause()"),t.paused=!0,t.isHTML5?(t._setup_html5().pause(),r()):(e||e===undefined)&&i.o._pause(t.sID),t._iO.onpause&&t._iO.onpause.apply(t),t)},this.resume=function(){return t.paused?(i._wD("SMSound.resume()"),t.paused=!1,t.playState=1,t.isHTML5?(t._setup_html5().play(),s()):(t._iO.isMovieStar&&t.setPosition(t.position),i.o._pause(t.sID)),!t._onplay_called&&t._iO.onplay?(t._iO.onplay.apply(t),t._onplay_called=!0):t._iO.onresume&&t._iO.onresume.apply(t),t):t},this.togglePause=function(){return i._wD("SMSound.togglePause()"),t.playState===0?(t.play({position:h===9&&!t.isHTML5?t.position:t.position/1e3}),t):(t.paused?t.resume():t.pause(),t)},this.setPan=function(e,n){return typeof e=="undefined"&&(e=0),typeof n=="undefined"&&(n=!1),t.isHTML5||i.o._setPan(t.sID,e),t._iO.pan=e,n||(t.pan=e,t.options.pan=e),t},this.setVolume=function(e,n){return typeof e=="undefined"&&(e=100),typeof n=="undefined"&&(n=!1),t.isHTML5?t._a&&(t._a.volume=Math.max(0,Math.min(1,e/100))):i.o._setVolume(t.sID,i.muted&&!t.muted||t.muted?0:e),t._iO.volume=e,n||(t.volume=e,t.options.volume=e),t},this.mute=function(){return t.muted=!0,t.isHTML5?t._a&&(t._a.muted=!0):i.o._setVolume(t.sID,0),t},this.unmute=function(){t.muted=!1;var e=typeof t._iO.volume!="undefined";return t.isHTML5?t._a&&(t._a.muted=!1):i.o._setVolume(t.sID,e?t._iO.volume:t.options.volume),t},this.toggleMute=function(){return t.muted?t.unmute():t.mute()},this.onposition=function(e,n,r){return t._onPositionItems.push({position:e,method:n,scope:typeof r!="undefined"?r:t,fired:!1}),t},this.processOnPosition=function(){var e,n,r=t._onPositionItems.length;if(!r||!t.playState||t._onPositionFired>=r)return!1;for(e=r;e--;)n=t._onPositionItems[e],!n.fired&&t.position>=n.position&&(n.method.apply(n.scope,[n.position]),n.fired=!0,i._onPositionFired++);return!0},this.resetOnPosition=function(e){var n,r,s=t._onPositionItems.length;if(!s)return!1;for(n=s;n--;)r=t._onPositionItems[n],r.fired&&e<=r.position&&(r.fired=!1,i._onPositionFired--);return!0},s=function(){t.isHTML5&&ft(t)},r=function(){t.isHTML5&&lt(t)},n=function(){t._onPositionItems=[],t._onPositionFired=0,t._hasTimer=null,t._onplay_called=!1,t._a=null,t._html5_canplay=!1,t.bytesLoaded=null,t.bytesTotal=null,t.position=null,t.duration=t._iO&&t._iO.duration?t._iO.duration:null,t.durationEstimate=null,t.failures=0,t.loaded=!1,t.playState=0,t.paused=!1,t.readyState=0,t.muted=!1,t.didBeforeFinish=!1,t.didJustBeforeFinish=!1,t.isBuffering=!1,t.instanceOptions={},t.instanceCount=0,t.peakData={left:0,right:0},t.waveformData={left:[],right:[]},t.eqData=[],t.eqData.left=[],t.eqData.right=[]},n(),this._onTimer=function(e){var n,r={};if(t._hasTimer||e)return t._a&&(e||(t.playState>0||t.readyState===1)&&!t.paused)?(t.duration=t._get_html5_duration(),t.durationEstimate=t.duration,n=t._a.currentTime?t._a.currentTime*1e3:0,t._whileplaying(n,r,r,r,r),!0):(i._wD('_onTimer: Warn for "'+t.sID+'": '+(t._a?"":"Could not find element. ")+(t.playState===0?"playState bad, 0?":"playState = "+t.playState+", OK")),!1)},this._get_html5_duration=function(){var e=t._a?t._a.duration*1e3:t._iO?t._iO.duration:undefined,n=e&&!isNaN(e)&&e!==Infinity?e:t._iO?t._iO.duration:null;return n},this._setup_html5=function(e){var r=k(t._iO,e),s=decodeURI,o=wt?i._global_a:t._a,u=s(r.url),a=o&&o._t?o._t.instanceOptions:null;if(o){if(o._t&&a.url===r.url&&(!t._lastURL||t._lastURL===a.url))return o;i._wD("setting new URL on existing object: "+u+(t._lastURL?", old URL: "+t._lastURL:"")),wt&&o._t&&o._t.playState&&r.url!==a.url&&o._t.stop(),n(),o.src=r.url,t.url=r.url,t._lastURL=r.url,o._called_load=!1}else i._wD("creating HTML5 Audio() element with URL: "+u),o=new Audio(r.url),o._called_load=!1,wt&&(i._global_a=o);return t.isHTML5=!0,t._a=o,o._t=t,t._add_html5_events(),o.loop=r.loops>1?"loop":"",r.autoLoad||r.autoPlay?(o.autobuffer="auto",o.preload="auto",t.load(),o._called_load=!0):(o.autobuffer=!1,o.preload="none"),o.loop=r.loops>1?"loop":"",o},this._add_html5_events=function(){function n(e,n,r){return t._a?t._a.addEventListener(e,n,r||!1):null}if(t._a._added_events)return!1;var e;i._wD(u+"adding event listeners: "+t.sID),t._a._added_events=!0;for(e in Tt)Tt.hasOwnProperty(e)&&n(e,Tt[e]);return!0},this._remove_html5_events=function(){function n(e,n,r){return t._a?t._a.removeEventListener(e,n,r||!1):null}var e;i._wD(u+"removing event listeners: "+t.sID),t._a._added_events=!1;for(e in Tt)Tt.hasOwnProperty(e)&&n(e,Tt[e])},this._onload=function(e){var n="SMSound._onload(): ",r=e?!0:!1;return i._wD(n+'"'+t.sID+'"'+(r?" loaded.":" failed to load? - "+t.url),r?1:2),!r&&!t.isHTML5&&(i.sandbox.noRemote===!0&&i._wD(n+G("noNet"),1),i.sandbox.noLocal===!0&&i._wD(n+G("noLocal"),1)),t.loaded=r,t.readyState=r?3:2,t._onbufferchange(0),t._iO.onload&&t._iO.onload.apply(t,[r]),!0},this._onbufferchange=function(e){var n="SMSound._onbufferchange()";return t.playState===0?!1:e&&t.isBuffering||!e&&!t.isBuffering?!1:(t.isBuffering=e===1,t._iO.onbufferchange&&(i._wD(n+": "+e),t._iO.onbufferchange.apply(t)),!0)},this._onfailure=function(e,n,r){t.failures++,i._wD('SMSound._onfailure(): "'+t.sID+'" count '+t.failures),t._iO.onfailure&&t.failures===1?t._iO.onfailure(t,e,n,r):i._wD("SMSound._onfailure(): ignoring")},this._onbeforefinish=function(){t.didBeforeFinish||(t.didBeforeFinish=!0,t._iO.onbeforefinish&&(i._wD('SMSound._onbeforefinish(): "'+t.sID+'"'),t._iO.onbeforefinish.apply(t)))},this._onjustbeforefinish=function(e){t.didJustBeforeFinish||(t.didJustBeforeFinish=!0,t._iO.onjustbeforefinish&&(i._wD('SMSound._onjustbeforefinish(): "'+t.sID+'"'),t._iO.onjustbeforefinish.apply(t)))},this._onfinish=function(){var e=t._iO.onfinish;t._onbufferchange(0),t.resetOnPosition(0),t._iO.onbeforefinishcomplete&&t._iO.onbeforefinishcomplete.apply(t),t.didBeforeFinish=!1,t.didJustBeforeFinish=!1,t.instanceCount&&(t.instanceCount--,t.instanceCount||(t.playState=0,t.paused=!1,t.instanceCount=0,t.instanceOptions={},t._iO={},r()),(!t.instanceCount||t._iO.multiShotEvents)&&e&&(i._wD('SMSound._onfinish(): "'+t.sID+'"'),e.apply(t)))},this._whileloading=function(e,n,r,i){t.bytesLoaded=e,t.bytesTotal=n,t.duration=Math.floor(r),t.bufferLength=i,t._iO.isMovieStar?(t.durationEstimate=t.duration,t.readyState!==3&&t._iO.whileloading&&t._iO.whileloading.apply(t)):(t._iO.duration?t.durationEstimate=t.duration>t._iO.duration?t.duration:t._iO.duration:t.durationEstimate=parseInt(t.bytesTotal/t.bytesLoaded*t.duration,10),t.durationEstimate===undefined&&(t.durationEstimate=t.duration),t.readyState!==3&&t._iO.whileloading&&t._iO.whileloading.apply(t))},this._whileplaying=function(e,n,r,s,o){if(isNaN(e)||e===null)return!1;t.position=e,t.processOnPosition();if(!t.isHTML5&&h>8){t._iO.usePeakData&&typeof n!="undefined"&&n&&(t.peakData={left:n.leftPeak,right:n.rightPeak}),t._iO.useWaveformData&&typeof r!="undefined"&&r&&(t.waveformData={left:r.split(","),right:s.split(",")});if(t._iO.useEQData&&typeof o!="undefined"&&o&&o.leftEQ){var u=o.leftEQ.split(",");t.eqData=u,t.eqData.left=u,typeof o.rightEQ!="undefined"&&o.rightEQ&&(t.eqData.right=o.rightEQ.split(","))}}return t.playState===1&&(!t.isHTML5&&i.flashVersion===8&&!t.position&&t.isBuffering&&t._onbufferchange(0),t._iO.whileplaying&&t._iO.whileplaying.apply(t),(t.loaded||!t.loaded&&t._iO.isMovieStar)&&t._iO.onbeforefinish&&t._iO.onbeforefinishtime&&!t.didBeforeFinish&&t.duration-t.position<=t._iO.onbeforefinishtime&&t._onbeforefinish()),!0},this._onid3=function(e,n){i._wD('SMSound._onid3(): "'+this.sID+'" ID3 data received.');var r=[],s,o;for(s=0,o=e.length;s<o;s++)r[e[s]]=n[s];t.id3=k(t.id3,r),t._iO.onid3&&t._iO.onid3.apply(t)},this._onconnect=function(e){var n="SMSound._onconnect(): ";e=e===1,i._wD(n+'"'+t.sID+'"'+(e?" connected.":" failed to connect? - "+t.url),e?1:2),t.connected=e,e&&(t.failures=0,it(t.sID)&&(t.getAutoPlay()?t.play(undefined,t.getAutoPlay()):t._iO.autoLoad&&t.load()),t._iO.onconnect&&t._iO.onconnect.apply(t,[e]))},this._ondataerror=function(e){t.playState>0&&(i._wD("SMSound._ondataerror(): "+e),t._iO.ondataerror&&t._iO.ondataerror.apply(t))}},I=function(){return p.body||p._docElement||p.getElementsByTagName("div")[0]},a=function(e){return p.getElementById(e)},k=function(e,t){var n={},r,s,o;for(r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);s=typeof t=="undefined"?i.defaultOptions:t;for(o in s)s.hasOwnProperty(o)&&typeof n[o]=="undefined"&&(n[o]=s[o]);return n},yt=function(){function n(t){var n=bt.call(t),r=n.length;return e?(n[1]="on"+n[1],r>3&&n.pop()):r===3&&n.push(!1),n}function r(n,r){var i=n.shift(),s=[t[r]];e?i[s](n[0],n[1]):i[s].apply(i,n)}function i(){r(n(arguments),"add")}function s(){r(n(arguments),"remove")}var e=l.attachEvent,t={add:e?"attachEvent":"addEventListener",remove:e?"detachEvent":"removeEventListener"};return{add:i,remove:s}}(),pt=function(e){return!e.serverURL&&(e.type?dt({type:e.type}):dt({url:e.url})||i.html5Only)},dt=function(e){function f(e){return i.preferFlash&&Et&&!i.ignoreFlash&&typeof i.flash[e]!="undefined"&&i.flash[e]}if(!i.useHTML5Audio||!i.hasHTML5)return!1;var t=e.url||null,n=e.type||null,r=i.audioFormats,s,o,u,a;if(n&&i.html5[n]!=="undefined")return i.html5[n]&&!f(n);if(!vt){vt=[];for(a in r)r.hasOwnProperty(a)&&(vt.push(a),r[a].related&&(vt=vt.concat(r[a].related)));vt=new RegExp("\\.("+vt.join("|")+")(\\?.*)?$","i")}u=t?t.toLowerCase().match(vt):null;if(!u||!u.length){if(!n)return!1;o=n.indexOf(";"),u=(o!==-1?n.substr(0,o):n).substr(6)}else u=u[1];return u&&typeof i.html5[u]!="undefined"?i.html5[u]&&!f(u):(n="audio/"+u,s=i.html5.canPlayType({type:n}),i.html5[u]=s,s&&i.html5[n]&&!f(n))},gt=function(){function o(t){var n,r,s,o=!1;if(!e||typeof e.canPlayType!="function")return!1;if(t instanceof Array){for(r=0,s=t.length;r<s&&!o;r++)if(i.html5[t[r]]||e.canPlayType(t[r]).match(i.html5Test))o=!0,i.html5[t[r]]=!0,i.flash[t[r]]=!!(i.preferFlash&&Et&&t[r].match(jt));return o}return n=e&&typeof e.canPlayType=="function"?e.canPlayType(t):!1,!!n&&!!n.match(i.html5Test)}if(!i.useHTML5Audio||typeof Audio=="undefined")return!1;var e=typeof Audio!="undefined"?Mt?new Audio(null):new Audio:null,t,n={},r,s;r=i.audioFormats;for(t in r)if(r.hasOwnProperty(t)){n[t]=o(r[t].type),n["audio/"+t]=n[t],i.preferFlash&&!i.ignoreFlash&&t.match(jt)?i.flash[t]=!0:i.flash[t]=!1;if(r[t]&&r[t].related)for(s=r[t].related.length;s--;)n["audio/"+r[t].related[s]]=n[t],i.html5[r[t].related[s]]=n[t],i.flash[r[t].related[s]]=n[t]}return n.canPlayType=e?o:null,i.html5=k(i.html5,n),!0},H={notReady:"Not loaded yet - wait for soundManager.onload()/onready()",notOK:"Audio support is not available.",domError:o+"createMovie(): appendChild/innerHTML call failed. DOM not ready or other error.",spcWmode:o+"createMovie(): Removing wmode, preventing known SWF loading issue(s)",swf404:s+": Verify that %s is a valid path.",tryDebug:"Try "+s+".debugFlash = true for more security details (output goes to SWF.)",checkSWF:"See SWF output for more debug info.",localFail:s+": Non-HTTP page ("+p.location.protocol+" URL?) Review Flash player security settings for this special case:\nhttp://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html\nMay need to add/allow path, eg. c:/sm2/ or /users/me/sm2/",waitFocus:s+": Special case: Waiting for focus-related event..",waitImpatient:s+": Getting impatient, still waiting for Flash%s...",waitForever:s+": Waiting indefinitely for Flash (will recover if unblocked)...",needFunction:s+": Function object expected for %s"
,badID:'Warning: Sound ID "%s" should be a string, starting with a non-numeric character',noMS:"MovieStar mode not enabled. Exiting.",currentObj:"--- "+s+"._debug(): Current sound objects ---",waitEI:o+"initMovie(): Waiting for ExternalInterface call from Flash..",waitOnload:s+": Waiting for window.onload()",docLoaded:s+": Document already loaded",onload:o+"initComplete(): calling soundManager.onload()",onloadOK:s+".onload() complete",init:o+"init()",didInit:o+"init(): Already called?",flashJS:s+": Attempting to call Flash from JS..",noPolling:s+": Polling (whileloading()/whileplaying() support) is disabled.",secNote:"Flash security note: Network/internet URLs will not load due to security restrictions. Access can be configured via Flash Player Global Security Settings Page: http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html",badRemove:"Warning: Failed to remove flash movie.",noPeak:"Warning: peakData features unsupported for movieStar formats",shutdown:s+".disable(): Shutting down",queue:s+": Queueing %s handler",smFail:s+": Failed to initialise.",smError:"SMSound.load(): Exception: JS-Flash communication failed, or JS error.",fbTimeout:"No flash response, applying ."+i.swfCSS.swfTimedout+" CSS..",fbLoaded:"Flash loaded",fbHandler:o+"flashBlockHandler()",manURL:"SMSound.load(): Using manually-assigned URL",onURL:s+".load(): current URL already assigned.",badFV:s+'.flashVersion must be 8 or 9. "%s" is invalid. Reverting to %s.',as2loop:"Note: Setting stream:false so looping can work (flash 8 limitation)",noNSLoop:"Note: Looping not implemented for MovieStar formats",needfl9:"Note: Switching to flash 9, required for MP4 formats.",mfTimeout:"Setting flashLoadTimeout = 0 (infinite) for off-screen, mobile flash case",mfOn:"mobileFlash::enabling on-screen flash repositioning",policy:"Enabling usePolicyFile for data access"},G=function(){var e=bt.call(arguments),t=e.shift(),n=H&&H[t]?H[t]:"",r,i;if(n&&e&&e.length)for(r=0,i=e.length;r<i;r++)n=n.replace("%s",e[r]);return n},tt=function(e){return h===8&&e.loops>1&&e.stream&&(T("as2loop"),e.stream=!1),e},nt=function(e,t){return e&&!e.usePolicyFile&&(e.onid3||e.usePeakData||e.useWaveformData||e.useEQData)&&(i._wD((t||"")+G("policy")),e.usePolicyFile=!0),e},rt=function(e){typeof console!="undefined"&&typeof console.warn!="undefined"?console.warn(e):i._wD(e)},d=function(){return!1},V=function(e){var t;for(t in e)e.hasOwnProperty(t)&&typeof e[t]=="function"&&(e[t]=d);t=null},$=function(e){typeof e=="undefined"&&(e=!1);if(S||e)T("smFail",2),i.disable(e)},J=function(e){var t=null;if(e)if(e.match(/\.swf(\?.*)?$/i)){t=e.substr(e.toLowerCase().lastIndexOf(".swf?")+4);if(t)return e}else e.lastIndexOf("/")!==e.length-1&&(e+="/");return(e&&e.lastIndexOf("/")!==-1?e.substr(0,e.lastIndexOf("/")+1):"./")+i.movieURL},D=function(){h!==8&&h!==9&&(i._wD(G("badFV",h,X)),i.flashVersion=X);var e=i.debugMode||i.debugFlash?"_debug.swf":".swf";i.useHTML5Audio&&!i.html5Only&&i.audioFormats.mp4.required&&i.flashVersion<9&&(i._wD(G("needfl9")),i.flashVersion=9),h=i.flashVersion,i.version=i.versionNumber+(i.html5Only?" (HTML5-only mode)":h===9?" (AS3/Flash 9)":" (AS2/Flash 8)"),h>8&&(i.defaultOptions=k(i.defaultOptions,i.flash9Options),i.features.buffering=!0),h>8&&i.useMovieStar?(i.defaultOptions=k(i.defaultOptions,i.movieStarOptions),i.filePatterns.flash9=new RegExp("\\.(mp3|"+i.netStreamTypes.join("|")+")(\\?.*)?$","i"),i.mimePattern=i.netStreamMimeTypes,i.features.movieStar=!0):(i.useMovieStar=!1,i.features.movieStar=!1),i.filePattern=i.filePatterns[h!==8?"flash9":"flash8"],i.movieURL=(h===8?"soundmanager2.swf":"soundmanager2_flash9.swf").replace(".swf",e),i.features.peakData=i.features.waveformData=i.features.eqData=h>8},U=function(e,t){if(!i.o||!i.allowPolling)return!1;i.o._setPolling(e,t)},z=function(){i.debugURLParam.test(c)&&(i.debugMode=!0);if(a(i.debugID))return!1;var e,t,n,r,s;if(i.debugMode&&!a(i.debugID)&&(!Dt||!i.useConsole||i.useConsole&&Dt&&!i.consoleOnly)){e=p.createElement("div"),e.id=i.debugID+"-toggle",r={position:"fixed",bottom:"0px",right:"0px",width:"1.2em",height:"1.2em",lineHeight:"1.2em",margin:"2px",textAlign:"center",border:"1px solid #999",cursor:"pointer",background:"#fff",color:"#333",zIndex:10001},e.appendChild(p.createTextNode("-")),e.onclick=et,e.title="Toggle SM2 debug console",f.match(/msie 6/i)&&(e.style.position="absolute",e.style.cursor="hand");for(s in r)r.hasOwnProperty(s)&&(e.style[s]=r[s]);t=p.createElement("div"),t.id=i.debugID,t.style.display=i.debugMode?"block":"none";if(i.debugMode&&!a(e.id)){try{n=I(),n.appendChild(e)}catch(o){throw new Error(G("domError")+" \n"+o.toString())}n.appendChild(t)}}n=null},it=this.getSoundById,T=function(e,t){return e?i._wD(G(e),t):""},c.indexOf("sm2-debug=alert")+1&&i.debugMode&&(i._wD=function(t){e.alert(t)}),et=function(){var e=a(i.debugID),t=a(i.debugID+"-toggle");if(!e)return!1;g?(t.innerHTML="+",e.style.display="none"):(t.innerHTML="-",e.style.display="block"),g=!g},y=function(e,t,n){if(typeof sm2Debugger!="undefined")try{sm2Debugger.handleEvent(e,t,n)}catch(r){}return!0},Z=function(){var e=[];return i.debugMode&&e.push(i.swfCSS.sm2Debug),i.debugFlash&&e.push(i.swfCSS.flashDebug),i.useHighPerformance&&e.push(i.swfCSS.highPerf),e.join(" ")},Y=function(){var e=G("fbHandler"),t=i.getMoviePercent(),n=i.swfCSS,r={type:"FLASHBLOCK"};if(i.html5Only)return!1;i.ok()?(i.didFlashBlock&&i._wD(e+": Unblocked"),i.oMC&&(i.oMC.className=[Z(),n.swfDefault,n.swfLoaded+(i.didFlashBlock?" "+n.swfUnblocked:"")].join(" "))):(ct&&(i.oMC.className=Z()+" "+n.swfDefault+" "+(t===null?n.swfTimedout:n.swfError),i._wD(e+": "+G("fbTimeout")+(t?" ("+G("fbLoaded")+")":""))),i.didFlashBlock=!0,A({type:"ontimeout",ignoreInit:!0,error:r}),R(r))},L=function(e,t,n){typeof m[e]=="undefined"&&(m[e]=[]),m[e].push({method:t,scope:n||null,fired:!1})},A=function(e){e||(e={type:"onready"});if(!E&&e&&!e.ignoreInit)return!1;if(e.type==="ontimeout"&&i.ok())return!1;var t={success:e&&e.ignoreInit?i.ok():!S},n=e&&e.type?m[e.type]||[]:[],r=[],o,u,a=[t],f=ct&&i.useFlashBlock&&!i.ok();e.error&&(a[0].error=e.error);for(o=0,u=n.length;o<u;o++)n[o].fired!==!0&&r.push(n[o]);if(r.length){i._wD(s+": Firing "+r.length+" "+e.type+"() item"+(r.length===1?"":"s"));for(o=0,u=r.length;o<u;o++)r[o].scope?r[o].method.apply(r[o].scope,a):r[o].method.apply(this,a),f||(r[o].fired=!0)}return!0},O=function(){l.setTimeout(function(){i.useFlashBlock&&Y(),A(),i.onload instanceof Function&&(T("onload",1),i.onload.apply(l),T("onloadOK",1)),i.waitForWindowLoad&&yt.add(l,"load",O)},1)},St=function(){if(Et!==undefined)return Et;var e=!1,t=navigator,n=t.plugins,r,i,s,o=l.ActiveXObject;if(n&&n.length)i="application/x-shockwave-flash",s=t.mimeTypes,s&&s[i]&&s[i].enabledPlugin&&s[i].enabledPlugin.description&&(e=!0);else if(typeof o!="undefined"){try{r=new o("ShockwaveFlash.ShockwaveFlash")}catch(u){}e=!!r}return Et=e,e},ht=function(){var e,t,n=f.match(/iphone os (1|2|3_0|3_1)/i)?!0:!1;if(n)return i.hasHTML5=!1,i.html5Only=!0,i.oMC&&(i.oMC.style.display="none"),!1;if(!i.useHTML5Audio)return!0;if(!i.html5||!i.html5.canPlayType)return i._wD("SoundManager: No HTML5 Audio() support detected."),i.hasHTML5=!1,!0;i.hasHTML5=!0;if(_t){i._wD(o+"Note: Buggy HTML5 Audio in Safari on this OS X release, see https://bugs.webkit.org/show_bug.cgi?id=32159 - "+(Et?"will use flash fallback for MP3/MP4, if available":" would use flash fallback for MP3/MP4, but none detected."),1);if(St())return!0}for(t in i.audioFormats)i.audioFormats.hasOwnProperty(t)&&(i.audioFormats[t].required&&!i.html5.canPlayType(i.audioFormats[t].type)||i.flash[t]||i.flash[i.audioFormats[t].type])&&(e=!0);return i.ignoreFlash&&(e=!1),i.html5Only=i.hasHTML5&&i.useHTML5Audio&&!e,!i.html5Only},ft=function(e){e._hasTimer||(e._hasTimer=!0)},lt=function(e){e._hasTimer&&(e._hasTimer=!1)},R=function(e){e=typeof e!="undefined"?e:{},i.onerror instanceof Function&&i.onerror.apply(l,[{type:typeof e.type!="undefined"?e.type:null}]),typeof e.fatal!="undefined"&&e.fatal&&i.disable()},xt=function(){if(!_t||!St())return!1;var e=i.audioFormats,t,n;for(n in e)if(e.hasOwnProperty(n))if(n==="mp3"||n==="mp4"){i._wD(s+": Using flash fallback for "+n+" format"),i.html5[n]=!1;if(e[n]&&e[n].related)for(t=e[n].related.length;t--;)i.html5[e[n].related[t]]=!1}},this._setSandboxType=function(e){var t=i.sandbox;t.type=e,t.description=t.types[typeof t.types[e]!="undefined"?e:"unknown"],i._wD("Flash security sandbox type: "+t.type),t.type==="localWithFile"?(t.noRemote=!0,t.noLocal=!1,T("secNote",2)):t.type==="localWithNetwork"?(t.noRemote=!1,t.noLocal=!0):t.type==="localTrusted"&&(t.noRemote=!1,t.noLocal=!1)},this._externalInterfaceOK=function(e){if(i.swfLoaded)return!1;var t=(new Date).getTime();i._wD(o+"externalInterfaceOK()"+(e?" (~"+(t-e)+" ms)":"")),y("swf",!0),y("flashtojs",!0),i.swfLoaded=!0,Ht=!1,_t&&xt(),Lt?setTimeout(v,100):v()},q=function(e,t){function n(){i._wD("-- SoundManager 2 "+i.version+(!i.html5Only&&i.useHTML5Audio?i.hasHTML5?" + HTML5 audio":", no HTML5 audio support":"")+(i.html5Only?"":(i.useMovieStar?", MovieStar mode":"")+(i.useHighPerformance?", high performance mode, ":", ")+((i.flashPollingInterval?"custom ("+i.flashPollingInterval+"ms)":i.useFastPolling?"fast":"normal")+" polling")+(i.wmode?", wmode: "+i.wmode:"")+(i.debugFlash?", flash debug mode":"")+(i.useFlashBlock?", flashBlock mode":""))+" --",1)}function L(e,t){return'<param name="'+e+'" value="'+t+'" />'}if(b&&w)return!1;if(i.html5Only)return D(),n(),i.oMC=a(i.movieID),v(),b=!0,w=!0,!1;var r=t||i.url,s=i.altURL||r,u="JS/Flash audio component (SoundManager 2)",l,c,h=I(),d,m,g,y=Z(),E,S,x,N="auto",C=null,k=p.getElementsByTagName("html")[0];C=k&&k.dir&&k.dir.match(/rtl/i),e=typeof e=="undefined"?i.id:e,D(),i.url=J(Ft?r:s),t=i.url,i.wmode=!i.wmode&&i.useHighPerformance&&!i.useMovieStar?"transparent":i.wmode,i.wmode!==null&&(f.match(/msie 8/i)||!Lt&&!i.useHighPerformance)&&navigator.platform.match(/win32|win64/i)&&(i.specialWmodeCase=!0,T("spcWmode"),i.wmode=null),l={name:e,id:e,src:t,width:N,height:N,quality:"high",allowScriptAccess:i.allowScriptAccess,bgcolor:i.bgColor,pluginspage:It+"//www.macromedia.com/go/getflashplayer",title:u,type:"application/x-shockwave-flash",wmode:i.wmode,hasPriority:"true"},i.debugFlash&&(l.FlashVars="debug=1"),i.wmode||delete l.wmode;if(Lt)c=p.createElement("div"),m=['<object id="'+e+'" data="'+t+'" type="'+l.type+'" title="'+l.title+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="'+It+'//download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0" width="'+l.width+'" height="'+l.height+'">',L("movie",t),L("AllowScriptAccess",i.allowScriptAccess),L("quality",l.quality),i.wmode?L("wmode",i.wmode):"",L("bgcolor",i.bgColor),L("hasPriority","true"),i.debugFlash?L("FlashVars",l.FlashVars):"","</object>"].join("");else{c=p.createElement("embed");for(d in l)l.hasOwnProperty(d)&&c.setAttribute(d,l[d])}z(),y=Z(),h=I();if(h){i.oMC=a(i.movieID)||p.createElement("div");if(!i.oMC.id){i.oMC.id=i.movieID,i.oMC.className=i.swfCSS.swfDefault+" "+y,E=null,g=null,i.useFlashBlock||(i.useHighPerformance?E={position:"fixed",width:"8px",height:"8px",bottom:"0px",left:"0px",overflow:"hidden"}:(E={position:"absolute",width:"6px",height:"6px",top:"-9999px",left:"-9999px"},C&&(E.left=Math.abs(parseInt(E.left,10))+"px"))),At&&(i.oMC.style.zIndex=1e4);if(!i.debugFlash)for(S in E)E.hasOwnProperty(S)&&(i.oMC.style[S]=E[S]);try{Lt||i.oMC.appendChild(c),h.appendChild(i.oMC),Lt&&(g=i.oMC.appendChild(p.createElement("div")),g.className=i.swfCSS.swfBox,g.innerHTML=m),w=!0}catch(A){throw new Error(G("domError")+" \n"+A.toString())}}else x=i.oMC.className,i.oMC.className=(x?x+" ":i.swfCSS.swfDefault)+(y?" "+y:""),i.oMC.appendChild(c),Lt&&(g=i.oMC.appendChild(p.createElement("div")),g.className=i.swfCSS.swfBox,g.innerHTML=m),w=!0}return b=!0,n(),i._wD(o+"createMovie(): Trying to load "+t+(!Ft&&i.altURL?" (alternate URL)":""),1),!0},B=function(){return i.html5Only?(q(),!1):i.o?!1:(i.o=i.getMovie(i.id),i.o||(K?(Lt?i.oMC.innerHTML=Q:i.oMC.appendChild(K),K=null,b=!0):q(i.id,i.url),i.o=i.getMovie(i.id)),i.o&&T("waitEI"),i.oninitmovie instanceof Function&&setTimeout(i.oninitmovie,1),!0)},M=function(){setTimeout(_,1e3)},_=function(){if(st)return!1;st=!0,yt.remove(l,"load",M);if(Ht&&!Pt)return T("waitFocus"),!1;var e;E||(e=i.getMoviePercent(),i._wD(G("waitImpatient",e===100?" (SWF loaded)":e>0?" (SWF "+e+"% loaded)":""))),setTimeout(function(){e=i.getMoviePercent(),E||(i._wD(s+": No Flash response within expected time.\nLikely causes: "+(e===0?"Loading "+i.movieURL+" may have failed (and/or Flash "+h+"+ not present?), ":"")+"Flash blocked or JS-Flash security error."+(i.debugFlash?" "+G("checkSWF"):""),2),!Ft&&e&&(T("localFail",2),i.debugFlash||T("tryDebug",2)),e===0&&i._wD(G("swf404",i.url)),y("flashtojs",!1,": Timed out"+Ft?" (Check flash security or flash blockers)":" (No plugin/missing SWF?)")),!E&&Bt&&(e===null?i.useFlashBlock||i.flashLoadTimeout===0?(i.useFlashBlock&&Y(),T("waitForever")):$(!0):i.flashLoadTimeout===0?T("waitForever"):$(!0))},i.flashLoadTimeout)},P=function(){function e(){yt.remove(l,"focus",P),yt.remove(l,"load",P)}return Pt||!Ht?(e(),!0):(Bt=!0,Pt=!0,i._wD(o+"handleFocus()"),Ot&&Ht&&yt.remove(l,"mousemove",P),st=!1,e(),!0)},C=function(e){if(E)return!1;if(i.html5Only)return i._wD("-- SoundManager 2: loaded --"),E=!0,O(),y("onload",!0),!0;var t=i.useFlashBlock&&i.flashLoadTimeout&&!i.getMoviePercent(),n;return t||(E=!0,S&&(n={type:!Et&&ct?"NO_FLASH":"INIT_TIMEOUT"})),i._wD("-- SoundManager 2 "+(S?"failed to load":"loaded")+" ("+(S?"security/load error":"OK")+") --",1),S||e?(i.useFlashBlock&&i.oMC&&(i.oMC.className=Z()+" "+(i.getMoviePercent()===null?i.swfCSS.swfTimedout:i.swfCSS.swfError)),A({type:"ontimeout",error:n}),y("onload",!1),R(n),!1):(y("onload",!0),yt.add(l,"unload",d),i.waitForWindowLoad&&!x?(T("waitOnload"),yt.add(l,"load",O),!1):(i.waitForWindowLoad&&x&&T("docLoaded"),O(),!0))},Nt=function(){var e,t=[];if(i.useHTML5Audio&&i.hasHTML5){for(e in i.audioFormats)i.audioFormats.hasOwnProperty(e)&&t.push(e+": "+i.html5[e]+(!i.html5[e]&&Et&&i.flash[e]?" (using flash)":i.preferFlash&&i.flash[e]&&Et?" (preferring flash)":i.html5[e]?"":" ("+(i.audioFormats[e].required?"required, ":"")+"and no flash support)"));i._wD("-- SoundManager 2: HTML5 support tests ("+i.html5Test+"): "+t.join(", ")+" --",1)}},v=function(){function e(){yt.remove(l,"load",i.beginDelayedInit)}T("init");if(E)return T("didInit"),!1;if(i.html5Only)return E||(e(),i.enabled=!0,C()),!0;B();try{T("flashJS"),i.o._externalInterfaceTest(!1),i.allowPolling?U(!0,i.flashPollingInterval||(i.useFastPolling?10:50)):T("noPolling",1),i.debugMode||i.o._disableDebug(),i.enabled=!0,y("jstoflash",!0)}catch(t){return i._wD("js/flash exception: "+t.toString()),y("jstoflash",!1),R({type:"JS_TO_FLASH_EXCEPTION",fatal:!0}),$(!0),C(),!1}return C(),e(),!0},j=function(){return F?!1:(F=!0,z(),function(){var e="sm2-usehtml5audio=",t=c.toLowerCase(),n=null,r="sm2-preferflash=",s=null,o=typeof console!="undefined"&&typeof console.log!="undefined";t.indexOf(e)!==-1&&(n=t.charAt(t.indexOf(e)+e.length)==="1",o&&console.log((n?"Enabling ":"Disabling ")+"useHTML5Audio via URL parameter"),i.useHTML5Audio=n),t.indexOf(r)!==-1&&(s=t.charAt(t.indexOf(r)+r.length)==="1",o&&console.log((s?"Enabling ":"Disabling ")+"preferFlash via URL parameter"),i.preferFlash=s)}(),!Et&&i.hasHTML5&&(i._wD("SoundManager: No Flash detected"+(i.useHTML5Audio?". Trying HTML5-only mode.":", enabling HTML5.")),i.useHTML5Audio=!0,i.preferFlash=!1),gt(),i.html5.usingFlash=ht(),ct=i.html5.usingFlash,Nt(),!Et&&ct&&(i._wD("SoundManager: Fatal error: Flash is needed to play some required formats, but is not available."),i.flashLoadTimeout=1),p.removeEventListener&&p.removeEventListener("DOMContentLoaded",j,!1),B(),!0)},mt=function(){return p.readyState==="complete"&&(j(),p.detachEvent("onreadystatechange",mt)),!0},St(),yt.add(l,"focus",P),yt.add(l,"load",P),yt.add(l,"load",M),Ot&&Ht&&yt.add(l,"mousemove",P),p.addEventListener?p.addEventListener("DOMContentLoaded",j,!1):p.attachEvent?p.attachEvent("onreadystatechange",mt):(y("onload",!1),R({type:"NO_DOM2_EVENTS",fatal:!0})),p.readyState==="complete"&&setTimeout(j,100)}var t=null;if(typeof SM2_DEFER=="undefined"||!SM2_DEFER)t=new n;e.SoundManager=n,e.soundManager=t}(window),Soundboard.SoundManager=Soundboard.SoundManager||{},Soundboard.SoundManager.Player=function(){function t(e){if(soundManager.SBExtensions.isReady)return e();soundManager.onready(function(){return e()})}function n(e,t){var n={};return _.each(e,function(e){var t=this;n[e]=function(){t[e]()}},t),n}var e=["onfinish","onplay","onresume","onpause"],r={_sound:null,play:function(r){var i=this,s=r?r.url:this.queue.current().url;t(function(){i._sound&&i._sound.destruct(),i._sound=soundManager.createSound({id:s,url:s}),i._sound.play(n(e,i))})},pause:function(){var e=this;t(function(){e._sound&&e._sound.pause()})},toggleState:function(){if(!this._sound)return;this._sound.paused?this._sound.resume():this._sound.playState===1?this._sound.pause():this.play()},clear:function(){this._sound&&(this._sound.destruct(),this._sound=null,this.set({state:this.PLAY_STATE.READY})),this.queue.reset()}};return Soundboard.Models.Player.extend(r)}(),soundManager.useHTML5Audio=!0,soundManager.flashLoadTimeout=0,soundManager.debugMode=!1,soundManager.url="/swf",soundManager.audioFormats.mp3.required=!1,soundManager.SBExtensions={},soundManager.SBExtensions.isReady=!1,soundManager.onready(function(){soundManager.SBExtensions.isReady=!0});